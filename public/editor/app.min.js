function initOrderButton(){$(document).on("click","a.btn_form",function(e){if(!$(this).is("[href]")){e.preventDefault();var t=$(this).data("form");if(!t){if(!(t=$(this).parents(".btn_wrap").find(".form")[0])&&$(this).parents(".item_data").length){var n=$(this).parents(".item_block").find(".item_action").eq($(this).parents(".item_data").index()).find(".btn_form");n.length&&(t=n.parents(".btn_wrap").find(".form")[0],n.data("form",t))}$(this).data("form",t)}alertify.genericDialog(t)}})}function initPolicyInfo(){$(document).on("click","a.policy",function(e){e.preventDefault();var t=$(this).data("policy_info");t||$(this).data("policy_info",t=$(this).siblings(".policy_info").show()[0]),alertify.genericDialog(t)})}function initForms(){$(document).on("click",".form_field_submit",function(e){e.preventDefault(),$(this).parents("form").submit()}),$(document).on("submit","form",function(e){e.preventDefault();var t={},n=$(this),i=!0;if(n.find(".error_input").removeClass("error_input"),n.find(".error").text(""),n.find(".form_field").each(function(){var e=$(this);if(e.find(".field_title i").length&&!e.find("input[type=text], input[type=file], textarea").val()){e.find("input, textarea").addClass("error_input");var t="ru"==window.locale_lang?"Обязательное поле":"Required field";e.find(".error").text(t),i=!1}}),!i)return!1;var o=[],s=(t=new FormData,0);n.find(".form_field").each(function(){$field=$(this);var e=$field.find(".field_title").clone().children().remove().end().text().trim();if($field.find("input").is(":checkbox"))o.push({label:e,value:!!$field.find("input:checkbox").is(":checked")});else if($field.find("input").is(":file")){var n=$field.find("input")[0].files,i=[];$.each(n,function(e,n){var o="file-"+s++;t.append(o,n),i.push(o)}),o.push({label:e,value:i})}else o.push({label:e,value:$field.find("input[type=text], input[type=file], input[type=radio]:checked, textarea, select").val()})});var r=$(this).data("form_done");r||$(this).data("form_done",r=n.find(".form_done")[0]),t.append("form",JSON.stringify(o)),$.ajax({url:base_url+"/track/"+page_id,type:"POST",data:t,cache:!1,contentType:!1,processData:!1,success:function(e){alertify.genericDialog(r),n.find(":input").not("input:checkbox, input:radio").val(""),n.find("input:checkbox, input:radio").prop("checked",!1),n.find(".form_field_radio_value:first-child input").prop("checked",!0),n.find(".form_field_select option:first-child").prop("selected",!0),$(document).trigger("track_sent")}})})}function initFAQ(){$(document).on("click",".faq-item",function(){$(this).toggleClass("active").find(".answer").slideToggle("fast")})}!function(e,t){e.require=function(n){var i=t+n;return e.require.cache.modules[i]?e.require.cache.modules[i]:e.require.cache.defines[i]?e.require.cache.modules[i]=e.require.cache.defines[i]():(console.debug("Can't require on path: ",n,i),{})},e.require.cache=e.require.cache||{modules:{},defines:{}},e.define=e.define||function(n,i){e.require.cache.defines[t+n]=i}}(window,document.currentScript.src.replace(/\/[^/]*?$/,"/")),define("app/app.js",function(){window._t=function(e){return window._t.hash[e]||e},window._t.hash={},window._t.load=function(e){window._t.hash={...window._t.hash,...e}},"ru"==window.locale_lang&&require("app/locale/ru.js"),window.lp={},require("app/lib/jquery.min.js"),require("app/style/font-awesome.css"),require("app/style/editor.css"),require("components/style/makefile.tea"),window.preact=require("app/lib/preact.js"),window.preact.hooks=require("app/lib/preact_hooks.js"),window.html=require("app/lib/htm.js").bind(preact.h);const e=require("app/pure_components/internal/block.js"),{Dialog:t}=require("app/pure_components/internal/Dialog/Dialog.js"),{AddBlockDialog:n}=require("app/pure_components/internal/AddBlockDialog/AddBlockDialog.js");require("app/pure_components/benefits.js");class i{shouldComponentUpdate(e){return e.value!=this.props.value}render(t){const n=e.list[t.value.type];if(n)return html`<${n} value=${t.value} />`;console.debug("Undefined block type",t.value)}}class o extends preact.Component{constructor(e){super(e),this.options=e,this.state={blocks:e.blocks,preview:!1,dragHandleIndex:-1},this.baseId=(new Date).getTime(),this.dragComponent=!1,this.dragging=!1,this.blocks=[],this.addBlockDialog=preact.createRef(),e.isGlobal&&(lp.app=this),$(document).mouseup(e=>this.draggableMouseUp()),$(document).mousemove(e=>this.draggableMouseMove(e))}draggableMouseDown(e,t){t&&!this.dragging&&(this.dragComponent=t,this.dragPoint={x:e.pageX,y:e.pageY},e.preventDefault())}draggableMouseUp(){if(this.dragging){var e=-1;this.state.blocks.forEach((t,n)=>{t.value.id==this.dragComponent.value.id&&(e=n)});var t=this.state.dragHandleIndex;if(t!=e&&t!=e+1){var n=[...this.state.blocks],i=n[e];n.splice(e,1),e<t&&t--,n.splice(t,0,i);var o=$(this.dragComponent.base),s=$("<div class='drop-rect'>").appendTo("body").css({top:o.offset().top,height:o[0].clientHeight,opacity:1}),r=$("html").scrollTop();this.setState({blocks:n},()=>{this.triggerChange();var e=$(this.blocks[t].base);e.offset();$("html").scrollTop(r),s.css({top:e.offset().top,opacity:0}),setTimeout(()=>s.remove(),1e3)})}this.setState({dragHandleIndex:-1}),this.dragComponent=!1,this.dragging=!1,$("body").removeClass("dragging")}}draggableMouseMove(e){if(this.dragComponent&&!this.dragging&&(Math.abs(e.pageX-this.dragPoint.x)>3||Math.abs(e.pageY-this.dragPoint.y)>3)&&(this.dragging=!0,$("body").addClass("dragging")),this.dragging){if(this.blocks.length){var t=[];this.blocks.forEach(n=>{var i=n.base.getBoundingClientRect(),o=i.top+i.height/2;t.push(e.clientY-o)});var n=t.map(e=>Math.abs(e)),i=n.indexOf(Math.min(...n)),o=t[i]<0?i:i+1;this.state.dragHandleIndex!=o&&this.setState({dragHandleIndex:o})}if(this.prevMove){let t=$(window).height(),n=100,i=Math.abs(this.prevMove.clientY-e.clientY),o=0;e.clientY<n&&(o=-5),e.clientY>t-n&&(o=5),i*o&&$("html").animate({scrollTop:$("html").scrollTop()+i*o},0,"linear")}this.prevMove=e}else this.prevMove=!1}request(e,t,n){$.ajax({url:this.props.ajax_url,type:"POST",data:$.extend({},{_type:e},t),success:$.proxy(n,this)})}render(e,t){console.debug("app render");var o=html`<div class="drop-marker" key="drop-marker"/>`;return html`
            ${!e.viewOnly&&html`
                <div id="preview-toolbar">
                    ${t.preview&&html`
                        <button onClick=${()=>this.setState({preview:!1})} class="editor-button"><i class="fa fa-cog" />${_t("Editor")}</button>
                    `}
                    ${!t.preview&&html`
                        <button onClick=${()=>this.setState({preview:!0})}><i class="fa fa-times" />${_t("Preview")}</button>
                        <button onClick=${()=>this.publish()}><i class="fa fa-play" />${_t("Publish")}</button>
                        <button onClick=${()=>this.addBlockDialog.current.open({x:0,y:0})}><i class="fa fa-plus" />${_t("Add Section")}</button>
                    `}
                </div>
                <${n} ref=${this.addBlockDialog} />
            `}
            <div id="frame-panel" class="${(t.preview||e.viewOnly)&&"view-layout"}">
                ${t.blocks.map((e,n)=>{var s=preact.h(i,{value:e.value,key:e.value.id,ref:e=>{e&&(0==n&&(this.blocks=[]),this.blocks.push(e))}});return n==t.dragHandleIndex?[o,s]:n==t.blocks.length-1&&t.dragHandleIndex==n+1?[s,o]:s})}
                
            </div>
        `}triggerChange(){clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>{this.request("save",{blocks:JSON.stringify(this.state.blocks)})},500)}blockChanged(e){this.state.blocks.forEach(t=>{t.value.id==e.value.id&&(t.value=e.value)}),this.setState({},()=>this.triggerChange())}publish(){var e=this;preact.render(preact.h(class extends o{componentDidMount(){e.request("publish",{html:this.base.outerHTML,blocks:JSON.stringify(this.state.blocks)},()=>{t.alert({title:_t("Publish success"),text:_t("Your page was successfully published and now is available to your customers")})})}},{assets_url:this.options.assets_url,blocks:this.state.blocks,viewOnly:!0}),$("<div>")[0])}removeBlock(e){var t=[];this.state.blocks.forEach(n=>{n.value.id!=e.value.id&&t.push(n)}),this.setState({blocks:t},()=>this.triggerChange())}addBlock(e){var t=[...this.state.blocks];t.push({value:{id:"id"+ ++this.baseId,type:e}}),this.setState({blocks:t},()=>this.triggerChange())}}return lp.run=function(e){e.isGlobal=!0,$(()=>preact.render(preact.h(o,e),$("#app")[0]))},{}}),define("app/locale/ru.js",function(){return window._t.load({Yes:"Да",Cancel:"Отмена",Preview:"Предпросмотр",Publish:"Публиковать",Editor:"Редактор","Add Section":"Добавить блок","Select component type":"Выбрать тип блока","Your page was successfully published and now is available to your customers":"Ваша страница теперь опубликована и на нее смогут зайти посетители","Publish success":"Успешная публикация","Show icon":"Иконка","Show form as popup":"Всплывающая форма","Map is draggable":"Можно перетаскивать карту","Add Section":"Добавить секцию","Select component type":"Выбрать тип","Document alert":"",Preview:"Просмотр",Editor:"Констуктор",Publish:"Публиковать","Your page was successfully published and now is available to your customers":"Ваша страница успешно опубликована и сейчас доступна для пользователей","Publish success":"Публикация успешна","Sure to remove component?":"Уверены, что хотите удалить компонент?",Settings:"Настройки","Add Item":"Добавить",Logotype:"Логотип","Image logo":"Изображение","Text name logo":"Текст","Upload file":"Загрузить файл","Company name:":"Название компании:","Font settings:":"Настройки шрифта:","Size:":"Размер:",Icons:"Иконки",Text:"Текст","Field label":"Заголовок поля","Field description":"Описание поля","Field placeholder":"Заполнитель поля","Is required?":"Обязательное для ввода?","Text area":"Текстовое поле",Checkbox:"Галочка",Select:"Выпадающее меню","Вариант 1\\nВариант 2\\nВариант 3":"",Options:"Опции",Radio:"Переключатель",File:"Файл",Form:"Форма","Add Field":"Добавить поле","Button text:":"Текст кнопки:","Button color:":"Цвет кнопки:","Show success window":"Окно благодарности",Image:"Изображение","Select image file":"Выбирите изображение","Upload image file":"Загрузить изображение","Order button":"Кнопка заказа","Button behavior after click:":"Поведение кнопки после клика:","Show order form":"Показать форму заказа","Go to the link":"Перейти по ссылке",Link:"Ссылка","Show form":"Показать форму","Media files":"Медиафайлы",Video:"Видео","Video url (youtube or vimeo):":"Видео ссылка:","example: www.youtube.com/embed/xbK8rl9wH4Q":"пример: www.youtube.com/embed/xbK8rl9wH4Q","Exact date":"Дата окончания","Every month":"Ежемесячно","Every week":"Еженедельно","Every day":"Ежедневно","Date:":"Дата:","Day:":"День:","Day of week:":"День недели:","Time:":"Время:","Image title:":"Заголовок изображения:","Image description:":"Подзаголовок изображения:","Upload image":"Загрузить изображение","Show description and order button":"Описание и кнопка заказа","Show order button":"Кнопка заказа","Background color:":"Цвет фона:","Background image:":"Фоновое изображение:","Add noise":"Добавить шум","Show text above the button":"Текст над кнопкой","Add arrow":"Добавить стрелочку","Show text under the form title":"Подзаголовок формы","Show second title":"Подзаголовок","Show third title":"Доп. подзаголовок","Show text under the form":"Текст под формой","Show border from media":"Края у медиа","Show list box":"Список","Form align:":"Положение формы:","Move left<br>":"слева<br>","Move center<br>":"по центру<br>","Move right":"справа","Background texture:":"Текстура фона:","Show first title":"Заголовок","Show border from icon":"Края у иконки","Show name benefit":"Название преимущества","Show description benefit":"Описание преимущества","Show border from image":"Края у изображения","Show image":"Показывать изображение","Show name":"Назваие","Show description":"Описание","Show price":"Цена","Show text above order button":"Показывать ","Show shadow":"Добавить тень","Image size:":"Размер изображения:","middle<br>":"средний<br>",large:"большой","Image format:":"Форма изображения:","circle<br>":"круг<br>",square:"квадрат","Show image name":"Название изображения","Show image signature":"Подпись изображения","Show image descroption":"Описание изображение","Show big image (enable fancybox)":"Увеличивать при клике(вкл. fancybox)","Grayscale logo":"Обесцветить лого","Show name company":"Название компании","Show branch company":"Направление компании","Show name step":"Название шага","Show description step":"Описание шага","Add placemark":"Добавить метку",center:"центр","Show text":"Показать текст",Name:"Название",Address:"Адрес",Color:"Цвет","Show policy":"Политика конфиденциальности","Show copyright":"Права","Show second text title":"Текст под заголовом","Show border":"Добавить рамку","Video size:":"Размер видео:","small<br>":"маленький<br>","medium<br>":"средний<br>","Show list":"Добавить список","Show name cell":"Название","Show description cell":"","Icons color:":"Цвет иконок:",black:"",grey:"серый",white:"","Digits color:":"Цвет цифр:","Background:":"Фон:","Countdown color:":"Цвет таймера:","Second title color:":"Цвет подзаголовка:","Show second name":"Подзаголовок","Show image border":"Рамка у картинки","Media file":"Медиа файл","example: www.youtube.com/embed/P55qVX3y134":"","Select file":"Выбрать файл","Countdown settings":"Настройки таймера","Exact date<br>":"Дата окончания<br>","Every month<br>":"Ежемесячно<br>","Every week<br>":"Еженедельно<br>","Every day<br>":"Ежедневно<br>",Monday:"Понедельник",Tuesday:"Вторник",Wednesday:"Среда",Thursday:"Четверг",Friday:"Пятница",Saturday:"Суббота",Sunday:"Воскресенье","Option 1\\nOption 2\\nOption 3":"Вариант 1\\nВариант 2\\nВариант 3","Remove confirmation":"Подтвердите удаление","Show icon around":"Линия вокруг иконки","Show image around":"Рамка у изображения","Show image shadow":"Добавить тень","Show shadow under image":"Тень под изображением","Image shape:":"Форма изображения:","Show noise":"Добавить шум к изображению","Show arrow":"Стрелочка к кнопке","left<br>":"слева<br>","center<br>":"по центру<br>",right:"справа","Show image title":"Название изображения","Show block with text":"Блок с текстом","Show image description":"Описание изображения","black<br>":"черный<br>","white<br>":"белый<br>","Numbers color:":"Цвет цифр:",Template:"Шаблон","Dark background":"Темный фон","Two column layout":"Шаблон в две колонки"}),{}}),define("app/lib/jquery.min.js",function(){var e,t,n={exports:!1};return e="undefined"!=typeof window?window:this,t=function(e,t){var n=[],i=n.slice,o=n.concat,s=n.push,r=n.indexOf,a={},l=a.toString,c=a.hasOwnProperty,d={},u=e.document,h="2.1.1",p=function(e,t){return new p.fn.init(e,t)},f=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,m=/^-ms-/,g=/-([\da-z])/gi,v=function(e,t){return t.toUpperCase()};function y(e){var t=e.length,n=p.type(e);return"function"!==n&&!p.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}p.fn=p.prototype={jquery:h,constructor:p,selector:"",length:0,toArray:function(){return i.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:i.call(this)},pushStack:function(e){var t=p.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return p.each(this,e,t)},map:function(e){return this.pushStack(p.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:s,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var e,t,n,i,o,s,r=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[a]||{},a++),"object"==typeof r||p.isFunction(r)||(r={}),a===l&&(r=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)n=r[t],r!==(i=e[t])&&(c&&i&&(p.isPlainObject(i)||(o=p.isArray(i)))?(o?(o=!1,s=n&&p.isArray(n)?n:[]):s=n&&p.isPlainObject(n)?n:{},r[t]=p.extend(c,s,i)):void 0!==i&&(r[t]=i));return r},p.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===p.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!p.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"===p.type(e)&&!e.nodeType&&!p.isWindow(e)&&!(e.constructor&&!c.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?a[l.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=p.trim(e))&&(1===e.indexOf("use strict")?((t=u.createElement("script")).text=e,u.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(m,"ms-").replace(g,v)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i=0,o=e.length,s=y(e);if(n){if(s)for(;o>i&&!1!==t.apply(e[i],n);i++);else for(i in e)if(!1===t.apply(e[i],n))break}else if(s)for(;o>i&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(f,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(y(Object(e))?p.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:r.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;n>i;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i=[],o=0,s=e.length,r=!n;s>o;o++)!t(e[o],o)!==r&&i.push(e[o]);return i},map:function(e,t,n){var i,s=0,r=e.length,a=[];if(y(e))for(;r>s;s++)null!=(i=t(e[s],s,n))&&a.push(i);else for(s in e)null!=(i=t(e[s],s,n))&&a.push(i);return o.apply([],a)},guid:1,proxy:function(e,t){var n,o,s;return"string"==typeof t&&(n=e[t],t=e,e=n),p.isFunction(e)?(o=i.call(arguments,2),(s=function(){return e.apply(t||this,o.concat(i.call(arguments)))}).guid=e.guid=e.guid||p.guid++,s):void 0},now:Date.now,support:d}),p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){a["[object "+t+"]"]=t.toLowerCase()});var b=function(e){var t,n,i,o,s,r,a,l,c,d,u,h,p,f,m,g,v,y,b,_="sizzle"+-new Date,x=e.document,w=0,k=0,C=se(),T=se(),S=se(),$=function(e,t){return e===t&&(u=!0),0},E="undefined",j=1<<31,H={}.hasOwnProperty,D=[],N=D.pop,L=D.push,O=D.push,M=D.slice,P=D.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",A="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I=F.replace("w","w#"),W="\\["+A+"*("+F+")(?:"+A+"*([*^$|!~]?=)"+A+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+A+"*\\]",R=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",q=new RegExp("^"+A+"+|((?:^|[^\\\\])(?:\\\\.)*)"+A+"+$","g"),B=new RegExp("^"+A+"*,"+A+"*"),V=new RegExp("^"+A+"*([>+~]|"+A+")"+A+"*"),Y=new RegExp("="+A+"*([^\\]'\"]*?)"+A+"*\\]","g"),U=new RegExp(R),G=new RegExp("^"+I+"$"),X={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+A+"*(even|odd|(([+-]|)(\\d*)n|)"+A+"*(?:([+-]|)"+A+"*(\\d+)|))"+A+"*\\)|)","i"),bool:new RegExp("^(?:"+z+")$","i"),needsContext:new RegExp("^"+A+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+A+"*((?:-\\d)?\\d*)"+A+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ne=new RegExp("\\\\([\\da-f]{1,6}"+A+"?|("+A+")|.)","ig"),ie=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{O.apply(D=M.call(x.childNodes),x.childNodes),D[x.childNodes.length].nodeType}catch(e){O={apply:D.length?function(e,t){L.apply(e,M.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function oe(e,t,i,o){var s,a,c,d,u,f,v,y,w,k;if((t?t.ownerDocument||t:x)!==p&&h(t),i=i||[],!e||"string"!=typeof e)return i;if(1!==(d=(t=t||p).nodeType)&&9!==d)return[];if(m&&!o){if(s=Z.exec(e))if(c=s[1]){if(9===d){if(!(a=t.getElementById(c))||!a.parentNode)return i;if(a.id===c)return i.push(a),i}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(c))&&b(t,a)&&a.id===c)return i.push(a),i}else{if(s[2])return O.apply(i,t.getElementsByTagName(e)),i;if((c=s[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(i,t.getElementsByClassName(c)),i}if(n.qsa&&(!g||!g.test(e))){if(y=v=_,w=t,k=9===d&&e,1===d&&"object"!==t.nodeName.toLowerCase()){for(f=r(e),(v=t.getAttribute("id"))?y=v.replace(te,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",u=f.length;u--;)f[u]=y+me(f[u]);w=ee.test(e)&&pe(t.parentNode)||t,k=f.join(",")}if(k)try{return O.apply(i,w.querySelectorAll(k)),i}catch(e){}finally{v||t.removeAttribute("id")}}}return l(e.replace(q,"$1"),t,i,o)}function se(){var e=[];return function t(n,o){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=o}}function re(e){return e[_]=!0,e}function ae(e){var t=p.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var n=e.split("|"),o=e.length;o--;)i.attrHandle[n[o]]=t}function ce(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ue(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return re(function(t){return t=+t,re(function(n,i){for(var o,s=e([],n.length,t),r=s.length;r--;)n[o=s[r]]&&(n[o]=!(i[o]=n[o]))})})}function pe(e){return e&&typeof e.getElementsByTagName!==E&&e}for(t in n=oe.support={},s=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=oe.setDocument=function(e){var t,o=e?e.ownerDocument||e:x,r=o.defaultView;return o!==p&&9===o.nodeType&&o.documentElement?(p=o,f=o.documentElement,m=!s(o),r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",function(){h()},!1):r.attachEvent&&r.attachEvent("onunload",function(){h()})),n.attributes=ae(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ae(function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=J.test(o.getElementsByClassName)&&ae(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),n.getById=ae(function(e){return f.appendChild(e).id=_,!o.getElementsByName||!o.getElementsByName(_).length}),n.getById?(i.find.ID=function(e,t){if(typeof t.getElementById!==E&&m){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(ne,ie);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace(ne,ie);return function(e){var n=typeof e.getAttributeNode!==E&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=n.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==E?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],o=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[o++];)1===n.nodeType&&i.push(n);return i}return s},i.find.CLASS=n.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==E&&m?t.getElementsByClassName(e):void 0},v=[],g=[],(n.qsa=J.test(o.querySelectorAll))&&(ae(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&g.push("[*^$]="+A+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+A+"*(?:value|"+z+")"),e.querySelectorAll(":checked").length||g.push(":checked")}),ae(function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+A+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=J.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ae(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),v.push("!=",R)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=J.test(f.compareDocumentPosition),b=t||J.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},$=t?function(e,t){if(e===t)return u=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===o||e.ownerDocument===x&&b(x,e)?-1:t===o||t.ownerDocument===x&&b(x,t)?1:d?P.call(d,e)-P.call(d,t):0:4&i?-1:1)}:function(e,t){if(e===t)return u=!0,0;var n,i=0,s=e.parentNode,r=t.parentNode,a=[e],l=[t];if(!s||!r)return e===o?-1:t===o?1:s?-1:r?1:d?P.call(d,e)-P.call(d,t):0;if(s===r)return ce(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;a[i]===l[i];)i++;return i?ce(a[i],l[i]):a[i]===x?-1:l[i]===x?1:0},o):p},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(Y,"='$1']"),!(!n.matchesSelector||!m||v&&v.test(t)||g&&g.test(t)))try{var i=y.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return oe(t,p,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var o=i.attrHandle[t.toLowerCase()],s=o&&H.call(i.attrHandle,t.toLowerCase())?o(e,t,!m):void 0;return void 0!==s?s:n.attributes||!m?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,i=[],o=0,s=0;if(u=!n.detectDuplicates,d=!n.sortStable&&e.slice(0),e.sort($),u){for(;t=e[s++];)t===e[s]&&(o=i.push(s));for(;o--;)e.splice(i[o],1)}return d=null,e},o=oe.getText=function(e){var t,n="",i=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[i++];)n+=o(t);return n},(i=oe.selectors={cacheLength:50,createPseudo:re,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&U.test(n)&&(t=r(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+A+")"+e+"("+A+"|$)"))&&C(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==E&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var o=oe.attr(i,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,o){var s="nth"!==e.slice(0,3),r="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,d,u,h,p,f,m=s!==r?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a;if(g){if(s){for(;m;){for(u=t;u=u[m];)if(a?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[r?g.firstChild:g.lastChild],r&&y){for(p=(c=(d=g[_]||(g[_]={}))[e]||[])[0]===w&&c[1],h=c[0]===w&&c[2],u=p&&g.childNodes[p];u=++p&&u&&u[m]||(h=p=0)||f.pop();)if(1===u.nodeType&&++h&&u===t){d[e]=[w,p,h];break}}else if(y&&(c=(t[_]||(t[_]={}))[e])&&c[0]===w)h=c[1];else for(;(u=++p&&u&&u[m]||(h=p=0)||f.pop())&&((a?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++h||(y&&((u[_]||(u[_]={}))[e]=[w,h]),u!==t)););return(h-=o)===i||h%i==0&&h/i>=0}}},PSEUDO:function(e,t){var n,o=i.pseudos[e]||i.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return o[_]?o(t):o.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?re(function(e,n){for(var i,s=o(e,t),r=s.length;r--;)e[i=P.call(e,s[r])]=!(n[i]=s[r])}):function(e){return o(e,0,n)}):o}},pseudos:{not:re(function(e){var t=[],n=[],i=a(e.replace(q,"$1"));return i[_]?re(function(e,t,n,o){for(var s,r=i(e,null,o,[]),a=e.length;a--;)(s=r[a])&&(e[a]=!(t[a]=s))}):function(e,o,s){return t[0]=e,i(t,null,s,n),!n.pop()}}),has:re(function(e){return function(t){return oe(e,t).length>0}}),contains:re(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:re(function(e){return G.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(ne,ie).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,n){return[0>n?n+t:n]}),even:he(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:he(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:he(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:he(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=ue(t);function fe(){}function me(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function ge(e,t,n){var i=t.dir,o=n&&"parentNode"===i,s=k++;return t.first?function(t,n,s){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,s)}:function(t,n,r){var a,l,c=[w,s];if(r){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,r))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if((a=(l=t[_]||(t[_]={}))[i])&&a[0]===w&&a[1]===s)return c[2]=a[2];if(l[i]=c,c[2]=e(t,n,r))return!0}}}function ve(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function ye(e,t,n,i,o){for(var s,r=[],a=0,l=e.length,c=null!=t;l>a;a++)(s=e[a])&&(!n||n(s,i,o))&&(r.push(s),c&&t.push(a));return r}function be(e,t,n,i,o,s){return i&&!i[_]&&(i=be(i)),o&&!o[_]&&(o=be(o,s)),re(function(s,r,a,l){var c,d,u,h=[],p=[],f=r.length,m=s||function(e,t,n){for(var i=0,o=t.length;o>i;i++)oe(e,t[i],n);return n}(t||"*",a.nodeType?[a]:a,[]),g=!e||!s&&t?m:ye(m,h,e,a,l),v=n?o||(s?e:f||i)?[]:r:g;if(n&&n(g,v,a,l),i)for(c=ye(v,p),i(c,[],a,l),d=c.length;d--;)(u=c[d])&&(v[p[d]]=!(g[p[d]]=u));if(s){if(o||e){if(o){for(c=[],d=v.length;d--;)(u=v[d])&&c.push(g[d]=u);o(null,v=[],c,l)}for(d=v.length;d--;)(u=v[d])&&(c=o?P.call(s,u):h[d])>-1&&(s[c]=!(r[c]=u))}}else v=ye(v===r?v.splice(f,v.length):v),o?o(null,r,v,l):O.apply(r,v)})}function _e(e){for(var t,n,o,s=e.length,r=i.relative[e[0].type],a=r||i.relative[" "],l=r?1:0,d=ge(function(e){return e===t},a,!0),u=ge(function(e){return P.call(t,e)>-1},a,!0),h=[function(e,n,i){return!r&&(i||n!==c)||((t=n).nodeType?d(e,n,i):u(e,n,i))}];s>l;l++)if(n=i.relative[e[l].type])h=[ge(ve(h),n)];else{if((n=i.filter[e[l].type].apply(null,e[l].matches))[_]){for(o=++l;s>o&&!i.relative[e[o].type];o++);return be(l>1&&ve(h),l>1&&me(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(q,"$1"),n,o>l&&_e(e.slice(l,o)),s>o&&_e(e=e.slice(o)),s>o&&me(e))}h.push(n)}return ve(h)}function xe(e,t){var n=t.length>0,o=e.length>0,s=function(s,r,a,l,d){var u,h,f,m=0,g="0",v=s&&[],y=[],b=c,_=s||o&&i.find.TAG("*",d),x=w+=null==b?1:Math.random()||.1,k=_.length;for(d&&(c=r!==p&&r);g!==k&&null!=(u=_[g]);g++){if(o&&u){for(h=0;f=e[h++];)if(f(u,r,a)){l.push(u);break}d&&(w=x)}n&&((u=!f&&u)&&m--,s&&v.push(u))}if(m+=g,n&&g!==m){for(h=0;f=t[h++];)f(v,y,r,a);if(s){if(m>0)for(;g--;)v[g]||y[g]||(y[g]=N.call(l));y=ye(y)}O.apply(l,y),d&&!s&&y.length>0&&m+t.length>1&&oe.uniqueSort(l)}return d&&(w=x,c=b),v};return n?re(s):s}return fe.prototype=i.filters=i.pseudos,i.setFilters=new fe,r=oe.tokenize=function(e,t){var n,o,s,r,a,l,c,d=T[e+" "];if(d)return t?0:d.slice(0);for(a=e,l=[],c=i.preFilter;a;){for(r in(!n||(o=B.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(s=[])),n=!1,(o=V.exec(a))&&(n=o.shift(),s.push({value:n,type:o[0].replace(q," ")}),a=a.slice(n.length)),i.filter)!(o=X[r].exec(a))||c[r]&&!(o=c[r](o))||(n=o.shift(),s.push({value:n,type:r,matches:o}),a=a.slice(n.length));if(!n)break}return t?a.length:a?oe.error(e):T(e,l).slice(0)},a=oe.compile=function(e,t){var n,i=[],o=[],s=S[e+" "];if(!s){for(t||(t=r(e)),n=t.length;n--;)(s=_e(t[n]))[_]?i.push(s):o.push(s);(s=S(e,xe(o,i))).selector=e}return s},l=oe.select=function(e,t,o,s){var l,c,d,u,h,p="function"==typeof e&&e,f=!s&&r(e=p.selector||e);if(o=o||[],1===f.length){if((c=f[0]=f[0].slice(0)).length>2&&"ID"===(d=c[0]).type&&n.getById&&9===t.nodeType&&m&&i.relative[c[1].type]){if(!(t=(i.find.ID(d.matches[0].replace(ne,ie),t)||[])[0]))return o;p&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(l=X.needsContext.test(e)?0:c.length;l--&&(d=c[l],!i.relative[u=d.type]);)if((h=i.find[u])&&(s=h(d.matches[0].replace(ne,ie),ee.test(c[0].type)&&pe(t.parentNode)||t))){if(c.splice(l,1),!(e=s.length&&me(c)))return O.apply(o,s),o;break}}return(p||a(e,f))(s,t,!m,o,ee.test(e)&&pe(t.parentNode)||t),o},n.sortStable=_.split("").sort($).join("")===_,n.detectDuplicates=!!u,h(),n.sortDetached=ae(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),ae(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ae(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),ae(function(e){return null==e.getAttribute("disabled")})||le(z,function(e,t,n){var i;return n?void 0:!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),oe}(e);p.find=b,p.expr=b.selectors,p.expr[":"]=p.expr.pseudos,p.unique=b.uniqueSort,p.text=b.getText,p.isXMLDoc=b.isXML,p.contains=b.contains;var _=p.expr.match.needsContext,x=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function k(e,t,n){if(p.isFunction(t))return p.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return p.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(w.test(t))return p.filter(t,e,n);t=p.filter(t,e)}return p.grep(e,function(e){return r.call(t,e)>=0!==n})}p.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?p.find.matchesSelector(i,e)?[i]:[]:p.find.matches(e,p.grep(t,function(e){return 1===e.nodeType}))},p.fn.extend({find:function(e){var t,n=this.length,i=[],o=this;if("string"!=typeof e)return this.pushStack(p(e).filter(function(){for(t=0;n>t;t++)if(p.contains(o[t],this))return!0}));for(t=0;n>t;t++)p.find(e,o[t],i);return(i=this.pushStack(n>1?p.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(k(this,e||[],!1))},not:function(e){return this.pushStack(k(this,e||[],!0))},is:function(e){return!!k(this,"string"==typeof e&&_.test(e)?p(e):e||[],!1).length}});var C,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(p.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:T.exec(e))||!n[1]&&t)return!t||t.jquery?(t||C).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof p?t[0]:t,p.merge(this,p.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:u,!0)),x.test(n[1])&&p.isPlainObject(t))for(n in t)p.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(i=u.getElementById(n[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=u,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):p.isFunction(e)?void 0!==C.ready?C.ready(e):e(p):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),p.makeArray(e,this))}).prototype=p.fn,C=p(u);var S=/^(?:parents|prev(?:Until|All))/,$={children:!0,contents:!0,next:!0,prev:!0};function E(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}p.extend({dir:function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&p(e).is(n))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),p.fn.extend({has:function(e){var t=p(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(p.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,o=this.length,s=[],r=_.test(e)||"string"!=typeof e?p(e,t||this.context):0;o>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(r?r.index(n)>-1:1===n.nodeType&&p.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?p.unique(s):s)},index:function(e){return e?"string"==typeof e?r.call(p(e),this[0]):r.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(p.unique(p.merge(this.get(),p(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),p.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return p.dir(e,"parentNode")},parentsUntil:function(e,t,n){return p.dir(e,"parentNode",n)},next:function(e){return E(e,"nextSibling")},prev:function(e){return E(e,"previousSibling")},nextAll:function(e){return p.dir(e,"nextSibling")},prevAll:function(e){return p.dir(e,"previousSibling")},nextUntil:function(e,t,n){return p.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return p.dir(e,"previousSibling",n)},siblings:function(e){return p.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return p.sibling(e.firstChild)},contents:function(e){return e.contentDocument||p.merge([],e.childNodes)}},function(e,t){p.fn[e]=function(n,i){var o=p.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=p.filter(i,o)),this.length>1&&($[e]||p.unique(o),S.test(e)&&o.reverse()),this.pushStack(o)}});var j,H=/\S+/g,D={};function N(){u.removeEventListener("DOMContentLoaded",N,!1),e.removeEventListener("load",N,!1),p.ready()}p.Callbacks=function(e){e="string"==typeof e?D[e]||function(e){var t=D[e]={};return p.each(e.match(H)||[],function(e,n){t[n]=!0}),t}(e):p.extend({},e);var t,n,i,o,s,r,a=[],l=!e.once&&[],c=function(u){for(t=e.memory&&u,n=!0,r=o||0,o=0,s=a.length,i=!0;a&&s>r;r++)if(!1===a[r].apply(u[0],u[1])&&e.stopOnFalse){t=!1;break}i=!1,a&&(l?l.length&&c(l.shift()):t?a=[]:d.disable())},d={add:function(){if(a){var n=a.length;!function t(n){p.each(n,function(n,i){var o=p.type(i);"function"===o?e.unique&&d.has(i)||a.push(i):i&&i.length&&"string"!==o&&t(i)})}(arguments),i?s=a.length:t&&(o=n,c(t))}return this},remove:function(){return a&&p.each(arguments,function(e,t){for(var n;(n=p.inArray(t,a,n))>-1;)a.splice(n,1),i&&(s>=n&&s--,r>=n&&r--)}),this},has:function(e){return e?p.inArray(e,a)>-1:!(!a||!a.length)},empty:function(){return a=[],s=0,this},disable:function(){return a=l=t=void 0,this},disabled:function(){return!a},lock:function(){return l=void 0,t||d.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!a||n&&!l||(t=[e,(t=t||[]).slice?t.slice():t],i?l.push(t):c(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},p.extend({Deferred:function(e){var t=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return p.Deferred(function(n){p.each(t,function(t,s){var r=p.isFunction(e[t])&&e[t];o[s[1]](function(){var e=r&&r.apply(this,arguments);e&&p.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===i?n.promise():this,r?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?p.extend(e,i):i}},o={};return i.pipe=i.then,p.each(t,function(e,s){var r=s[2],a=s[3];i[s[1]]=r.add,a&&r.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),o[s[0]]=function(){return o[s[0]+"With"](this===o?i:this,arguments),this},o[s[0]+"With"]=r.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,o,s=0,r=i.call(arguments),a=r.length,l=1!==a||e&&p.isFunction(e.promise)?a:0,c=1===l?e:p.Deferred(),d=function(e,n,o){return function(s){n[e]=this,o[e]=arguments.length>1?i.call(arguments):s,o===t?c.notifyWith(n,o):--l||c.resolveWith(n,o)}};if(a>1)for(t=new Array(a),n=new Array(a),o=new Array(a);a>s;s++)r[s]&&p.isFunction(r[s].promise)?r[s].promise().done(d(s,o,r)).fail(c.reject).progress(d(s,n,t)):--l;return l||c.resolveWith(o,r),c.promise()}}),p.fn.ready=function(e){return p.ready.promise().done(e),this},p.extend({isReady:!1,readyWait:1,holdReady:function(e){e?p.readyWait++:p.ready(!0)},ready:function(e){(!0===e?--p.readyWait:p.isReady)||(p.isReady=!0,!0!==e&&--p.readyWait>0||(j.resolveWith(u,[p]),p.fn.triggerHandler&&(p(u).triggerHandler("ready"),p(u).off("ready"))))}}),p.ready.promise=function(t){return j||(j=p.Deferred(),"complete"===u.readyState?setTimeout(p.ready):(u.addEventListener("DOMContentLoaded",N,!1),e.addEventListener("load",N,!1))),j.promise(t)},p.ready.promise();var L=p.access=function(e,t,n,i,o,s,r){var a=0,l=e.length,c=null==n;if("object"===p.type(n))for(a in o=!0,n)p.access(e,t,a,n[a],!0,s,r);else if(void 0!==i&&(o=!0,p.isFunction(i)||(r=!0),c&&(r?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(p(e),n)})),t))for(;l>a;a++)t(e[a],n,r?i:i.call(e[a],a,t(e[a],n)));return o?e:c?t.call(e):l?t(e[0],n):s};function O(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=p.expando+Math.random()}p.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},O.uid=1,O.accepts=p.acceptData,O.prototype={key:function(e){if(!O.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=O.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,p.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,o=this.key(e),s=this.cache[o];if("string"==typeof t)s[t]=n;else if(p.isEmptyObject(s))p.extend(this.cache[o],t);else for(i in t)s[i]=t[i];return s},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(i=this.get(e,t))?i:this.get(e,p.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,o,s=this.key(e),r=this.cache[s];if(void 0===t)this.cache[s]={};else{p.isArray(t)?i=t.concat(t.map(p.camelCase)):(o=p.camelCase(t),t in r?i=[t,o]:i=(i=o)in r?[i]:i.match(H)||[]),n=i.length;for(;n--;)delete r[i[n]]}},hasData:function(e){return!p.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var M=new O,P=new O,z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,A=/([A-Z])/g;function F(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(A,"-$1").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:z.test(n)?p.parseJSON(n):n)}catch(e){}P.set(e,t,n)}else n=void 0;return n}p.extend({hasData:function(e){return P.hasData(e)||M.hasData(e)},data:function(e,t,n){return P.access(e,t,n)},removeData:function(e,t){P.remove(e,t)},_data:function(e,t,n){return M.access(e,t,n)},_removeData:function(e,t){M.remove(e,t)}}),p.fn.extend({data:function(e,t){var n,i,o,s=this[0],r=s&&s.attributes;if(void 0===e){if(this.length&&(o=P.get(s),1===s.nodeType&&!M.get(s,"hasDataAttrs"))){for(n=r.length;n--;)r[n]&&(0===(i=r[n].name).indexOf("data-")&&(i=p.camelCase(i.slice(5)),F(s,i,o[i])));M.set(s,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){P.set(this,e)}):L(this,function(t){var n,i=p.camelCase(e);if(s&&void 0===t){if(void 0!==(n=P.get(s,e)))return n;if(void 0!==(n=P.get(s,i)))return n;if(void 0!==(n=F(s,i,void 0)))return n}else this.each(function(){var n=P.get(this,i);P.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&P.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){P.remove(this,e)})}}),p.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=M.get(e,t),n&&(!i||p.isArray(n)?i=M.access(e,t,p.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=p.queue(e,t),i=n.length,o=n.shift(),s=p._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete s.stop,o.call(e,function(){p.dequeue(e,t)},s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return M.get(e,n)||M.access(e,n,{empty:p.Callbacks("once memory").add(function(){M.remove(e,[t+"queue",n])})})}}),p.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?p.queue(this[0],e):void 0===t?this:this.each(function(){var n=p.queue(this,e,t);p._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&p.dequeue(this,e)})},dequeue:function(e){return this.each(function(){p.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=p.Deferred(),s=this,r=this.length,a=function(){--i||o.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)(n=M.get(s[r],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(t)}});var I=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,W=["Top","Right","Bottom","Left"],R=function(e,t){return e=t||e,"none"===p.css(e,"display")||!p.contains(e.ownerDocument,e)},q=/^(?:checkbox|radio)$/i;!function(){var e=u.createDocumentFragment().appendChild(u.createElement("div")),t=u.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),d.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var B="undefined";d.focusinBubbles="onfocusin"in e;var V=/^key/,Y=/^(?:mouse|pointer|contextmenu)|click/,U=/^(?:focusinfocus|focusoutblur)$/,G=/^([^.]*)(?:\.(.+)|)$/;function X(){return!0}function K(){return!1}function Q(){try{return u.activeElement}catch(e){}}p.event={global:{},add:function(e,t,n,i,o){var s,r,a,l,c,d,u,h,f,m,g,v=M.get(e);if(v)for(n.handler&&(n=(s=n).handler,o=s.selector),n.guid||(n.guid=p.guid++),(l=v.events)||(l=v.events={}),(r=v.handle)||(r=v.handle=function(t){return typeof p!==B&&p.event.triggered!==t.type?p.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(H)||[""]).length;c--;)f=g=(a=G.exec(t[c])||[])[1],m=(a[2]||"").split(".").sort(),f&&(u=p.event.special[f]||{},f=(o?u.delegateType:u.bindType)||f,u=p.event.special[f]||{},d=p.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&p.expr.match.needsContext.test(o),namespace:m.join(".")},s),(h=l[f])||((h=l[f]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,i,m,r)||e.addEventListener&&e.addEventListener(f,r,!1)),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,d):h.push(d),p.event.global[f]=!0)},remove:function(e,t,n,i,o){var s,r,a,l,c,d,u,h,f,m,g,v=M.hasData(e)&&M.get(e);if(v&&(l=v.events)){for(c=(t=(t||"").match(H)||[""]).length;c--;)if(f=g=(a=G.exec(t[c])||[])[1],m=(a[2]||"").split(".").sort(),f){for(u=p.event.special[f]||{},h=l[f=(i?u.delegateType:u.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=s=h.length;s--;)d=h[s],!o&&g!==d.origType||n&&n.guid!==d.guid||a&&!a.test(d.namespace)||i&&i!==d.selector&&("**"!==i||!d.selector)||(h.splice(s,1),d.selector&&h.delegateCount--,u.remove&&u.remove.call(e,d));r&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,m,v.handle)||p.removeEvent(e,f,v.handle),delete l[f])}else for(f in l)p.event.remove(e,f+t[c],n,i,!0);p.isEmptyObject(l)&&(delete v.handle,M.remove(e,"events"))}},trigger:function(t,n,i,o){var s,r,a,l,d,h,f,m=[i||u],g=c.call(t,"type")?t.type:t,v=c.call(t,"namespace")?t.namespace.split("."):[];if(r=a=i=i||u,3!==i.nodeType&&8!==i.nodeType&&!U.test(g+p.event.triggered)&&(g.indexOf(".")>=0&&(v=g.split("."),g=v.shift(),v.sort()),d=g.indexOf(":")<0&&"on"+g,(t=t[p.expando]?t:new p.Event(g,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=v.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:p.makeArray(n,[t]),f=p.event.special[g]||{},o||!f.trigger||!1!==f.trigger.apply(i,n))){if(!o&&!f.noBubble&&!p.isWindow(i)){for(l=f.delegateType||g,U.test(l+g)||(r=r.parentNode);r;r=r.parentNode)m.push(r),a=r;a===(i.ownerDocument||u)&&m.push(a.defaultView||a.parentWindow||e)}for(s=0;(r=m[s++])&&!t.isPropagationStopped();)t.type=s>1?l:f.bindType||g,(h=(M.get(r,"events")||{})[t.type]&&M.get(r,"handle"))&&h.apply(r,n),(h=d&&r[d])&&h.apply&&p.acceptData(r)&&(t.result=h.apply(r,n),!1===t.result&&t.preventDefault());return t.type=g,o||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(m.pop(),n)||!p.acceptData(i)||d&&p.isFunction(i[g])&&!p.isWindow(i)&&((a=i[d])&&(i[d]=null),p.event.triggered=g,i[g](),p.event.triggered=void 0,a&&(i[d]=a)),t.result}},dispatch:function(e){e=p.event.fix(e);var t,n,o,s,r,a=[],l=i.call(arguments),c=(M.get(this,"events")||{})[e.type]||[],d=p.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,e)){for(a=p.event.handlers.call(this,e,c),t=0;(s=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=s.elem,n=0;(r=s.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,void 0!==(o=((p.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,l))&&!1===(e.result=o)&&(e.preventDefault(),e.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,o,s,r=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==e.type){for(i=[],n=0;a>n;n++)void 0===i[o=(s=t[n]).selector+" "]&&(i[o]=s.needsContext?p(o,this).index(l)>=0:p.find(o,this,null,[l]).length),i[o]&&i.push(s);i.length&&r.push({elem:l,handlers:i})}return a<t.length&&r.push({elem:this,handlers:t.slice(a)}),r},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,o,s=t.button;return null==e.pageX&&null!=t.clientX&&(i=(n=e.target.ownerDocument||u).documentElement,o=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[p.expando])return e;var t,n,i,o=e.type,s=e,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=Y.test(o)?this.mouseHooks:V.test(o)?this.keyHooks:{}),i=r.props?this.props.concat(r.props):this.props,e=new p.Event(s),t=i.length;t--;)e[n=i[t]]=s[n];return e.target||(e.target=u),3===e.target.nodeType&&(e.target=e.target.parentNode),r.filter?r.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==Q()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===Q()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&p.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return p.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var o=p.extend(new p.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?p.event.trigger(o,null,t):p.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},p.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},p.Event=function(e,t){return this instanceof p.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?X:K):this.type=e,t&&p.extend(this,t),this.timeStamp=e&&e.timeStamp||p.now(),void(this[p.expando]=!0)):new p.Event(e,t)},p.Event.prototype={isDefaultPrevented:K,isPropagationStopped:K,isImmediatePropagationStopped:K,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=X,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=X,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=X,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){p.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,o=e.handleObj;return(!i||i!==this&&!p.contains(this,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),d.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){p.event.simulate(t,e.target,p.event.fix(e),!0)};p.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=M.access(i,t);o||i.addEventListener(e,n,!0),M.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=M.access(i,t)-1;o?M.access(i,t,o):(i.removeEventListener(e,n,!0),M.remove(i,t))}}}),p.fn.extend({on:function(e,t,n,i,o){var s,r;if("object"==typeof e){for(r in"string"!=typeof t&&(n=n||t,t=void 0),e)this.on(r,t,n,e[r],o);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),!1===i)i=K;else if(!i)return this;return 1===o&&(s=i,(i=function(e){return p().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=p.guid++)),this.each(function(){p.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,p(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(!1===t||"function"==typeof t)&&(n=t,t=void 0),!1===n&&(n=K),this.each(function(){p.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){p.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?p.event.trigger(e,t,n,!0):void 0}});var J=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Z=/<([\w:]+)/,ee=/<|&#?\w+;/,te=/<(?:script|style|link)/i,ne=/checked\s*(?:[^=]|=\s*.checked.)/i,ie=/^$|\/(?:java|ecma)script/i,oe=/^true\/(.*)/,se=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,re={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ae(e,t){return p.nodeName(e,"table")&&p.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ce(e){var t=oe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function de(e,t){for(var n=0,i=e.length;i>n;n++)M.set(e[n],"globalEval",!t||M.get(t[n],"globalEval"))}function ue(e,t){var n,i,o,s,r,a,l,c;if(1===t.nodeType){if(M.hasData(e)&&(s=M.access(e),r=M.set(t,s),c=s.events))for(o in delete r.handle,r.events={},c)for(n=0,i=c[o].length;i>n;n++)p.event.add(t,o,c[o][n]);P.hasData(e)&&(a=P.access(e),l=p.extend({},a),P.set(t,l))}}function he(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&p.nodeName(e,t)?p.merge([e],n):n}function pe(e,t){var n=t.nodeName.toLowerCase();"input"===n&&q.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}re.optgroup=re.option,re.tbody=re.tfoot=re.colgroup=re.caption=re.thead,re.th=re.td,p.extend({clone:function(e,t,n){var i,o,s,r,a=e.cloneNode(!0),l=p.contains(e.ownerDocument,e);if(!(d.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||p.isXMLDoc(e)))for(r=he(a),i=0,o=(s=he(e)).length;o>i;i++)pe(s[i],r[i]);if(t)if(n)for(s=s||he(e),r=r||he(a),i=0,o=s.length;o>i;i++)ue(s[i],r[i]);else ue(e,a);return(r=he(a,"script")).length>0&&de(r,!l&&he(e,"script")),a},buildFragment:function(e,t,n,i){for(var o,s,r,a,l,c,d=t.createDocumentFragment(),u=[],h=0,f=e.length;f>h;h++)if((o=e[h])||0===o)if("object"===p.type(o))p.merge(u,o.nodeType?[o]:o);else if(ee.test(o)){for(s=s||d.appendChild(t.createElement("div")),r=(Z.exec(o)||["",""])[1].toLowerCase(),a=re[r]||re._default,s.innerHTML=a[1]+o.replace(J,"<$1></$2>")+a[2],c=a[0];c--;)s=s.lastChild;p.merge(u,s.childNodes),(s=d.firstChild).textContent=""}else u.push(t.createTextNode(o));for(d.textContent="",h=0;o=u[h++];)if((!i||-1===p.inArray(o,i))&&(l=p.contains(o.ownerDocument,o),s=he(d.appendChild(o),"script"),l&&de(s),n))for(c=0;o=s[c++];)ie.test(o.type||"")&&n.push(o);return d},cleanData:function(e){for(var t,n,i,o,s=p.event.special,r=0;void 0!==(n=e[r]);r++){if(p.acceptData(n)&&((o=n[M.expando])&&(t=M.cache[o]))){if(t.events)for(i in t.events)s[i]?p.event.remove(n,i):p.removeEvent(n,i,t.handle);M.cache[o]&&delete M.cache[o]}delete P.cache[n[P.expando]]}}}),p.fn.extend({text:function(e){return L(this,function(e){return void 0===e?p.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ae(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ae(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?p.filter(e,this):this,o=0;null!=(n=i[o]);o++)t||1!==n.nodeType||p.cleanData(he(n)),n.parentNode&&(t&&p.contains(n.ownerDocument,n)&&de(he(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(p.cleanData(he(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return p.clone(this,e,t)})},html:function(e){return L(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!te.test(e)&&!re[(Z.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(J,"<$1></$2>");try{for(;i>n;n++)1===(t=this[n]||{}).nodeType&&(p.cleanData(he(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,p.cleanData(he(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=o.apply([],e);var n,i,s,r,a,l,c=0,u=this.length,h=this,f=u-1,m=e[0],g=p.isFunction(m);if(g||u>1&&"string"==typeof m&&!d.checkClone&&ne.test(m))return this.each(function(n){var i=h.eq(n);g&&(e[0]=m.call(this,n,i.html())),i.domManip(e,t)});if(u&&(i=(n=p.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===n.childNodes.length&&(n=i),i)){for(r=(s=p.map(he(n,"script"),le)).length;u>c;c++)a=n,c!==f&&(a=p.clone(a,!0,!0),r&&p.merge(s,he(a,"script"))),t.call(this[c],a,c);if(r)for(l=s[s.length-1].ownerDocument,p.map(s,ce),c=0;r>c;c++)a=s[c],ie.test(a.type||"")&&!M.access(a,"globalEval")&&p.contains(l,a)&&(a.src?p._evalUrl&&p._evalUrl(a.src):p.globalEval(a.textContent.replace(se,"")))}return this}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){p.fn[e]=function(e){for(var n,i=[],o=p(e),r=o.length-1,a=0;r>=a;a++)n=a===r?this:this.clone(!0),p(o[a])[t](n),s.apply(i,n.get());return this.pushStack(i)}});var fe,me={};function ge(t,n){var i,o=p(n.createElement(t)).appendTo(n.body),s=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(o[0]))?i.display:p.css(o[0],"display");return o.detach(),s}function ve(e){var t=u,n=me[e];return n||("none"!==(n=ge(e,t))&&n||((t=(fe=(fe||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=ge(e,t),fe.detach()),me[e]=n),n}var ye=/^margin/,be=new RegExp("^("+I+")(?!px)[a-z%]+$","i"),_e=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};function xe(e,t,n){var i,o,s,r,a=e.style;return(n=n||_e(e))&&(r=n.getPropertyValue(t)||n[t]),n&&(""!==r||p.contains(e.ownerDocument,e)||(r=p.style(e,t)),be.test(r)&&ye.test(t)&&(i=a.width,o=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=n.width,a.width=i,a.minWidth=o,a.maxWidth=s)),void 0!==r?r+"":r}function we(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){var t,n,i=u.documentElement,o=u.createElement("div"),s=u.createElement("div");if(s.style){function r(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",i.appendChild(o);var r=e.getComputedStyle(s,null);t="1%"!==r.top,n="4px"===r.width,i.removeChild(o)}s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),e.getComputedStyle&&p.extend(d,{pixelPosition:function(){return r(),t},boxSizingReliable:function(){return null==n&&r(),n},reliableMarginRight:function(){var t,n=s.appendChild(u.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",i.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),i.removeChild(o),t}})}}(),p.swap=function(e,t,n,i){var o,s,r={};for(s in t)r[s]=e.style[s],e.style[s]=t[s];for(s in o=n.apply(e,i||[]),t)e.style[s]=r[s];return o};var ke=/^(none|table(?!-c[ea]).+)/,Ce=new RegExp("^("+I+")(.*)$","i"),Te=new RegExp("^([+-])=("+I+")","i"),Se={position:"absolute",visibility:"hidden",display:"block"},$e={letterSpacing:"0",fontWeight:"400"},Ee=["Webkit","O","Moz","ms"];function je(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),i=t,o=Ee.length;o--;)if((t=Ee[o]+n)in e)return t;return i}function He(e,t,n){var i=Ce.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function De(e,t,n,i,o){for(var s=n===(i?"border":"content")?4:"width"===t?1:0,r=0;4>s;s+=2)"margin"===n&&(r+=p.css(e,n+W[s],!0,o)),i?("content"===n&&(r-=p.css(e,"padding"+W[s],!0,o)),"margin"!==n&&(r-=p.css(e,"border"+W[s]+"Width",!0,o))):(r+=p.css(e,"padding"+W[s],!0,o),"padding"!==n&&(r+=p.css(e,"border"+W[s]+"Width",!0,o)));return r}function Ne(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,s=_e(e),r="border-box"===p.css(e,"boxSizing",!1,s);if(0>=o||null==o){if((0>(o=xe(e,t,s))||null==o)&&(o=e.style[t]),be.test(o))return o;i=r&&(d.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+De(e,t,n||(r?"border":"content"),i,s)+"px"}function Le(e,t){for(var n,i,o,s=[],r=0,a=e.length;a>r;r++)(i=e[r]).style&&(s[r]=M.get(i,"olddisplay"),n=i.style.display,t?(s[r]||"none"!==n||(i.style.display=""),""===i.style.display&&R(i)&&(s[r]=M.access(i,"olddisplay",ve(i.nodeName)))):(o=R(i),"none"===n&&o||M.set(i,"olddisplay",o?n:p.css(i,"display"))));for(r=0;a>r;r++)(i=e[r]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?s[r]||"":"none"));return e}function Oe(e,t,n,i,o){return new Oe.prototype.init(e,t,n,i,o)}p.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=xe(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,s,r,a=p.camelCase(t),l=e.style;return t=p.cssProps[a]||(p.cssProps[a]=je(l,a)),r=p.cssHooks[t]||p.cssHooks[a],void 0===n?r&&"get"in r&&void 0!==(o=r.get(e,!1,i))?o:l[t]:("string"===(s=typeof n)&&(o=Te.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(p.css(e,t)),s="number"),void(null!=n&&n==n&&("number"!==s||p.cssNumber[a]||(n+="px"),d.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),r&&"set"in r&&void 0===(n=r.set(e,n,i))||(l[t]=n))))}},css:function(e,t,n,i){var o,s,r,a=p.camelCase(t);return t=p.cssProps[a]||(p.cssProps[a]=je(e.style,a)),(r=p.cssHooks[t]||p.cssHooks[a])&&"get"in r&&(o=r.get(e,!0,n)),void 0===o&&(o=xe(e,t,i)),"normal"===o&&t in $e&&(o=$e[t]),""===n||n?(s=parseFloat(o),!0===n||p.isNumeric(s)?s||0:o):o}}),p.each(["height","width"],function(e,t){p.cssHooks[t]={get:function(e,n,i){return n?ke.test(p.css(e,"display"))&&0===e.offsetWidth?p.swap(e,Se,function(){return Ne(e,t,i)}):Ne(e,t,i):void 0},set:function(e,n,i){var o=i&&_e(e);return He(0,n,i?De(e,t,i,"border-box"===p.css(e,"boxSizing",!1,o),o):0)}}}),p.cssHooks.marginRight=we(d.reliableMarginRight,function(e,t){return t?p.swap(e,{display:"inline-block"},xe,[e,"marginRight"]):void 0}),p.each({margin:"",padding:"",border:"Width"},function(e,t){p.cssHooks[e+t]={expand:function(n){for(var i=0,o={},s="string"==typeof n?n.split(" "):[n];4>i;i++)o[e+W[i]+t]=s[i]||s[i-2]||s[0];return o}},ye.test(e)||(p.cssHooks[e+t].set=He)}),p.fn.extend({css:function(e,t){return L(this,function(e,t,n){var i,o,s={},r=0;if(p.isArray(t)){for(i=_e(e),o=t.length;o>r;r++)s[t[r]]=p.css(e,t[r],!1,i);return s}return void 0!==n?p.style(e,t,n):p.css(e,t)},e,t,arguments.length>1)},show:function(){return Le(this,!0)},hide:function(){return Le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){R(this)?p(this).show():p(this).hide()})}}),p.Tween=Oe,Oe.prototype={constructor:Oe,init:function(e,t,n,i,o,s){this.elem=e,this.prop=n,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(p.cssNumber[n]?"":"px")},cur:function(){var e=Oe.propHooks[this.prop];return e&&e.get?e.get(this):Oe.propHooks._default.get(this)},run:function(e){var t,n=Oe.propHooks[this.prop];return this.pos=t=this.options.duration?p.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Oe.propHooks._default.set(this),this}},Oe.prototype.init.prototype=Oe.prototype,Oe.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=p.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){p.fx.step[e.prop]?p.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[p.cssProps[e.prop]]||p.cssHooks[e.prop])?p.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Oe.propHooks.scrollTop=Oe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},p.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},p.fx=Oe.prototype.init,p.fx.step={};var Me,Pe,ze=/^(?:toggle|show|hide)$/,Ae=new RegExp("^(?:([+-])=|)("+I+")([a-z%]*)$","i"),Fe=/queueHooks$/,Ie=[function(e,t,n){var i,o,s,r,a,l,c,d=this,u={},h=e.style,f=e.nodeType&&R(e),m=M.get(e,"fxshow");for(i in n.queue||(null==(a=p._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,p.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],c=p.css(e,"display"),"inline"===("none"===c?M.get(e,"olddisplay")||ve(e.nodeName):c)&&"none"===p.css(e,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",d.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),t)if(o=t[i],ze.exec(o)){if(delete t[i],s=s||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!m||void 0===m[i])continue;f=!0}u[i]=m&&m[i]||p.style(e,i)}else c=void 0;if(p.isEmptyObject(u))"inline"===("none"===c?ve(e.nodeName):c)&&(h.display=c);else for(i in m?"hidden"in m&&(f=m.hidden):m=M.access(e,"fxshow",{}),s&&(m.hidden=!f),f?p(e).show():d.done(function(){p(e).hide()}),d.done(function(){var t;for(t in M.remove(e,"fxshow"),u)p.style(e,t,u[t])}),u)r=Be(f?m[i]:0,i,d),i in m||(m[i]=r.start,f&&(r.end=r.start,r.start="width"===i||"height"===i?1:0))}],We={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),o=Ae.exec(t),s=o&&o[3]||(p.cssNumber[e]?"":"px"),r=(p.cssNumber[e]||"px"!==s&&+i)&&Ae.exec(p.css(n.elem,e)),a=1,l=20;if(r&&r[3]!==s){s=s||r[3],o=o||[],r=+i||1;do{r/=a=a||".5",p.style(n.elem,e,r+s)}while(a!==(a=n.cur()/i)&&1!==a&&--l)}return o&&(r=n.start=+r||+i||0,n.unit=s,n.end=o[1]?r+(o[1]+1)*o[2]:+o[2]),n}]};function Re(){return setTimeout(function(){Me=void 0}),Me=p.now()}function qe(e,t){var n,i=0,o={height:e};for(t=t?1:0;4>i;i+=2-t)o["margin"+(n=W[i])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function Be(e,t,n){for(var i,o=(We[t]||[]).concat(We["*"]),s=0,r=o.length;r>s;s++)if(i=o[s].call(n,t,e))return i}function Ve(e,t,n){var i,o,s=0,r=Ie.length,a=p.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=Me||Re(),n=Math.max(0,c.startTime+c.duration-t),i=1-(n/c.duration||0),s=0,r=c.tweens.length;r>s;s++)c.tweens[s].run(i);return a.notifyWith(e,[c,i,n]),1>i&&r?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:p.extend({},t),opts:p.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Me||Re(),duration:n.duration,tweens:[],createTween:function(t,n){var i=p.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)c.tweens[n].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),d=c.props;for(function(e,t){var n,i,o,s,r;for(n in e)if(o=t[i=p.camelCase(n)],s=e[n],p.isArray(s)&&(o=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),(r=p.cssHooks[i])&&"expand"in r)for(n in s=r.expand(s),delete e[i],s)n in e||(e[n]=s[n],t[n]=o);else t[i]=o}(d,c.opts.specialEasing);r>s;s++)if(i=Ie[s].call(c,e,d,c.opts))return i;return p.map(d,Be,c),p.isFunction(c.opts.start)&&c.opts.start.call(e,c),p.fx.timer(p.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}p.Animation=p.extend(Ve,{tweener:function(e,t){p.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,o=e.length;o>i;i++)n=e[i],We[n]=We[n]||[],We[n].unshift(t)},prefilter:function(e,t){t?Ie.unshift(e):Ie.push(e)}}),p.speed=function(e,t,n){var i=e&&"object"==typeof e?p.extend({},e):{complete:n||!n&&t||p.isFunction(e)&&e,duration:e,easing:n&&t||t&&!p.isFunction(t)&&t};return i.duration=p.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in p.fx.speeds?p.fx.speeds[i.duration]:p.fx.speeds._default,(null==i.queue||!0===i.queue)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){p.isFunction(i.old)&&i.old.call(this),i.queue&&p.dequeue(this,i.queue)},i},p.fn.extend({fadeTo:function(e,t,n,i){return this.filter(R).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=p.isEmptyObject(e),s=p.speed(t,n,i),r=function(){var t=Ve(this,p.extend({},e),s);(o||M.get(this,"finish"))&&t.stop(!0)};return r.finish=r,o||!1===s.queue?this.each(r):this.queue(s.queue,r)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",s=p.timers,r=M.get(this);if(o)r[o]&&r[o].stop&&i(r[o]);else for(o in r)r[o]&&r[o].stop&&Fe.test(o)&&i(r[o]);for(o=s.length;o--;)s[o].elem!==this||null!=e&&s[o].queue!==e||(s[o].anim.stop(n),t=!1,s.splice(o,1));(t||!n)&&p.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=M.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],s=p.timers,r=i?i.length:0;for(n.finish=!0,p.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;r>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),p.each(["toggle","show","hide"],function(e,t){var n=p.fn[t];p.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(qe(t,!0),e,i,o)}}),p.each({slideDown:qe("show"),slideUp:qe("hide"),slideToggle:qe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){p.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),p.timers=[],p.fx.tick=function(){var e,t=0,n=p.timers;for(Me=p.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||p.fx.stop(),Me=void 0},p.fx.timer=function(e){p.timers.push(e),e()?p.fx.start():p.timers.pop()},p.fx.interval=13,p.fx.start=function(){Pe||(Pe=setInterval(p.fx.tick,p.fx.interval))},p.fx.stop=function(){clearInterval(Pe),Pe=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(e,t){return e=p.fx&&p.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e=u.createElement("input"),t=u.createElement("select"),n=t.appendChild(u.createElement("option"));e.type="checkbox",d.checkOn=""!==e.value,d.optSelected=n.selected,t.disabled=!0,d.optDisabled=!n.disabled,(e=u.createElement("input")).value="t",e.type="radio",d.radioValue="t"===e.value}();var Ye,Ue=p.expr.attrHandle;p.fn.extend({attr:function(e,t){return L(this,p.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){p.removeAttr(this,e)})}}),p.extend({attr:function(e,t,n){var i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===B?p.prop(e,t,n):(1===s&&p.isXMLDoc(e)||(t=t.toLowerCase(),i=p.attrHooks[t]||(p.expr.match.bool.test(t)?Ye:void 0)),void 0===n?i&&"get"in i&&null!==(o=i.get(e,t))?o:null==(o=p.find.attr(e,t))?void 0:o:null!==n?i&&"set"in i&&void 0!==(o=i.set(e,n,t))?o:(e.setAttribute(t,n+""),n):void p.removeAttr(e,t))},removeAttr:function(e,t){var n,i,o=0,s=t&&t.match(H);if(s&&1===e.nodeType)for(;n=s[o++];)i=p.propFix[n]||n,p.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!d.radioValue&&"radio"===t&&p.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),Ye={set:function(e,t,n){return!1===t?p.removeAttr(e,n):e.setAttribute(n,n),n}},p.each(p.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Ue[t]||p.find.attr;Ue[t]=function(e,t,i){var o,s;return i||(s=Ue[t],Ue[t]=o,o=null!=n(e,t,i)?t.toLowerCase():null,Ue[t]=s),o}});var Ge=/^(?:input|select|textarea|button)$/i;p.fn.extend({prop:function(e,t){return L(this,p.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[p.propFix[e]||e]})}}),p.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return(1!==s||!p.isXMLDoc(e))&&(t=p.propFix[t]||t,o=p.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||Ge.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),d.optSelected||(p.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});var Xe=/[\t\r\n\f]/g;p.fn.extend({addClass:function(e){var t,n,i,o,s,r,a="string"==typeof e&&e,l=0,c=this.length;if(p.isFunction(e))return this.each(function(t){p(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(H)||[];c>l;l++)if(i=1===(n=this[l]).nodeType&&(n.className?(" "+n.className+" ").replace(Xe," "):" ")){for(s=0;o=t[s++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r=p.trim(i),n.className!==r&&(n.className=r)}return this},removeClass:function(e){var t,n,i,o,s,r,a=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(p.isFunction(e))return this.each(function(t){p(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(H)||[];c>l;l++)if(i=1===(n=this[l]).nodeType&&(n.className?(" "+n.className+" ").replace(Xe," "):"")){for(s=0;o=t[s++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");r=e?p.trim(i):"",n.className!==r&&(n.className=r)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(p.isFunction(e)?function(n){p(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,o=p(this),s=e.match(H)||[];t=s[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(n===B||"boolean"===n)&&(this.className&&M.set(this,"__className__",this.className),this.className=this.className||!1===e?"":M.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Xe," ").indexOf(t)>=0)return!0;return!1}});var Ke=/\r/g;p.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i=p.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(null==(o=i?e.call(this,n,p(this).val()):e)?o="":"number"==typeof o?o+="":p.isArray(o)&&(o=p.map(o,function(e){return null==e?"":e+""})),(t=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=p.valHooks[o.type]||p.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(Ke,""):null==n?"":n:void 0}}),p.extend({valHooks:{option:{get:function(e){var t=p.find.attr(e,"value");return null!=t?t:p.trim(p.text(e))}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,s="select-one"===e.type||0>o,r=s?null:[],a=s?o+1:i.length,l=0>o?a:s?o:0;a>l;l++)if(!(!(n=i[l]).selected&&l!==o||(d.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&p.nodeName(n.parentNode,"optgroup"))){if(t=p(n).val(),s)return t;r.push(t)}return r},set:function(e,t){for(var n,i,o=e.options,s=p.makeArray(t),r=o.length;r--;)((i=o[r]).selected=p.inArray(i.value,s)>=0)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(e,t){return p.isArray(t)?e.checked=p.inArray(p(e).val(),t)>=0:void 0}},d.checkOn||(p.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){p.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),p.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Qe=p.now(),Je=/\?/;p.parseJSON=function(e){return JSON.parse(e+"")},p.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+e),t};var Ze,et,tt=/#.*$/,nt=/([?&])_=[^&]*/,it=/^(.*?):[ \t]*([^\r\n]*)$/gm,ot=/^(?:GET|HEAD)$/,st=/^\/\//,rt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,at={},lt={},ct="*/".concat("*");try{et=location.href}catch(e){(et=u.createElement("a")).href="",et=et.href}function dt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,s=t.toLowerCase().match(H)||[];if(p.isFunction(n))for(;i=s[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function ut(e,t,n,i){var o={},s=e===lt;function r(a){var l;return o[a]=!0,p.each(e[a]||[],function(e,a){var c=a(t,n,i);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),l}return r(t.dataTypes[0])||!o["*"]&&r("*")}function ht(e,t){var n,i,o=p.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&p.extend(!0,e,i),e}Ze=rt.exec(et.toLowerCase())||[],p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:et,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ze[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ct,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ht(ht(e,p.ajaxSettings),t):ht(p.ajaxSettings,e)},ajaxPrefilter:dt(at),ajaxTransport:dt(lt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i,o,s,r,a,l,c,d=p.ajaxSetup({},t),u=d.context||d,h=d.context&&(u.nodeType||u.jquery)?p(u):p.event,f=p.Deferred(),m=p.Callbacks("once memory"),g=d.statusCode||{},v={},y={},b=0,_="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!s)for(s={};t=it.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||_;return n&&n.abort(t),w(0,t),this}};if(f.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,d.url=((e||d.url||et)+"").replace(tt,"").replace(st,Ze[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=p.trim(d.dataType||"*").toLowerCase().match(H)||[""],null==d.crossDomain&&(a=rt.exec(d.url.toLowerCase()),d.crossDomain=!(!a||a[1]===Ze[1]&&a[2]===Ze[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(Ze[3]||("http:"===Ze[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=p.param(d.data,d.traditional)),ut(at,d,t,x),2===b)return x;for(c in(l=d.global)&&0==p.active++&&p.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!ot.test(d.type),i=d.url,d.hasContent||(d.data&&(i=d.url+=(Je.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=nt.test(i)?i.replace(nt,"$1_="+Qe++):i+(Je.test(i)?"&":"?")+"_="+Qe++)),d.ifModified&&(p.lastModified[i]&&x.setRequestHeader("If-Modified-Since",p.lastModified[i]),p.etag[i]&&x.setRequestHeader("If-None-Match",p.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+ct+"; q=0.01":""):d.accepts["*"]),d.headers)x.setRequestHeader(c,d.headers[c]);if(d.beforeSend&&(!1===d.beforeSend.call(u,x,d)||2===b))return x.abort();for(c in _="abort",{success:1,error:1,complete:1})x[c](d[c]);if(n=ut(lt,d,t,x)){x.readyState=1,l&&h.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(r=setTimeout(function(){x.abort("timeout")},d.timeout));try{b=1,n.send(v,w)}catch(e){if(!(2>b))throw e;w(-1,e)}}else w(-1,"No Transport");function w(e,t,s,a){var c,v,y,_,w,k=t;2!==b&&(b=2,r&&clearTimeout(r),n=void 0,o=a||"",x.readyState=e>0?4:0,c=e>=200&&300>e||304===e,s&&(_=function(e,t,n){for(var i,o,s,r,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){l.unshift(o);break}if(l[0]in n)s=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){s=o;break}r||(r=o)}s=s||r}return s?(s!==l[0]&&l.unshift(s),n[s]):void 0}(d,x,s)),_=function(e,t,n,i){var o,s,r,a,l,c={},d=e.dataTypes.slice();if(d[1])for(r in e.converters)c[r.toLowerCase()]=e.converters[r];for(s=d.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=d.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(r=c[l+" "+s]||c["* "+s]))for(o in c)if((a=o.split(" "))[1]===s&&(r=c[l+" "+a[0]]||c["* "+a[0]])){!0===r?r=c[o]:!0!==c[o]&&(s=a[0],d.unshift(a[1]));break}if(!0!==r)if(r&&e.throws)t=r(t);else try{t=r(t)}catch(e){return{state:"parsererror",error:r?e:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(d,_,x,c),c?(d.ifModified&&((w=x.getResponseHeader("Last-Modified"))&&(p.lastModified[i]=w),(w=x.getResponseHeader("etag"))&&(p.etag[i]=w)),204===e||"HEAD"===d.type?k="nocontent":304===e?k="notmodified":(k=_.state,v=_.data,c=!(y=_.error))):(y=k,(e||!k)&&(k="error",0>e&&(e=0))),x.status=e,x.statusText=(t||k)+"",c?f.resolveWith(u,[v,k,x]):f.rejectWith(u,[x,k,y]),x.statusCode(g),g=void 0,l&&h.trigger(c?"ajaxSuccess":"ajaxError",[x,d,c?v:y]),m.fireWith(u,[x,k]),l&&(h.trigger("ajaxComplete",[x,d]),--p.active||p.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,n){return p.get(e,t,n,"json")},getScript:function(e,t){return p.get(e,void 0,t,"script")}}),p.each(["get","post"],function(e,t){p[t]=function(e,n,i,o){return p.isFunction(n)&&(o=o||i,i=n,n=void 0),p.ajax({url:e,type:t,dataType:o,data:n,success:i})}}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){p.fn[t]=function(e){return this.on(t,e)}}),p._evalUrl=function(e){return p.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},p.fn.extend({wrapAll:function(e){var t;return p.isFunction(e)?this.each(function(t){p(this).wrapAll(e.call(this,t))}):(this[0]&&(t=p(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(p.isFunction(e)?function(t){p(this).wrapInner(e.call(this,t))}:function(){var t=p(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=p.isFunction(e);return this.each(function(n){p(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()}}),p.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},p.expr.filters.visible=function(e){return!p.expr.filters.hidden(e)};var pt=/%20/g,ft=/\[\]$/,mt=/\r?\n/g,gt=/^(?:submit|button|image|reset|file)$/i,vt=/^(?:input|select|textarea|keygen)/i;function yt(e,t,n,i){var o;if(p.isArray(t))p.each(t,function(t,o){n||ft.test(e)?i(e,o):yt(e+"["+("object"==typeof o?t:"")+"]",o,n,i)});else if(n||"object"!==p.type(t))i(e,t);else for(o in t)yt(e+"["+o+"]",t[o],n,i)}p.param=function(e,t){var n,i=[],o=function(e,t){t=p.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=p.ajaxSettings&&p.ajaxSettings.traditional),p.isArray(e)||e.jquery&&!p.isPlainObject(e))p.each(e,function(){o(this.name,this.value)});else for(n in e)yt(n,e[n],t,o);return i.join("&").replace(pt,"+")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=p.prop(this,"elements");return e?p.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!p(this).is(":disabled")&&vt.test(this.nodeName)&&!gt.test(e)&&(this.checked||!q.test(e))}).map(function(e,t){var n=p(this).val();return null==n?null:p.isArray(n)?p.map(n,function(e){return{name:t.name,value:e.replace(mt,"\r\n")}}):{name:t.name,value:n.replace(mt,"\r\n")}}).get()}}),p.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var bt=0,_t={},xt={0:200,1223:204},wt=p.ajaxSettings.xhr();e.ActiveXObject&&p(e).on("unload",function(){for(var e in _t)_t[e]()}),d.cors=!!wt&&"withCredentials"in wt,d.ajax=wt=!!wt,p.ajaxTransport(function(e){var t;return d.cors||wt&&!e.crossDomain?{send:function(n,i){var o,s=e.xhr(),r=++bt;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)s.setRequestHeader(o,n[o]);t=function(e){return function(){t&&(delete _t[r],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?i(s.status,s.statusText):i(xt[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=_t[r]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}:void 0}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return p.globalEval(e),e}}}),p.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),p.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(i,o){t=p("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),u.head.appendChild(t[0])},abort:function(){n&&n()}}});var kt=[],Ct=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=kt.pop()||p.expando+"_"+Qe++;return this[e]=!0,e}}),p.ajaxPrefilter("json jsonp",function(t,n,i){var o,s,r,a=!1!==t.jsonp&&(Ct.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ct.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=p.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ct,"$1"+o):!1!==t.jsonp&&(t.url+=(Je.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return r||p.error(o+" was not called"),r[0]},t.dataTypes[0]="json",s=e[o],e[o]=function(){r=arguments},i.always(function(){e[o]=s,t[o]&&(t.jsonpCallback=n.jsonpCallback,kt.push(o)),r&&p.isFunction(s)&&s(r[0]),r=s=void 0}),"script"):void 0}),p.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||u;var i=x.exec(e),o=!n&&[];return i?[t.createElement(i[1])]:(i=p.buildFragment([e],t,o),o&&o.length&&p(o).remove(),p.merge([],i.childNodes))};var Tt=p.fn.load;p.fn.load=function(e,t,n){if("string"!=typeof e&&Tt)return Tt.apply(this,arguments);var i,o,s,r=this,a=e.indexOf(" ");return a>=0&&(i=p.trim(e.slice(a)),e=e.slice(0,a)),p.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),r.length>0&&p.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){s=arguments,r.html(i?p("<div>").append(p.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){r.each(n,s||[e.responseText,t,e])}),this},p.expr.filters.animated=function(e){return p.grep(p.timers,function(t){return e===t.elem}).length};var St=e.document.documentElement;function $t(e){return p.isWindow(e)?e:9===e.nodeType&&e.defaultView}p.offset={setOffset:function(e,t,n){var i,o,s,r,a,l,c=p.css(e,"position"),d=p(e),u={};"static"===c&&(e.style.position="relative"),a=d.offset(),s=p.css(e,"top"),l=p.css(e,"left"),("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1?(r=(i=d.position()).top,o=i.left):(r=parseFloat(s)||0,o=parseFloat(l)||0),p.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(u.top=t.top-a.top+r),null!=t.left&&(u.left=t.left-a.left+o),"using"in t?t.using.call(e,u):d.css(u)}},p.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){p.offset.setOffset(this,e,t)});var t,n,i=this[0],o={top:0,left:0},s=i&&i.ownerDocument;return s?(t=s.documentElement,p.contains(t,i)?(typeof i.getBoundingClientRect!==B&&(o=i.getBoundingClientRect()),n=$t(s),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}):o):void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===p.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),p.nodeName(e[0],"html")||(i=e.offset()),i.top+=p.css(e[0],"borderTopWidth",!0),i.left+=p.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-p.css(n,"marginTop",!0),left:t.left-i.left-p.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||St;e&&!p.nodeName(e,"html")&&"static"===p.css(e,"position");)e=e.offsetParent;return e||St})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i="pageYOffset"===n;p.fn[t]=function(o){return L(this,function(t,o,s){var r=$t(t);return void 0===s?r?r[n]:t[o]:void(r?r.scrollTo(i?e.pageXOffset:s,i?s:e.pageYOffset):t[o]=s)},t,o,arguments.length,null)}}),p.each(["top","left"],function(e,t){p.cssHooks[t]=we(d.pixelPosition,function(e,n){return n?(n=xe(e,t),be.test(n)?p(e).position()[t]+"px":n):void 0})}),p.each({Height:"height",Width:"width"},function(e,t){p.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){p.fn[i]=function(i,o){var s=arguments.length&&(n||"boolean"!=typeof i),r=n||(!0===i||!0===o?"margin":"border");return L(this,function(t,n,i){var o;return p.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?p.css(t,n,r):p.style(t,n,i,r)},t,s?i:void 0,s,null)}})}),p.fn.size=function(){return this.length},p.fn.andSelf=p.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return p});var Et=e.jQuery,jt=e.$;return p.noConflict=function(t){return e.$===p&&(e.$=jt),t&&e.jQuery===p&&(e.jQuery=Et),p},typeof t===B&&(e.jQuery=e.$=p),p},"object"==typeof n&&"object"==typeof n.exports?n.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e),n.exports||{}}),define("app/style/font-awesome.css",()=>{}),define("app/style/editor.css",()=>{}),define("components/style/makefile.tea",()=>!0),define("app/lib/preact.js",function(){var e,t,n,i,o,s,r,a={},l={},c=[],d=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function u(e,t){for(var n in t)e[n]=t[n];return e}function h(e){var t=e.parentNode;t&&t.removeChild(e)}function p(e,t,n){var i,o=arguments,s={};for(i in t)"key"!==i&&"ref"!==i&&(s[i]=t[i]);if(arguments.length>3)for(n=[n],i=3;i<arguments.length;i++)n.push(o[i]);if(null!=n&&(s.children=n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===s[i]&&(s[i]=e.defaultProps[i]);return f(e,s,t&&t.key,t&&t.ref)}function f(t,n,i,o){var s={type:t,props:n,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0};return e.vnode&&e.vnode(s),s}function m(e){return e.children}function g(e,t){this.props=e,this.context=t}function v(e,t){if(null==t)return e.__?v(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?v(e):null}function y(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return y(e)}}function b(t){(!t.__d&&(t.__d=!0)&&1===n.push(t)||o!==e.debounceRendering)&&((o=e.debounceRendering)||i)(_)}function _(){var e,t,i,o,s,r,a;for(n.sort(function(e,t){return t.__v.__b-e.__v.__b});e=n.pop();)e.__d&&(i=void 0,o=void 0,r=(s=(t=e).__v).__e,(a=t.__P)&&(i=[],o=S(a,s,u({},s),t.__n,void 0!==a.ownerSVGElement,null,i,null==r?v(s):r),$(i,s),o!=r&&y(s)))}function x(e,t,n,i,o,s,r,a,d){var u,p,f,m,g,y,b,_=n&&n.__k||c,x=_.length;if(a==l&&(a=null!=s?s[0]:x?v(n,0):null),u=0,t.__k=w(t.__k,function(n){if(null!=n){if(n.__=t,n.__b=t.__b+1,null===(f=_[u])||f&&n.key==f.key&&n.type===f.type)_[u]=void 0;else for(p=0;p<x;p++){if((f=_[p])&&n.key==f.key&&n.type===f.type){_[p]=void 0;break}f=null}if(m=S(e,n,f=f||l,i,o,s,r,a,d),(p=n.ref)&&f.ref!=p&&(b||(b=[]),f.ref&&b.push(f.ref,null,n),b.push(p,n.__c||m,n)),null!=m){var c;if(null==y&&(y=m),void 0!==n.__d)c=n.__d,n.__d=void 0;else if(s==f||m!=a||null==m.parentNode){e:if(null==a||a.parentNode!==e)e.appendChild(m),c=null;else{for(g=a,p=0;(g=g.nextSibling)&&p<x;p+=2)if(g==m)break e;e.insertBefore(m,a),c=a}"option"==t.type&&(e.value="")}a=void 0!==c?c:m.nextSibling,"function"==typeof t.type&&(t.__d=a)}else a&&f.__e==a&&a.parentNode!=e&&(a=v(f))}return u++,n}),t.__e=y,null!=s&&"function"!=typeof t.type)for(u=s.length;u--;)null!=s[u]&&h(s[u]);for(u=x;u--;)null!=_[u]&&H(_[u],_[u]);if(b)for(u=0;u<b.length;u++)j(b[u],b[++u],b[++u])}function w(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var i=0;i<e.length;i++)w(e[i],t,n);else n.push(t?t("string"==typeof e||"number"==typeof e?f(null,e,null,null):null!=e.__e||null!=e.__c?f(e.type,e.props,e.key,null):e):e);return n}function k(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===d.test(t)?n+"px":null==n?"":n}function C(e,t,n,i,o){var s,r,a,l,c;if(o?"className"===t&&(t="class"):"class"===t&&(t="className"),"key"===t||"children"===t);else if("style"===t)if(s=e.style,"string"==typeof n)s.cssText=n;else{if("string"==typeof i&&(s.cssText="",i=null),i)for(r in i)n&&r in n||k(s,r,"");if(n)for(a in n)i&&n[a]===i[a]||k(s,a,n[a])}else"o"===t[0]&&"n"===t[1]?(l=t!==(t=t.replace(/Capture$/,"")),c=t.toLowerCase(),t=(c in e?c:t).slice(2),n?(i||e.addEventListener(t,T,l),(e.l||(e.l={}))[t]=n):e.removeEventListener(t,T,l)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&!o&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,n))}function T(t){this.l[t.type](e.event?e.event(t):t)}function S(t,n,i,o,s,r,a,l,c){var d,h,p,f,v,y,b,_,w,k,C=n.type;if(void 0!==n.constructor)return null;(d=e.__b)&&d(n);try{e:if("function"==typeof C){if(_=n.props,w=(d=C.contextType)&&o[d.__c],k=d?w?w.props.value:d.__:o,i.__c?b=(h=n.__c=i.__c).__=h.__E:("prototype"in C&&C.prototype.render?n.__c=h=new C(_,k):(n.__c=h=new g(_,k),h.constructor=C,h.render=D),w&&w.sub(h),h.props=_,h.state||(h.state={}),h.context=k,h.__n=o,p=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=C.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=u({},h.__s)),u(h.__s,C.getDerivedStateFromProps(_,h.__s))),f=h.props,v=h.state,p)null==C.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==C.getDerivedStateFromProps&&_!==f&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(_,k),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(_,h.__s,k)){for(h.props=_,h.state=h.__s,h.__d=!1,h.__v=n,n.__e=i.__e,n.__k=i.__k,h.__h.length&&a.push(h),d=0;d<n.__k.length;d++)n.__k[d]&&(n.__k[d].__=n);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(_,h.__s,k),null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(f,v,y)})}h.context=k,h.props=_,h.state=h.__s,(d=e.__r)&&d(n),h.__d=!1,h.__v=n,h.__P=t,d=h.render(h.props,h.state,h.context),n.__k=null!=d&&d.type==m&&null==d.key?d.props.children:Array.isArray(d)?d:[d],null!=h.getChildContext&&(o=u(u({},o),h.getChildContext())),p||null==h.getSnapshotBeforeUpdate||(y=h.getSnapshotBeforeUpdate(f,v)),x(t,n,i,o,s,r,a,l,c),h.base=n.__e,h.__h.length&&a.push(h),b&&(h.__E=h.__=null),h.__e=!1}else n.__e=E(i.__e,n,i,o,s,r,a,c);(d=e.diffed)&&d(n)}catch(t){e.__e(t,n,i)}return n.__e}function $(t,n){e.__c&&e.__c(n,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(e){e.call(n)})}catch(t){e.__e(t,n.__v)}})}function E(e,t,n,i,o,s,r,a){var d,u,h,p,f,m=n.props,g=t.props;if(o="svg"===t.type||o,null!=s)for(d=0;d<s.length;d++)if(null!=(u=s[d])&&((null===t.type?3===u.nodeType:u.localName===t.type)||e==u)){e=u,s[d]=null;break}if(null==e){if(null===t.type)return document.createTextNode(g);e=o?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,g.is&&{is:g.is}),s=null}if(null===t.type)m!==g&&e.data!=g&&(e.data=g);else if(t!==n){if(null!=s&&(s=c.slice.call(e.childNodes)),h=(m=n.props||l).dangerouslySetInnerHTML,p=g.dangerouslySetInnerHTML,!a){if(m===l)for(m={},f=0;f<e.attributes.length;f++)m[e.attributes[f].name]=e.attributes[f].value;(p||h)&&(p&&h&&p.__html==h.__html||(e.innerHTML=p&&p.__html||""))}(function(e,t,n,i,o){var s;for(s in n)s in t||C(e,s,null,n[s],i);for(s in t)o&&"function"!=typeof t[s]||"value"===s||"checked"===s||n[s]===t[s]||C(e,s,t[s],n[s],i)})(e,g,m,o,a),t.__k=t.props.children,p||x(e,t,n,i,"foreignObject"!==t.type&&o,s,r,l,a),a||("value"in g&&void 0!==g.value&&g.value!==e.value&&(e.value=null==g.value?"":g.value),"checked"in g&&void 0!==g.checked&&g.checked!==e.checked&&(e.checked=g.checked))}return e}function j(t,n,i){try{"function"==typeof t?t(n):t.current=n}catch(t){e.__e(t,i)}}function H(t,n,i){var o,s,r;if(e.unmount&&e.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||j(o,null,n)),i||"function"==typeof t.type||(i=null!=(s=t.__e)),t.__e=t.__d=void 0,null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){e.__e(t,n)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&H(o[r],n,i);null!=s&&h(s)}function D(e,t,n){return this.constructor(e,n)}function N(t,n,i){var o,r,a;e.__&&e.__(t,n),r=(o=i===s)?null:i&&i.__k||n.__k,t=p(m,null,[t]),a=[],S(n,(o?n:i||n).__k=t,r||l,l,void 0!==n.ownerSVGElement,i&&!o?[i]:r?null:c.slice.call(n.childNodes),a,i||l,o),$(a,t)}return e={__e:function(e,t){for(var n,i;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(i=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(i=!0,n.componentDidCatch(e)),i)return b(n.__E=n)}catch(t){e=t}throw e}},t=function(e){return null!=e&&void 0===e.constructor},g.prototype.setState=function(e,t){var n;n=this.__s!==this.state?this.__s:this.__s=u({},this.state),"function"==typeof e&&(e=e(n,this.props)),e&&u(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),b(this))},g.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),b(this))},g.prototype.render=m,n=[],i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,s=l,r=0,a.render=N,a.hydrate=function(e,t){N(e,t,s)},a.createElement=p,a.h=p,a.Fragment=m,a.createRef=function(){return{}},a.isValidElement=t,a.Component=g,a.cloneElement=function(e,t){return t=u(u({},e.props),t),arguments.length>2&&(t.children=c.slice.call(arguments,2)),f(e.type,t,t.key||e.key,t.ref||e.ref)},a.createContext=function(e){var t={},n={__c:"__cC"+r++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var i,o=this;return this.getChildContext||(i=[],this.getChildContext=function(){return t[n.__c]=o,t},this.shouldComponentUpdate=function(t){e.value!==t.value&&i.some(function(e){e.context=t.value,b(e)})},this.sub=function(e){i.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){i.splice(i.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Consumer.contextType=n,n},a.toChildArray=w,a._e=H,a.options=e,a}),define("app/lib/preact_hooks.js",function(){var e,t,n={},i=require("app/lib/preact.js"),o=[],s=i.options.__r;i.options.__r=function(n){s&&s(n),e=0,(t=n.__c).__H&&(t.__H.t=f(t.__H.t))};var r=i.options.diffed;i.options.diffed=function(e){r&&r(e);var t=e.__c;if(t){var n=t.__H;n&&(n.u=(n.u.some(function(e){e.ref&&(e.ref.current=e.createHandle())}),[]),n.o=f(n.o))}};var a=i.options.unmount;function l(e){i.options.__h&&i.options.__h(t);var n=t.__H||(t.__H={i:[],t:[],o:[],u:[]});return e>=n.i.length&&n.i.push({}),n.i[e]}function c(n,i,o){var s=l(e++);return s.__c||(s.__c=t,s.v=[o?o(i):y(void 0,i),function(e){var t=n(s.v[0],e);s.v[0]!==t&&(s.v[0]=t,s.__c.setState({}))}]),s.v}function d(t,n){var i=l(e++);return v(i.s,n)?(i.s=n,i.p=t,i.v=t()):i.v}i.options.unmount=function(e){a&&a(e);var t=e.__c;if(t){var n=t.__H;n&&n.i.forEach(function(e){return e.l&&e.l()})}};var u=function(){};function h(){o.some(function(e){e.m=!1,e.__P&&(e.__H.t=f(e.__H.t))}),o=[]}if("undefined"!=typeof window){var p=i.options.requestAnimationFrame;u=function(e){(!e.m&&(e.m=!0)&&1===o.push(e)||p!==i.options.requestAnimationFrame)&&(p=i.options.requestAnimationFrame,(i.options.requestAnimationFrame||function(e){var t=function(){clearTimeout(n),cancelAnimationFrame(i),setTimeout(e)},n=setTimeout(t,100),i=requestAnimationFrame(t)})(h))}}function f(e){return e.forEach(m),e.forEach(g),[]}function m(e){e.l&&e.l()}function g(e){var t=e.v();"function"==typeof t&&(e.l=t)}function v(e,t){return!e||t.some(function(t,n){return t!==e[n]})}function y(e,t){return"function"==typeof t?t(e):t}return n.useState=function(e){return c(y,e)},n.useReducer=c,n.useEffect=function(n,i){var o=l(e++);v(o.s,i)&&(o.v=n,o.s=i,t.__H.t.push(o),u(t))},n.useLayoutEffect=function(n,i){var o=l(e++);v(o.s,i)&&(o.v=n,o.s=i,t.__H.o.push(o))},n.useRef=function(e){return d(function(){return{current:e}},[])},n.useImperativeHandle=function(n,i,o){var s=l(e++);v(s.s,o)&&(s.s=o,t.__H.u.push({ref:n,createHandle:i}))},n.useMemo=d,n.useCallback=function(e,t){return d(function(){return e},t)},n.useContext=function(n){var i=t.context[n.__c];if(!i)return n.__p;var o=l(e++);return null==o.v&&(o.v=!0,i.sub(t)),i.props.value},n.useDebugValue=function(e,t){i.options.useDebugValue&&i.options.useDebugValue(t?t(e):e)},n}),define("app/lib/htm.js",function(){var e,t,n,i={exports:!1};return e=function(t,n,i,o){var s;n[0]=0;for(var r=1;r<n.length;r++){var a=n[r++],l=n[r]?(n[0]|=a?1:2,i[n[r++]]):n[++r];3===a?o[0]=l:4===a?o[1]=Object.assign(o[1]||{},l):5===a?(o[1]=o[1]||{})[n[++r]]=l:6===a?o[1][n[++r]]+=l+"":a?(s=t.apply(l,e(t,l,i,["",null])),o.push(s),l[0]?n[0]|=2:(n[r-2]=0,n[r]=s)):o.push(l)}return o},t=new Map,n=function(n){var i=t.get(this);return i||(i=new Map,t.set(this,i)),(i=e(this,i.get(n)||(i.set(n,i=function(e){for(var t,n,i=1,o="",s="",r=[0],a=function(e){1===i&&(e||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?r.push(0,e,o):3===i&&(e||o)?(r.push(3,e,o),i=2):2===i&&"..."===o&&e?r.push(4,e,0):2===i&&o&&!e?r.push(5,0,!0,o):i>=5&&((o||!e&&5===i)&&(r.push(i,0,o,n),i=6),e&&(r.push(i,e,0,n),i=6)),o=""},l=0;l<e.length;l++){l&&(1===i&&a(),a(l));for(var c=0;c<e[l].length;c++)t=e[l][c],1===i?"<"===t?(a(),r=[r],i=3):o+=t:4===i?"--"===o&&">"===t?(i=1,o=""):o=t+o[0]:s?t===s?s="":o+=t:'"'===t||"'"===t?s=t:">"===t?(a(),i=1):i&&("="===t?(i=5,n=o,o=""):"/"===t&&(i<5||">"===e[l][c+1])?(a(),3===i&&(r=r[0]),i=r,(r=r[0]).push(2,0,i),i=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(a(),i=2):o+=t),3===i&&"!--"===o&&(i=4,r=r[0])}return a(),r}(n)),i),arguments,[])).length>1?i:i[0]},void 0!==i?i.exports=n:self.htm=n,i.exports||{}}),define("app/pure_components/internal/block.js",function(){const{Dialog:e}=require("app/pure_components/internal/Dialog/Dialog.js"),t=preact.createContext({name:"",value:{}}),n=preact.createContext(!1);class i extends preact.Component{static register(e,t){i.list=i.list||{},i.list[e]=t;for(var n=0;n<13;n++)t.id=e,i.list[e+n.toString()]=t}constructor(e){for(super(e),this.configButton=preact.createRef(),this.configDialog=preact.createRef(),this.variantValues={},this.variantCount=0;this["tpl_"+(this.variantCount+1)];)this.variantCount++;this.setValue(e.value)}setValue(e){var t=e.variant||1,n=(this["tpl_default_"+t]||(()=>{}))(),i=$.extend(!0,{variant:t},n,e);this.defaultValue=n,this.value=i}editorChange(e,t){this.prop(e,t),this.triggerChange()}prop(e,t){var n=this.value,i=0;for(e=e.split(".");i<e.length;i++){null!=t&&i+1===e.length&&(n[e[i]]=this.clone(t));var o=n[e[i]];if(null==o){if(void 0===t)return;n[e[i]]=o={}}n=o}return n}clone(e){if(!e||"object"!=typeof e)return e;var t,n,i="function"==typeof e.pop?[]:{};for(t in e)e.hasOwnProperty(t)&&(n=e[t],i[t]=n&&"object"==typeof n?this.clone(n):n);return i}triggerChange(){this.forceUpdate(),lp.app.blockChanged(this)}prev(){var e=(this.value.variant-2+this.variantCount)%this.variantCount+1;this.setVariant(e)}next(){var e=this.value.variant%this.variantCount+1;this.setVariant(e)}setVariant(e){this.variantValues[this.value.variant]=this.value,this.setValue($.extend(this.variantValues[e]||{type:this.value.type,id:this.value.id},{variant:e})),lp.app.blockChanged(this)}remove(){e.confirm({title:_t("Remove confirmation"),text:_t("Sure to remove component?")},e=>{e&&lp.app.removeBlock(this)})}configForm(){return!1}render(e,i){var o=this.value.variant,s=this["tpl_"+o]||(()=>html`<div>Unsupported variant ${o}</div>`),r=this.configForm();return r&&(r.ref=this.configDialog),html`
        <${n.Provider} value=${this}>
        <${t.Provider} value=${{name:"",value:this.value,defaultValue:this.defaultValue}}>
            <div class="lp-block">
                ${s.call(this,this.value,e,i)}
                ${!lp.app.options.viewOnly&&html`
                    <div class='cmp-controls'>
                        ${this.variantCount>1&&html`
                            <div class='fa fa-chevron-left lp-button' onClick=${()=>this.prev()} />
                            <div class='fa fa-chevron-right lp-button' onClick=${()=>this.next()} />
                            <div class='lp-variant-label'>
                                ${o}/${this.variantCount}
                            </div>
                        `}
                        ${r&&html`
                            <div 
                                ref=${this.configButton} 
                                class='fa fa-gear lp-button right' 
                                onClick=${()=>{let e=this.configDialog.current,t=this.configButton.current.getBoundingClientRect();e.open({x:t.x-e.props.width+t.width-1,y:t.y})}} 
                            />
                        `}
                        <div class='fa fa-arrows lp-button right' onMouseDown=${e=>lp.app.draggableMouseDown(e,this)} />
                        <div class='fa fa-trash-o lp-button right' onClick=${()=>this.remove()} />
                    </div>
                `}
            </div>
            ${!lp.app.options.viewOnly&&r}
        <//>
        <//>
        `}}return lp.Block=i,i.BlockContext=n,i.ValueContext=t,i}),define("app/pure_components/internal/Dialog/Dialog.js",function(){var e={};require("app/pure_components/internal/Dialog/Dialog.tea");const{createPortal:t,Portal:n}=require("app/pure_components/internal/portal.js");class i extends preact.Component{constructor(e){super(e),this.state={open:!!e.open,pos:{x:0,y:0},dragging:!1,rel:null}}open(e){this.setState({open:!0,pos:e})}close(){this.setState({open:!1})}componentDidUpdate(e,t){if(this.mm=this.mm||this.onMouseMove.bind(this),this.mu=this.mu||this.onMouseUp.bind(this),this.state.dragging&&!t.dragging?(document.addEventListener("mousemove",this.mm),document.addEventListener("mouseup",this.mu)):!this.state.dragging&&t.dragging&&(document.removeEventListener("mousemove",this.mm),document.removeEventListener("mouseup",this.mu)),this.state.open&&!t.open){let e=this.div.querySelector(".lp-dialog").getBoundingClientRect();var n=document.documentElement.clientHeight;if(this.state.pos.y+e.height>n){var i=n-e.height-1;i<0&&(i=0),this.setState({pos:{x:this.state.pos.x,y:i}})}}}onMouseDown(e){0===e.button&&(this.setState({dragging:!0,rel:{x:e.pageX-this.state.pos.x,y:e.pageY-this.state.pos.y}}),e.stopPropagation(),e.preventDefault())}onMouseUp(e){this.setState({dragging:!1}),e.stopPropagation(),e.preventDefault()}onMouseMove(e){this.state.dragging&&(this.setState({pos:{x:e.pageX-this.state.rel.x,y:e.pageY-this.state.rel.y}}),e.stopPropagation(),e.preventDefault())}render(e,n){return n.open?(this.div||(this.div=document.createElement("div")),this.div.parentElement||document.body.append(this.div)):this.div&&this.div.parentElement&&this.div.remove(),this.div&&t(n.open&&html`
            <div class="lp-dialog ${e.class||""}" style=${{width:e.width+"px",left:this.state.pos.x+"px",top:this.state.pos.y+"px"}}>
                <div class="lp-dialog-title" onMouseDown=${e=>this.onMouseDown(e)}>
                    ${e.title||""}
                    <span class="lp-dialog-button-close" onClick=${()=>this.close()}>
                        <i class="fa fa-times" />
                    </span>
                </div>
                <div class="lp-dialog-content">
                    ${e.children.call?e.children():e.children}
                </div>
            </div>
            ${e.modal&&html`
                <div class="lp-dialog-overlay" style=${{backgroundColor:e.overlayColor}} onClick=${()=>this.close()} />
            `}
        `,this.div)}}i.defaultProps={title:_t("Settings"),modal:!0,width:510,overlayColor:"transparent"};return preact.render(preact.h(class extends preact.Component{constructor(e){super(e),this.state={alert:{},confirm:{}}}componentDidMount(){let e=e=>{e.open({x:document.body.clientWidth/2-e.props.width/2,y:document.body.clientHeight/5})};i.confirm=((t,n)=>{"string"==$.type(t)&&(t={text:t}),t.title=t.title||_t("Confirm"),t.yes=t.yes||_t("Yes"),t.no=t.no||_t("Cancel"),t.cb=(e=>{this.confirm.close(),n(e)}),this.setState({confirm:t}),e(this.confirm)}),i.alert=((t,n)=>{"string"==$.type(t)&&(t={text:t}),t.title=t.title||_t("Alert"),this.setState({alert:t}),e(this.alert)})}render(e,t){return html`
            <${i} key="confirm" title=${t.confirm.title} width=300 overlayColor="rgba(0,0,0,0.3)" ref=${e=>this.confirm=e}>
                ${t.confirm.text}
                <div class="lp-dialog-buttons">
                    <button onClick=${()=>t.confirm.cb(!0)}>${t.confirm.yes}</button>
                    <button onClick=${()=>t.confirm.cb(!1)}>${t.confirm.no}</button>
                </div>
            <//>
            <${i} key="alert" title=${t.alert.title} width=300 overlayColor="rgba(0,0,0,0.3)" ref=${e=>this.alert=e}>
                ${t.alert.text}
                <div class="lp-dialog-buttons">
                    <button onClick=${()=>this.alert.close()}>OK</button>
                </div>
            <//>
        `}},{}),document.createElement("div")),e.Dialog=i,e}),define("app/pure_components/internal/Dialog/Dialog.tea",()=>!0),define("app/pure_components/internal/portal.js",function(){var e={},t=function(){};function n(e){var n,i,o,s;n=this,i=e.vnode,o=e.container,s=preact.h(t,{context:n.context},i),preact.render(s,o)}return t.prototype.getChildContext=function(){return this.props.context},t.prototype.render=function(e){return e.children},e.Portal=n,e.createPortal=function(e,t){return preact.h(n,{vnode:e,container:t})},e}),define("app/pure_components/internal/AddBlockDialog/AddBlockDialog.js",function(){var e={};require("app/pure_components/internal/AddBlockDialog/AddBlockDialog.tea");const t=require("app/pure_components/internal/block.js"),{Dialog:n}=require("app/pure_components/internal/Dialog/Dialog.js");return e.AddBlockDialog=class extends preact.Component{open(){this.dialog.open({x:0,y:$("#preview-toolbar").outerHeight()})}render(){return html`
            <${n} title=${_t("Select component type")} width=595 ref=${e=>this.dialog=e}>${()=>{var e=[];for(let n in t.list){let i=t.list[n];e.push(html`
                        <div class='lp-add-block-item' onClick=${()=>{this.dialog.close(),lp.app.addBlock(n)}}>
                            <div class='lp-add-block-item-pic' style=${{backgroundImage:"url("+base_url+"/editor/app/style/miniatures/"+i.id.toLowerCase()+".jpg)"}} />
                            ${i.title}
                            <small>${i.description}</small>
                        </div>
                    `)}return e}}<//>
        `}},e}),define("app/pure_components/internal/AddBlockDialog/AddBlockDialog.tea",()=>!0),define("app/pure_components/benefits.js",function(){var e;const t=require("app/pure_components/internal/block.js"),n=require("app/pure_components/internal/repeater.js"),i=require("app/pure_components/internal/text.js"),{Icon:o}=require("app/pure_components/internal/Icon/Icon.js"),{BlockColor:s}=require("app/pure_components/internal/Color/Color.js"),{Switch:r}=require("app/pure_components/internal/Switch/Switch.js"),{Dialog:a}=require("app/pure_components/internal/Dialog/Dialog.js");return t.register("Benefits",e=class extends t{static get title(){return _t("Benefits")}static get description(){return _t("Main advantages")}configForm(){return html`
            <${a}>
                <${r} name="show_title" label="${_t("Show first title")}" />
                <${r} name="show_title_2" label="${_t("Show second title")}" />
                <${r} name="show_icon_border" label="${_t("Show icon border")}" showWhen=${{variant:[1]}} />
                <${r} name="show_name_benefit" label="${_t("Show benefit name")}" showWhen=${{variant:[1,2,3,5]}} />
                <${r} name="show_desc_benefit" label="${_t("Show benefit desc")}" showWhen=${{variant:[1,2,5]}} />
                <${r} name="show_show_image_border" label="${_t("Show image border")}" showWhen=${{variant:[4,5]}} />
                <${s} name="background_color" />
            <//>
        `}tpl_1(e){return html`
        <div class="container-fluid benefits benefits_1" style="background: ${e.background_color}">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        ${e.show_title&&html`
                            <h1 class="title">
                                <${i} name="title" options=${i.plain_text} />
                            </h1>
                        `}
                        ${e.show_title_2&&html`
                            <div class="title_2">
                                <${i} name="title_2" options=${i.plain_text} />
                            </div>
                        `}
                        <div class="item_list ${e.show_icon_border?"":"hide_ico_border"}">
                            <${n} name="items">${t=>html`
                                <div class="row">                       
                                    ${[1,2,3].map(t=>html`
                                        <div class="item col-4">
                                            <${o} name=${"icon_"+t} />
                                            ${e.show_name_benefit&&html`
                                                <div class="name">
                                                    <${i} name=${"name_"+t} options=${i.plain_text} />
                                                </div>
                                            `}
                                            ${e.show_desc_benefit&&html`
                                                <div class="desc">
                                                    <${i} name=${"desc_"+t} options=${i.plain_text} />
                                                </div>
                                            `}
                                        </div>                                    
                                    `)}
                                </div>
                            `}<//>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `}tpl_default_1(){return"en"==window.locale_lang?{show_title:!0,show_title_2:!1,show_icon_border:!0,show_name_benefit:!0,show_desc_benefit:!0,background_color:"#FFFFFF",title:"Our circus is the coolest in the world!",title_2:"Subtitle",items:[{icon_1:`${lp.app.options.assets_url}/ico/740.png`,icon_2:`${lp.app.options.assets_url}/ico/274.png`,icon_3:`${lp.app.options.assets_url}/ico/218.png`,name_1:"You can go on foot",name_2:"It increases the degree of mood",name_3:"It inspires by selective positive ",desc_1:"It's too simple. Come and fill the place.",desc_2:"Only in our lunchroom you have intimate conversations over a beer.",desc_3:"You get an excellent mood for the longest time."}]}:{show_title:!0,show_title_2:!1,show_icon_border:!0,show_name_benefit:!0,show_desc_benefit:!0,background_color:"#FFFFFF",title:"Наш цирк самый крутой в мире!",title_2:"Подзаголовок о крутизне цирка",items:[{icon_1:`${lp.app.options.assets_url}/ico/740.png`,icon_2:`${lp.app.options.assets_url}/ico/274.png`,icon_3:`${lp.app.options.assets_url}/ico/218.png`,name_1:"В него можно придти пешком",name_2:"Повышает градус настроения",name_3:"Заряжает отборным позитивом",desc_1:"Все просто до безобразия. Приходите и занимаете места по купленным билетам.",desc_2:"Только в нашем буфете проходят задушевные беседы за кружечкой пенистого.",desc_3:"Вы получите заряд превосходного настроения на самое длительное время."}]}}tpl_2(e){return html`
        <div class="container-fluid benefits benefits_2" style="background: ${e.background_color}">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        ${e.show_title&&html`
                            <h1 class="title">
                                <${i} name="title" options=${i.plain_text} />
                            </h1>
                        `}
                        ${e.show_title_2&&html`
                            <div class="title_2">
                                <${i} name="title" options=${i.plain_text} />
                            </div>
                        `}                        
                        <div class="item_list">
                            <${n} name="items">${t=>html`
                                <div class="row">
                                    ${[1,2,3].map(t=>html`
                                        <div class="item col-4">
                                            <${o} name=${"icon_"+t} />
                                            ${e.show_name_benefit&&html`
                                                <div class="name">
                                                    <${i} name=${"name_"+t} options=${i.plain_text} />
                                                </div>
                                            `}
                                            ${e.show_desc_benefit&&html`
                                                <div class="desc">
                                                    <${i} name=${"desc_"+t} options=${i.plain_text} />
                                                </div>
                                            `}
                                        </div>   
                                    `)}
                                </div>
                            `}<//>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `}tpl_default_2(){return"en"==window.locale_lang?{show_title:!0,show_title_2:!1,show_name_benefit:!0,show_desc_benefit:!0,background_color:"#FFFFFF",title:"The advantages of our circus",title_2:"Subtitle",items:[{icon_1:`${lp.app.options.assets_url}/ico/729.png`,icon_2:`${lp.app.options.assets_url}/ico/308.png`,icon_3:`${lp.app.options.assets_url}/ico/341.png`,name_1:"Free Internet",name_2:"Delicious ice cream",name_3:"Starry cast",desc_1:"Wireless Internet access. You can always change the status in the social network.",desc_2:"White cornet. Very sticky and sweet.",desc_3:"We have such celebrities as Valentine and Valera."}]}:{show_title:!0,show_title_2:!1,show_name_benefit:!0,show_desc_benefit:!0,background_color:"#FFFFFF",title:"Преимущества нашего цирка",title_2:"Подзаголовок о преимуществе",items:[{icon_1:`${lp.app.options.assets_url}/ico/729.png`,icon_2:`${lp.app.options.assets_url}/ico/308.png`,icon_3:`${lp.app.options.assets_url}/ico/341.png`,name_1:"Бесплатный интернет",name_2:"Вкусное мороженное",name_3:"Звездный состав",desc_1:"Беспроводной доступ в интернет. Вы всегда сможете поменять статус в соцсети.",desc_2:"Белое мороженное в вафельном стаканчике. Очень липкое и сладкое.",desc_3:"Только у нас выступают такие знаменитости как Валентин и Валера."}]}}}),e}),define("app/pure_components/internal/repeater.js",function(){const e=require("app/pure_components/internal/editable.js"),t=require("app/pure_components/internal/block.js");return class extends e{constructor(e){super(e),this.state={hoverIdx:-1,hoverType:void 0}}buttonHover(e,t){this.setState({hoverIdx:e,hoverType:t})}addAfter(e,n){preact.hooks.useContext(t.ValueContext);var i=this.defaultValue[0]||{},o=[...this.value];o.splice(e+1,0,i),this.setValue(o)}remove(e){var t=[...this.value];t.splice(e,1),this.setValue(t)}tpl(e,n){var i=this.value||[],o=e.children;return html`
            ${i.map((e,i)=>html`
                <div class="item_block">
                    <${t.ValueContext.Provider} value=${{value:e,name:this.fullName+"."+i}}>
                        ${o(e)}
                    <//>
                    ${!lp.app.options.viewOnly&&html`
                        <div class='cmp-repeater-cover'>
                            <div 
                                class='fa fa-plus lp-button' 
                                onMouseEnter=${()=>{this.buttonHover(i,"add")}} 
                                onMouseLeave=${()=>{this.buttonHover(-1)}}
                                onClick=${()=>{this.addAfter(i)}}
                            />
                            <div 
                                class='fa fa-trash-o lp-button lp-remove-button' 
                                onMouseEnter=${()=>{this.buttonHover(i,"remove")}} 
                                onMouseLeave=${()=>{this.buttonHover(-1)}} 
                                onClick=${()=>{this.remove(i)}}
                            />
                        </div>
                        ${"remove"==n.hoverType&&n.hoverIdx==i&&html`<div class='cmp-cover cmp-remove-cover fa fa-trash-o' style="opacity:1" />`}
                        ${"add"==n.hoverType&&n.hoverIdx==i&&html`<div class='cmp-cover cmp-add-cover' style="opacity:1" />`}
                    `}
                </div>
            `)}
        `}}}),define("app/pure_components/internal/editable.js",function(){const e=require("app/pure_components/internal/block.js");return class extends preact.Component{constructor(e){super(e),this.fullName="",this.value=void 0}setValue(e){this.block.editorChange(this.fullName,e,!0)}passValue(){this.block=preact.hooks.useContext(e.BlockContext);const t=preact.hooks.useContext(e.ValueContext);this.fullName=t.name?t.name+"."+this.props.name:this.props.name,this.value=(t.value||{})[this.props.name||""],this.defaultValue=(t.defaultValue||{})[this.props.name||""]}render(e,t){this.passValue();var n=!0,i=e.showWhen;if(i){var o=this.block.value;for(var s in i)Array.isArray(i[s])?i[s].includes(o[s])||(n=!1):i[s]!=o[s]&&(n=!1)}return n&&html`<div>
            ${this.tpl(e,t)}
        </div>`}}}),define("app/pure_components/internal/text.js",function(){require("app/lib/spacedText/spacedText.js"),require("app/lib/spacedText/spacedText.css");const e=require("app/pure_components/internal/editable.js");class t extends e{render(e,t){return this.passValue(),html`<${n} onChange=${e=>this.setValue(e)} value=${this.value} options=${e.options} />`}}t.plain_heading={buttons:{bold:!1,italic:!1,fontcolor:!1,removeformat:!1},oneline:!0},t.default_heading={buttons:["bold","italic","deleted","removeformat"],oneline:!0},t.size_heading={buttons:["bold","italic","deleted","size","removeformat"],oneline:!0},t.color_heading={buttons:["bold","italic","deleted","size","fontcolor","removeformat"],oneline:!0},t.plain_text={buttons:{bold:!1,italic:!1,fontcolor:!1,removeformat:!1}},t.default_text={buttons:["bold","italic","deleted","removeformat"],oneline:!1},t.size_text={buttons:["bold","italic","deleted","size","removeformat"],oneline:!1},t.color_text={buttons:["bold","italic","deleted","size","fontcolor","removeformat"],oneline:!1};class n extends preact.Component{constructor(e){super(e),this.editor=preact.createRef(),this.toolbar=preact.createRef(),this.value=void 0}shouldComponentUpdate(e){return e.value!=this.value}componentDidMount(){if(!lp.app.options.viewOnly){var e=$(this.editor.current),t=$(this.toolbar.current).hide(),n=$.extend({oneline:!1,buttons:["bold","italic","removeformat"]},this.props.options||{});e.spacedText({document:document,window:window,toolbarExternal:t,focus:!1,convertLinks:!1,buttons:n.buttons,buttons_extra:[],oneline:n.oneline,on_change:e=>{this.value=e,this.props.onChange&&this.props.onChange(e)}}),t.find("ul li").length<1&&t.css("visibility","hidden"),e.on("focus",()=>t.show()),e.on("blur",e=>{$(e.relatedTarget).closest("ul.spacedText_toolbar").length<1&&t.hide()})}}render(e,t){return this.value=e.value,html`<div>
            <div ref=${this.editor} class="editor_text" dangerouslySetInnerHTML=${{__html:e.value}} />
            <div ref=${this.toolbar} class="text_toolbar" />
        </div`}}return t}),define("app/lib/spacedText/spacedText.js",function(){var e;return e=jQuery,"undefined"==typeof $document&&($document=e(document)),e.fn.spacedClickOut=function(t,n){var i=".spacedClickOut_"+Math.floor(9e3*Math.random()+1e3);return setTimeout(e.proxy(function(){$document.on("click"+i,e.proxy(function(o){e(o.target).is(this)||0!==this.has(o.target).length||($document.off("click"+i),o.delegateTarget=this.get(),void 0===n?t.call(this,o):n.call(this,o))},this))},this),50),"click"+i},function(e){"undefined"==typeof $document&&($document=e(document));var t=function(t,n){return this.$item=e(t),this.is_inner=void 0!==n.append_to,this.opts=e.extend({value:"#FFFFFF",gradient_value:!1,type:"fill",show:!1,append_to:!1,change:function(){},on_done:function(){},on_cancel:function(){}},n),this.data={},this.event_scope=".spacedColors_"+Math.floor(9e3*Math.random()+1e3),this.init(),this};t.prototype={is_inner:!1,gradient_scale:1.75,colorname_table:{black:"#000000",gray:"#808080",grey:"#808080",silver:"#C0C0C0",lightgray:"#D3D3D3",white:"#FFFFFF",red:"#FF0000",pink:"#FFC0CB",orange:"#FFA500",yellow:"#FFFF00",violet:"#EE82EE",purple:"#800080",magenta:"#FF00FF",brown:"#A52A2A",maroon:"#800000",olive:"#808000",lime:"#00FF00",green:"#008000",aqua:"#00FFFF",blue:"#0000FF",navy:"#000080"},init:function(){"object"==typeof this.opts.value?this.data.value=this.opts.value.value:this.opts.value?this.data.value=this.opts.value:this.data.value="#FFFFFF","transparent"==this.data.value&&(this.data.value="#FFFFFF"),this.is_hex(this.data.value)?this.data.hex=this.expandHex(this.data.value):this.data.hex=this.color2hex(this.data.value),this.data.hsb=this.hex2hsb(this.data.hex),this.data.opacity=this.color2opacity(this.data.value),this.data.opacity>1?this.data.opacity=1:this.data.opacity<0&&(this.data.opacity=0),(this.is_inner||this.opts.show)&&this.show()},destroy:function(){this.$selector&&this.$selector.remove(),e(document).off(this.event_scope)},show:function(){if(this.$selector=e('<div class="spacedColors spacedColors-selector"></div>'),this.$selector.append('<div class="spacedColors-hues"><div class="spacedColors-huePicker"></div></div>').append('<div class="spacedColors-colors" style="background-color: #FFF;"><div class="spacedColors-colorPicker"><div class="spacedColors-colorPicker-inner"></div></div>').hide(),this.is_inner)this.$selector.addClass("is_inner");else{var t=e('<div class="spacedColors-buttons"><a class="spacedColors-buttons_done" data-value="done"><span>Готово</span></a><a class="spacedColors-buttons_cancel" data-value="cancel"><span>Отмена</span></a></div>');this.$selector.append(t),t.on("click","a",e.proxy(function(t){var n=e(t.currentTarget).attr("data-value");"done"==n&&"function"==typeof this.opts.on_done?this.opts.on_done(this.data):"cancel"==n&&"function"==typeof this.opts.on_cancel&&this.opts.on_cancel(this.data),this.destroy()},this)),this.$selector.spacedClickOut(e.proxy(function(){this.opts.on_done(this.data),this.destroy()},this))}this.$color_picker=this.$selector.find(".spacedColors-colorPicker"),this.$hue_picker=this.$selector.find(".spacedColors-huePicker"),this.show_opacity(),this.show_input(),this.show_gradient();var n=this.data.hsb;this.$selector.find(".spacedColors-colors").css("backgroundColor","#"+this.hsb2hex({h:n.h,s:100,b:100})).end().find(".spacedColors-opacity").css("backgroundColor","#"+this.hsb2hex({h:n.h,s:n.s,b:n.b})).end(),this.colorPosition=this.getColorPositionFromHSB(this.data.hsb),this.huePosition=this.getHuePositionFromHSB(this.data.hsb),this.opacityPosition=this.getOpacityPositionFromAlpha(this.data.opacity),this.$color_picker.css("top",this.colorPosition.y+"px").css("left",this.colorPosition.x+"px"),this.$hue_picker.css("top",this.huePosition+"px"),this.$opacity_picker&&this.$opacity_picker.css("left",this.opacityPosition+"px"),this.mousebutton=0;var i=this.is_inner?this.opts.append_to:"body";if(e(i).append(this.$selector),!this.is_inner){var o=300,s=600;if(this.opts.element){var r=e(this.opts.element).offset(),a=e(this.opts.element).closest("body").scrollTop();o=r.top-a,s=r.left,this.opts.element_offset&&(o+=this.opts.element_offset.top||0,s+=this.opts.element_offset.left||0),(o=o-this.$selector.height()+8)<50&&(o=50)}this.$selector.css({top:o,left:s})}this.$selector.fadeIn(100),this.$selector.on("selectstart",function(){return!1}),this.$selector.on("mousedown"+this.event_scope+" touchstart"+this.event_scope,e.proxy(function(t){if(e(t.target).is('input[type="text"]'))return!0;this.mousebutton=1;var n=e(t.target).parents().andSelf();if(n.hasClass("spacedColors-colors")&&(t.preventDefault(),this.moving="colors",this.move_color(t)),n.hasClass("spacedColors-hues")&&(t.preventDefault(),this.moving="hues",this.move_hue(t)),n.hasClass("spacedColors-opacity")&&(t.preventDefault(),this.moving="opacity",this.move_opacity(t)),n.hasClass("color_gradient_pick_line")&&"gradient"==this.opts.type){var i=e(t.target);i.is(".color_gradient_pick_line")?(t.preventDefault(),this.addGadientPointEvent(t)):(i.is(".color_gradient_pick_value")&&(i=e(t.target).parent()),i.is(".color_gradient_pick")&&(t.preventDefault(),this.$moving_gradient_pick=i,this.moving="gradient",this.setGradientPointActive(i),this.move_gradient(t)))}n.hasClass("spacedColors-selector")?t.preventDefault():n.hasClass("spacedColors")||this.is_inner||this.hide()},this)),e(document).on("mouseup"+this.event_scope+" touchend"+this.event_scope,e.proxy(function(e){this.mousebutton=0,this.moving=void 0},this)),e(document).on("mousemove"+this.event_scope+" touchmove"+this.event_scope,e.proxy(function(t){if(e(t.target).is('input[type="text"]'))return!0;1===this.mousebutton&&(t.preventDefault(),"colors"===this.moving&&this.move_color(t),"hues"===this.moving&&this.move_hue(t),"opacity"===this.moving&&this.move_opacity(t),"gradient"===this.moving&&this.move_gradient(t))},this))},show_input:function(){this.$input_text=e('<input type="text">').val(this.data.value),this.$selector.append(this.$input_text),this.$selector.addClass("is_show_input"),this.$input_text.on("keyup",e.proxy(function(t){var n=e(t.currentTarget).val(),i=this.color2hex(n),o=this.color2opacity(n);if(!1===i)return this.$input_text.addClass("is_invalid"),!0;this.$input_text.is(".is_invalid")&&this.$input_text.removeClass("is_invalid"),this.data.value=n,this.data.opacity=o,this.opts.opacity&&(this.opacityPosition=this.getOpacityPositionFromAlpha(this.data.opacity),this.$opacity_picker.css("left",this.opacityPosition+"px")),this.inputTextlock=!0;var s=this.hex2hsb(i);this.set_color(s)},this)),this.$input_text.wrap('<div class="spacedColors-input"></div>')},show_opacity:function(){return!!this.opts.opacity&&(this.$selector.addClass("is_show_opacity"),this.$selector.prepend('<div class="spacedColors-opacity"><div class="spacedColors-opacityPicker"></div></div><div class="spacedColors-opacityText">Прозрачность</div>'),this.$opacity_picker=this.$selector.find(".spacedColors-opacityPicker"),!0)},show_gradient:function(){if("gradient"!=this.opts.type)return!1;this.$selector.addClass("is_show_gradient");var t=e('<div class="spacedColors-gradient"></div>');this.$gradient_line=e('<div class="color_gradient_line"></div>'),this.$gradient_pick_list=e('<div class="color_gradient_pick_line"></div>'),this.$gradient_btn=e('<div class="color_gradient_btn"></div>');var n=e('<a class="color_gradient_pick_remove" title="Удалить активную точку градиента"></a>');t.append('<div class="spacedColors-gradientText">Направление градиента</div>'),this.$gradient_btn.append('<a class="edit_btn" data-value="top" title="Вниз"></a>'),this.$gradient_btn.append('<a class="edit_btn" data-value="top_left" title="В правый нижний угол"></a>'),this.$gradient_btn.append('<a class="edit_btn" data-value="top_right" title="В правый верхний угол"></a>'),this.$gradient_btn.append('<a class="edit_btn" data-value="left" title="Вправо"></a>'),this.$gradient_btn.append('<a class="edit_btn" data-value="radial" title="Радиальный"></a>'),this.gradient_type=this.opts.gradient_value.type,this.gradient_values=this.opts.gradient_value.values,"object"!=typeof this.gradient_values&&(this.gradient_values={0:this.data.value,100:this.data.value}),e.each(this.gradient_values,e.proxy(function(e,t){this.addGadientPoint(e,t)},this)),n.on("click touchstart",e.proxy(function(e){e.preventDefault(),this.$gradient_current_point.siblings().length<2?alert("Нельзя удалить основные точки"):this.removeGadientPoint(this.$gradient_current_point)},this)),this.$gradient_btn.on("click touchstart","a.edit_btn",e.proxy(function(t){t.preventDefault(),this.setGradientType(e(t.target).attr("data-value"))},this));var i=this.$gradient_pick_list.find("div.color_gradient_pick:eq(0)");return this.setGradientPointActive(i),this.$gradient_btn.append(n),"string"!=typeof this.gradient_type&&(this.gradient_type="top"),this.setGradientType(this.gradient_type),t.append(this.$gradient_btn).append(this.$gradient_line).append(this.$gradient_pick_list),this.$selector.append(t),this.updateGradient(),!0},hide:function(){this.$selector.fadeOut(100,e.proxy(function(){this.$selector.remove()},this)),e(document).off(this.event_scope)},move_color:function(e){this.$color_picker.hide();var t={x:e.pageX,y:e.pageY};e.originalEvent.changedTouches&&(t.x=e.originalEvent.changedTouches[0].pageX,t.y=e.originalEvent.changedTouches[0].pageY),t.x=t.x-this.$selector.find(".spacedColors-colors").offset().left-6,t.y=t.y-this.$selector.find(".spacedColors-colors").offset().top-6,t.x<=-5&&(t.x=-5),t.x>=144&&(t.x=144),t.y<=-5&&(t.y=-5),t.y>=144&&(t.y=144),this.colorPosition=t,this.$color_picker.css("left",t.x).css("top",t.y).show();var n=Math.round(.67*(t.x+5));n<0&&(n=0),n>100&&(n=100);var i=100-Math.round(.67*(t.y+5));i<0&&(i=0),i>100&&(i=100);var o=this.data.hsb;o.s=n,o.b=i,this.set_color(o)},move_hue:function(e){this.$hue_picker.hide();var t=e.pageY;e.originalEvent.changedTouches&&(t=e.originalEvent.changedTouches[0].pageY),(t=t-this.$selector.find(".spacedColors-colors").offset().top-1)<=-1&&(t=-1),t>=149&&(t=149),this.huePosition=t,this.$hue_picker.css("top",t).show();var n=Math.round(2.4*(150-t-1));n<0&&(n=0),n>360&&(n=360);var i=this.data.hsb;i.h=n,this.set_color(i)},move_opacity:function(e){this.$opacity_picker.hide();var t=e.pageX;e.originalEvent.changedTouches&&(t=e.originalEvent.changedTouches[0].pageX);var n=175;(t=t-this.$selector.find(".spacedColors-colors").offset().left-1)<=-1&&(t=-1),t>=174&&(t=174),this.opacityPosition=t,this.$opacity_picker.css("left",t).show(),this.data.opacity=parseFloat((n-t-1)/n).toFixed(2),this.data.opacity<0&&(this.data.opacity=0),this.data.opacity>1&&(this.data.opacity=1),this.set_color(this.data.hsb)},move_gradient:function(e){if(this.$moving_gradient_pick&&this.$moving_gradient_pick.is(".color_gradient_pick"))if(e.offsetY>70&&this.$moving_gradient_pick.parent().children().length>2)this.removeGadientPoint(this.$moving_gradient_pick);else{var t=e.pageX;e.originalEvent.changedTouches&&(t=e.originalEvent.changedTouches[0].pageX);(t=t-this.$selector.find(".spacedColors-colors").offset().left-1)<=-1&&(t=-1),t>=174&&(t=174),this.$moving_gradient_pick.css("left",t),this.last_change=Math.random(),this.change()}},addGadientPointEvent:function(e){var t=e.pageX;e.originalEvent.changedTouches&&(t=e.originalEvent.changedTouches[0].pageX);(t=t-this.$selector.find(".spacedColors-colors").offset().left-1)<=-1&&(t=-1),t>=174&&(t=174);var n=parseInt(t/this.gradient_scale),i=this.addGadientPoint(n,"#FFFFFF");this.setGradientPointActive(i)},addGadientPoint:function(t,n){var i=parseInt(t*this.gradient_scale),o=e('<div class="color_gradient_pick" style="left:'+i+'px"><div class="color_gradient_pick_value" style="background-color: '+n+';"></div></div>');return this.$gradient_pick_list.append(o),o.data("value",n),o},setGradientPointActive:function(e){e.siblings().removeClass("is_active"),e.addClass("is_active"),this.$gradient_current_point=e,this.last_change=Math.random();var t=this.hex2hsb(this.$gradient_current_point.data("value"));this.set_color(t),this.colorPosition=this.getColorPositionFromHSB(this.data.hsb),this.huePosition=this.getHuePositionFromHSB(this.data.hsb),this.opacityPosition=this.getOpacityPositionFromAlpha(this.data.opacity),this.$color_picker.css("top",this.colorPosition.y+"px").css("left",this.colorPosition.x+"px"),this.$hue_picker.css("top",this.huePosition+"px"),this.$opacity_picker&&this.$opacity_picker.css("left",this.opacityPosition+"px")},setGradientType:function(e){this.gradient_type=e,this.$gradient_btn.find(".edit_btn").removeClass("is_active"),this.$gradient_btn.find('.edit_btn[data-value="'+e+'"]').addClass("is_active"),this.last_change=Math.random(),this.change()},removeGadientPoint:function(e){e.remove();var t=this.$gradient_pick_list.find("div.color_gradient_pick").eq(0);this.setGradientPointActive(t)},set_color:function(e){this.data.hsb=e;var t=this.hsb2rgb(e),n=this.hsb2hex(e);this.opts.opacity&&1!=this.data.opacity?this.data.value="rgba("+t.r+","+t.g+","+t.b+","+parseFloat(this.data.opacity)+")":this.data.value="#"+n,this.$selector&&this.$selector.find(".spacedColors-colors").css("backgroundColor","#"+this.hsb2hex({h:e.h,s:100,b:100})).end().find(".spacedColors-opacity").css("backgroundColor","#"+n).end(),this.change()},change:function(){"gradient"==this.opts.type&&void 0!==this.$gradient_current_point&&(this.$gradient_current_point.find("div").css("background-color",this.data.value),this.$gradient_current_point.data("value",this.data.value),this.updateGradient()),this.inputTextlock?this.inputTextlock=!1:this.$input_text&&this.$input_text.val(this.data.value),this.last_change=this.data.value,this.$item&&this.$item.val(this.data.value),"function"==typeof this.opts.change&&this.opts.change(this.data,this.data.gradient_code)},updateGradient:function(){var t={};e.each(this.$gradient_pick_list.find("div.color_gradient_pick"),e.proxy(function(n,i){var o=e(i),s=parseInt(parseInt(o.css("left"))/this.gradient_scale);t[s]=o.data("value")},this)),this.gradient_data=t,this.data.gradient_code=this.getGradientCode();var n=this.getGradientCode(!0),i="";e.each(n.preview,function(e,t){i+="background: "+t+"; "}),this.$gradient_line.attr("style",i)},getGradient:function(){return this.gradient_data},getGradientCode:function(t){void 0===t&&(t=!1);var n=this.gradient_type;t&&(n="left");var i="radial"==n?"radial":"linear",o="",s="";e.each(this.getGradient(),e.proxy(function(e,t){"top"==n?e=10*e+"px":e+="%",o=t,s+=","+t+" "+e},this));var r="-webkit-"+i+"-gradient("+this.getGradientCodeType("webkit",n)+s+") no-repeat",a="-moz-"+i+"-gradient("+this.getGradientCodeType("moz",n)+s+") no-repeat",l="-o-"+i+"-gradient("+this.getGradientCodeType("o",n)+s+") no-repeat",c="-ms-"+i+"-gradient("+this.getGradientCodeType("ms",n)+s+") no-repeat",d=i+"-gradient("+this.getGradientCodeType("main",n)+s+") no-repeat";return t?{type:n,value:o,values:s,preview:[o,r,a,l,c,d]}:{type:n,value:o,values:s}},getGradientCodeType:function(e,t){if("webkit_old"==e)switch(t){case"left":return"linear, left top, right top";case"top":return"linear, left top, left bottom";case"top_left":return"linear, left top, right bottom";case"top_right":return"linear, left bottom, right top";case"radial":return"radial, center center, 0px, center center, 100%"}else if("main"==e)switch(t){case"left":return"to right";case"top":return"to bottom";case"top_left":return"135deg";case"top_right":return"225deg";case"radial":return"circle at top"}else switch(t){case"left":return"left";case"top":return"top";case"top_left":return"-45deg";case"top_right":return"225deg";case"radial":return"center top, circle cover"}},getColorPositionFromHSB:function(e){var t=Math.ceil(e.s/.67);t<0&&(t=0),t>150&&(t=150);var n=150-Math.ceil(e.b/.67);return n<0&&(n=0),n>150&&(n=150),{x:t-5,y:n-5}},getHuePositionFromHSB:function(e){var t=150-e.h/2.4;return t<0&&(h=0),t>150&&(h=150),t},getOpacityPositionFromAlpha:function(e){var t=175*e;return t<0&&(t=0),t>175&&(t=175),175-t},cleanHex:function(e){return"string"==typeof e&&e.replace(/[^A-F0-9]/gi,"")},expandHex:function(e){return(e=this.cleanHex(e))?(3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),6===e.length?e:null):null},hsb2rgb:function(e){var t={},n=Math.round(e.h),i=Math.round(255*e.s/100),o=Math.round(255*e.b/100);if(0===i)t.r=t.g=t.b=o;else{var s=o,r=(255-i)*o/255,a=n%60*(s-r)/60;360===n&&(n=0),n<60?(t.r=s,t.b=r,t.g=r+a):n<120?(t.g=s,t.b=r,t.r=s-a):n<180?(t.g=s,t.r=r,t.b=r+a):n<240?(t.b=s,t.r=r,t.g=s-a):n<300?(t.b=s,t.g=r,t.r=r+a):n<360?(t.r=s,t.g=r,t.b=s-a):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},rgb2hex:function(t){var n=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return e.each(n,function(e,t){1===t.length&&(n[e]="0"+t)}),n.join("")},hex2rgb:function(e){return{r:(e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16))>>16,g:(65280&e)>>8,b:255&e}},rgb2hsb:function(e){var t={h:0,s:0,b:0},n=Math.min(e.r,e.g,e.b),i=Math.max(e.r,e.g,e.b),o=i-n;return t.b=i,t.s=0!==i?255*o/i:0,0!==t.s?e.r===i?t.h=(e.g-e.b)/o:e.g===i?t.h=2+(e.b-e.r)/o:t.h=4+(e.r-e.g)/o:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t},hex2hsb:function(e){var t=this.rgb2hsb(this.hex2rgb(e));return 0===t.s&&(t.h=360),t},hsb2hex:function(e){return this.rgb2hex(this.hsb2rgb(e))},is_hex:function(t){return void 0!==t&&(!((t=(t=e.trim(t)).toLowerCase()).length<3||t.length>7)&&(t.indexOf("#")>-1&&(t=t.substring(t.indexOf("#")+1)),/^([0-9a-f]{1,2}){3}$/i.test(t)))},is_rgb:function(t){return void 0!==t&&(t=(t=e.trim(t)).toLowerCase(),/\(([0-9]*)\,\s{0,1}([0-9]*)\,\s{0,1}([0-9]*)\,{0,1}\s{0,1}(.*){0,1}\)$/.test(t))},color2hex:function(t){if(t=t.toLowerCase(),(t=e.trim(t)).indexOf("#")>-1)return!(t.length>7)&&t.substring(t.indexOf("#")+1);if(t.indexOf("rgb")>-1){var n=/\(([0-9]*)\,\s{0,1}([0-9]*)\,\s{0,1}([0-9]*)\,{0,1}\s{0,1}(.*){0,1}\)$/.exec(t);if(null!==n&&n.hasOwnProperty("1")&&n.hasOwnProperty("2")&&n.hasOwnProperty("3")){var i={};return i.r=parseInt(n[1]),i.g=parseInt(n[2]),i.b=parseInt(n[3]),i.r>255&&(i.r=255),i.g>255&&(i.g=255),i.b>255&&(i.b=255),i.r<0&&(i.r=0),i.g<0&&(i.g=0),i.b<0&&(i.b=0),this.rgb2hex(i)}return!1}return this.colorname_table.hasOwnProperty(t)?this.color2hex(this.colorname_table[t]):(3==t.length||6==t.length)&&t},color2opacity:function(t){if(t=t.toLowerCase(),(t=e.trim(t)).indexOf("#")>-1)return 1;if(t.indexOf("rgb")>-1){var n=/\(([0-9]*)\,\s{0,1}([0-9]*)\,\s{0,1}([0-9]*)\,{0,1}\s{0,1}(.*){0,1}\)$/.exec(t);if(null!==n&&n.hasOwnProperty("4")&&!isNaN(n[4])){var i=parseFloat(n[4]);return i>1?i=1:i<0&&(i=0),i}return 1}return 1}},e.fn.spacedColors=function(n){if(!(this.length<1))return this.each(function(){var i=e(this),o=i.data("spacedColors");o||(o=new t(i,n),i.data("spacedColors",o))});var i=e("<div></div>"),o=i.data("spacedColors");o||(o=new t(i,n),i.data("spacedColors",o))},e.fn.spacedColorsDestroy=function(){this.data("spacedColors")&&(this.data("spacedColors").destroy(),this.removeData("spacedColors"))},e.fn.spacedColorsSetColor=function(e){if(this.data("spacedColors")){var t=this.data("spacedColors"),n=t.hex2hsb(e);t.set_color(n)}},e.fn.spacedColorsGetColor=function(e){if(this.data("spacedColors"))return this.data("spacedColors").data}}(jQuery),function(e){"undefined"==typeof $document&&($document=e(document));var t=function(t,n){this.$editor=e(t),this.opts=e.extend({callback:!1,on_change:function(){},focus:!0,hotkeys:!0,convertLinks:!0,convertDivs:!1,toolbarExternal:!1,oneline:!1,htmlExternal:!1,allowedTags:["code","span","div","a","br","p","b","i","del","strike","u","img","blockquote","mark","cite","small","ul","ol","li","hr","dl","dt","dd","sup","sub","big","code","figure","figcaption","strong","em","table","tr","td","th","tbody","thead","tfoot","h1","h2","h3","h4","h5","h6"],allowedTagsPaste:["img","span","div","label","a","br","p","b","i","del","strike","u","small","ul","ol","li","hr","sup","sub","big","code","strong","em","h1","h2","h3","h4","h5","h6"],buttons:["bold","italic","underline","deleted","size","fontcolor","link","removeformat"],buttons_extra:["backcolor","alignleft","aligncenter","alignright","alignall","unorderedlist","orderedlist","outdent","indent","html"],activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist","alignleft","aligncenter","alignright","alignall"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline"},emptyHtml:"<p><br></p>",buffer:!1,visual:!0,toolbar:{html:{title:"Редактор HTML",func:"toggle"},bold:{title:"Жирный",exec:"bold"},italic:{title:"Курсив",exec:"italic"},deleted:{title:"Зачеркнутый",exec:"strikethrough"},underline:{title:"Подчеркнутый",exec:"underline"},size:{title:"Размер",func:"show_size"},link:{title:"Вставить ссылку",func:"show_link"},fontcolor:{title:"Цвет текста",func:"show_color_font"},backcolor:{title:"Цвет фона",func:"show_color_back"},removeformat:{title:"Очистить форматирование",exec:"removeFormat"},unorderedlist:{title:"&bull; Ненумерованный список",exec:"insertunorderedlist"},orderedlist:{title:"1. Нумерованный список",exec:"insertorderedlist"},outdent:{title:"&lt; Сдвиг влево",exec:"outdent"},indent:{title:"&gt; Сдвиг вправо",exec:"indent"},alignleft:{title:"Выравнивание по левому краю",exec:"JustifyLeft"},aligncenter:{title:"Выравнивание по центру",exec:"JustifyCenter"},alignright:{title:"Выравнивание по правому краю",exec:"JustifyRight"},alignall:{title:"Выравнивание по ширине",exec:"JustifyFull"}}},n,this.$editor.data()),this.init()};t.prototype={init:function(){this.document=this.opts.document?this.opts.document:document,this.window=this.opts.window?this.opts.window:window,this.$html=e('<textarea class="spacedText_html" name="'+this.$editor.attr("id")+'"></textarea>'),this.$html.addClass("spacedText_html").hide(),e(this.opts.htmlExternal).html(this.$html),this.$editor.addClass("spacedText").attr("contenteditable",!0);var t=this.$editor.html();if(t=this.to_p(t),this.$editor.html(t),this.update(!0),this.build_toolbar(),!1!==this.opts.activeButtons&&!1!==this.opts.toolbar){var n=e.proxy(function(){this.watch()},this);this.$editor.click(n).keyup(n)}if(!1===this.is_mobile()&&!1===this.is_old_safari()&&this.$editor.bind("paste",e.proxy(function(t){this.pasteRunning=!0,this.set_buff(),this.saveScroll=this.document.body.scrollTop;var n=this.extract_content();setTimeout(e.proxy(function(){var e=this.extract_content();this.$editor.append(n),this.restore_selection();var t=this.get_html_fragment(e);this.paste_clean_up(t),this.pasteRunning=!1},this),1)},this)),this.bind_keyup(),this.bind_keydown(),this.browser("mozilla")){this.$editor.click(e.proxy(function(){this.save_selection()},this));try{this.document.execCommand("enableObjectResizing",!1,!1),this.document.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}}this.opts.focus&&setTimeout(e.proxy(function(){this.$editor.focus()},this),1),"function"==typeof this.opts.callback&&this.opts.callback(this),this.$toolbar.find("a").attr("tabindex","-1"),this.$editor.on("click","a",e.proxy(function(e){this.show_link_menu(e)},this))},bind_keydown:function(){this.$editor.keydown(e.proxy(function(t){var n=t.keyCode||t.which,i=t.ctrlKey||t.metaKey;return this.opts.oneline&&13===n?(t.preventDefault(),!1):(i&&this.opts.hotkeys&&(90===n?!1!==this.opts.buffer?(t.preventDefault(),this.get_buff()):t.shiftKey?this.hotkey(t,"redo"):this.hotkey(t,"undo"):77===n?this.hotkey(t,"removeFormat"):66===n?this.hotkey(t,"bold"):73===n&&this.hotkey(t,"italic")),i||90===n||(this.opts.buffer=!1),this.opts.hotkeys&&!t.shiftKey&&9===n?this.hotkey(t,"indent"):this.opts.hotkeys&&t.shiftKey&&9===n&&this.hotkey(t,"outdent"),this.browser("webkit")&&-1===navigator.userAgent.indexOf("Chrome")?!t.shiftKey||13!==n||(t.preventDefault(),this.insert_node_at_caret(e("<span><br /></span>").get(0)),this.update(),!1):void 0)},this))},bind_keyup:function(){this.$editor.keyup(e.proxy(function(e){var t=e.keyCode||e.which;if(this.browser("mozilla")&&!this.pasteRunning&&this.save_selection(),8===t||46===t)return this.format_empty(e);13!==t||e.shiftKey||e.ctrlKey||e.metaKey||(this.browser("webkit")&&this.format_new_line(e),this.opts.convertLinks&&this.$editor.linkfinder()),this.update()},this))},build_toolbar:function(){if(!1===this.opts.toolbar)return!1;if(this.$toolbar=e("<ul>").addClass("spacedText_toolbar"),e(this.opts.toolbarExternal).html(this.$toolbar),e.each(this.opts.buttons,e.proxy(function(t,n){if(void 0!==this.opts.toolbar[n]){var i=this.opts.toolbar[n];if(this.$toolbar.append(e("<li>").append(this.build_btn(n,i))),"size"==n){var o=e('<ul class="size"><li><a href="javascript:void(0);" data-size="-3"></a></li><li><a href="javascript:void(0);" data-size="-2"></a></li><li><a href="javascript:void(0);" data-size="-1"></a></li><li><a href="javascript:void(0);" data-size="0"></a></li><li><a href="javascript:void(0);" data-size="+1"></a></li><li><a href="javascript:void(0);" data-size="+2"></a></li><li><a href="javascript:void(0);" data-size="+3"></a></li></ul>');o.on("mousedown","a",e.proxy(function(e){this.show_size_value(e)},this)),this.$toolbar.find(".spacedText_btn_size").parent().addClass("size").append(o)}}},this)),this.opts.buttons_extra.length>0){e.each(this.opts.buttons_extra,e.proxy(function(t,n){if(void 0!==this.opts.toolbar[n]){var i=this.opts.toolbar[n];this.$toolbar.append(e('<li class="spacedText_extra_only">').append(this.build_btn(n,i)))}},this));var t=e('<li><a class="spacedText_extra_btn"></a></li>');this.$toolbar.append(t),t.find("a").on("mousedown",e.proxy(function(e){return this.$toolbar.toggleClass("is_extra"),e.preventDefault(),!1},this))}},build_btn:function(t,n){var i=e('<a href="javascript:void(0);" title="'+n.title+'" class="spacedText_btn_'+t+'"></a>');return void 0===n.func?i.mousedown(e.proxy(function(){this.opts.visual?(-1!=e.inArray(t,this.opts.activeButtons)&&(this.all_btn_inactive(),this.set_btn_active(t)),this.browser("mozilla")&&this.$editor.focus(),this.execCommand(n.exec,t)):alertify.log("Функция недоступна в режиме HTML")},this)):"show"!==n.func&&i.mousedown(e.proxy(function(e){this.opts.visual||"toggle"===n.func?this[n.func](e):alertify.log("Функция недоступна в режиме HTML")},this)),void 0!==n.callback&&!1!==n.callback&&i.mousedown(e.proxy(function(e){this.opts.visual?n.callback(this,e,t):alertify.log("Функция недоступна в режиме HTML")},this)),i},get_btn:function(t){return!1!==this.opts.toolbar&&e(this.$toolbar.find("a.spacedText_btn_"+t))},set_btn_active:function(e){this.get_btn(e).parent().addClass("spacedText_act")},set_btn_inactive:function(e){this.get_btn(e).parent().removeClass("spacedText_act")},all_btn_inactive:function(){e.each(this.opts.activeButtons,e.proxy(function(e,t){this.set_btn_inactive(t)},this))},hotkey:function(e,t){e.preventDefault(),this.execCommand(t,!1)},change:function(){var e=this.get_code();"function"==typeof this.opts.on_change&&this.opts.on_change(e,this.$editor)},update:function(e){this.$html.val(this.$editor.html()),e||this.change()},set_code:function(e){e=this.strip_tags(e),this.$editor.html(e).focus(),this.update()},get_code:function(){var e="";return e=this.opts.visual?this.$editor.html():this.$html.val(),this.strip_tags(e)},paste_html_at_caret:function(e){var t,n;if(this.document.getSelection){if((t=this.window.getSelection()).getRangeAt&&t.rangeCount){(n=t.getRangeAt(0)).deleteContents();var i=this.document.createElement("div");i.innerHTML=e;for(var o,s,r=this.document.createDocumentFragment();o=i.firstChild;)s=r.appendChild(o);n.insertNode(r),s&&((n=n.cloneRange()).setStartAfter(s),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}else this.document.selection&&"Control"!=this.document.selection.type&&this.document.selection.createRange().pasteHTML(e)},destroy:function(){var t=this.get_code();this.$editor.removeClass("spacedText").removeAttr("contenteditable").html(t).show(),e(this.opts.toolbarExternal).empty(),this.modal_link&&this.modal_link.close(),this.modal_link_edit&&this.modal_link_edit.close()},watch:function(){var t=this.get_current_node();this.wait_size_change&&this.show_size_value(),this.all_btn_inactive(),e.each(this.opts.activeButtonsStates,e.proxy(function(n,i){0!=e(t).closest(n,this.$editor.get()[0]).length&&this.set_btn_active(i)},this));var n=e(t).closest(["p","div","h1","h2","h3","h4","h5","h6","blockquote","td"]);if(void 0!==n[0]&&void 0!==n[0].elem&&0!=e(n[0].elem).size())switch(e(n[0].elem).css("text-align")){case"right":this.set_btn_active("alignright");break;case"center":this.set_btn_active("aligncenter");break;case"justify":this.set_btn_active("alignall");break;default:this.set_btn_active("alignleft")}},set_buff:function(){this.save_selection(),this.opts.buffer=this.$editor.html()},get_buff:function(){if(!1===this.opts.buffer)return!1;this.$editor.html(this.opts.buffer),this.browser("msie")||this.restore_selection(),this.opts.buffer=!1},execCommand:function(t,n){if(0==this.opts.visual)return this.$html.focus(),!1;try{var i;if("inserthtml"===t)this.browser("msie")?(this.$editor.focus(),this.document.selection.createRange().pasteHTML(n)):this.paste_html_at_caret(n);else if("unlink"===t)i=this.get_parent_node(),"A"===e(i).get(0).tagName?e(i).replaceWith(e(i).text()):this.exec(t,n);else if("JustifyLeft"===t||"JustifyCenter"===t||"JustifyRight"===t||"JustifyFull"===t){i=this.get_current_node();var o=this.get_selection(),s=[];if(0==e(i).parents(".spacedText").size()){var r=e(o.anchorNode),a=e(o.focusNode);if("P"!=r.get(0).tagName&&(r=r.closest("p")),a="P"!=a.get(0).tagName?a.closest("p"):a.prev(),r.length<1&&a.length<1){var l=e(o.anchorNode).parent();if(l.is(".spacedText")&&l.find("p").length<1){var c=e("<p></p>").html(l.html());l.html(c),r=a=c}}var d=r.parent();if(1!=r.length||1!=a.length||!d.is(".spacedText"))return!1;if(r.get(0).offsetTop>a.get(0).offsetTop){var u=r;r=a,a=u}if(r.get(0)==a.get(0))s.push(r);else{var h=!1;if(d.children("p").each(function(t,n){var i=e(n);n==r.get(0)?(h=!0,s.push(i)):n==a.get(0)?(h=!1,s.push(i)):h&&s.push(i)}),s.length<1)return log("ERR: не смогли определить нужные элементы P для выравнивания"),!1}}else{if(-1!=e.inArray(e(i).get(0).tagName,["P","DIV","H1","H2","H3","H4","H5","H6","BLOCKQUOTE","TD"]))return this.exec(t,n),void this.update();s.push(e(i))}e.each(s,e.proxy(function(e,n){var i="left";"JustifyCenter"===t?i="center":"JustifyRight"===t?i="right":"JustifyFull"===t&&(i="justify"),!1===i?n.attr("align",""):n.attr("align",i)},this))}else if("formatblock"===t&&"blockquote"===n)if(i=this.get_current_node(),"BLOCKQUOTE"===e(i).get(0).tagName)if(this.browser("msie")){var p=e("<p>"+e(i).html()+"</p>");e(i).replaceWith(p)}else this.exec(t,"p");else if("P"===e(i).get(0).tagName){var f=e(i).parent();if("BLOCKQUOTE"===e(f).get(0).tagName){p=e("<p>"+e(i).html()+"</p>");e(f).replaceWith(p),this.set_selection(p[0],0,p[0],0)}else if(this.browser("msie")){p=e("<blockquote>"+e(i).html()+"</blockquote>");e(i).replaceWith(p)}else this.exec(t,n)}else this.exec(t,n);else"formatblock"!==t||"pre"!==n&&"p"!==n?("formatblock"===t&&this.browser("mozilla")&&this.$editor.focus(),this.exec(t,n)):this.exec(t,n);this.update(),this.old_ie()&&this.$editor.focus()}catch(e){}},exec:function(e,t){"formatblock"===e&&this.browser("msie")&&(t="<"+t+">"),this.document.execCommand(e,!1,t)},format_new_line:function(t){var n=this.get_parent_node();if("DIV"===n.nodeName&&"spacedText"===n.className){var i=e(this.get_current_node());if("DIV"===i.get(0).tagName&&(""===i.html()||"<br>"===i.html())){var o=e("<p>").append(i.clone().get(0).childNodes);i.replaceWith(o),o.html("<br>"),this.set_selection(o[0],0,o[0],0)}}},format_empty:function(t){var n=e.trim(this.$editor.html()),i=(n=n.replace(/<br\s?\/?>/i,"")).replace(/<p>\s?<\/p>/gi,"");if(""===n||""===i){t.preventDefault();var o=e(this.opts.emptyHtml).get(0);return this.$editor.html(o),this.set_selection(o,0,o,0),this.update(),!1}this.update()},to_p:function(t){if(""===(t=e.trim(t))||"<p></p>"===t)return this.opts.emptyHtml;this.opts.convertDivs&&(t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p>$2</p>"));var n=function(e,t,n){return e.replace(new RegExp(t,"g"),n)},i=function(e,i){return n(t,e,i)},o="(table|thead|tfoot|caption|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|form|blockquote|address|math|style|script|object|input|param|p|h[1-6])";return t+="\n",i("<br />\\s*<br />","\n\n"),i("(<"+o+"[^>]*>)","\n$1"),i("(</"+o+">)","$1\n\n"),i("\r\n|\r","\n"),i("\n\n+","\n\n"),i("\n?((.|\n)+?)$","<p>$1</p>\n"),i("<p>\\s*?</p>",""),i("<p>(<div[^>]*>\\s*)","$1<p>"),i("<p>([^<]+)\\s*?(</(div|address|form)[^>]*>)","<p>$1</p>$2"),i("<p>\\s*(</?"+o+"[^>]*>)\\s*</p>","$1"),i("<p>(<li.+?)</p>","$1"),i("<p>\\s*(</?"+o+"[^>]*>)","$1"),i("(</?"+o+"[^>]*>)\\s*</p>","$1"),i("(</?"+o+"[^>]*>)\\s*<br />","$1"),i("<br />(\\s*</?(p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)","$1"),-1!=t.indexOf("<pre")&&i("(<pre(.|\n)*?>)((.|\n)*?)</pre>",function(e,t,i,o){return n(t,"\\\\(['\"\\\\])","$1")+n(n(n(o,"<p>","\n"),"</p>|<br />",""),"\\\\(['\"\\\\])","$1")+"</pre>"}),i("\n</p>$","</p>")},strip_tags:function(t){var n=this.opts.allowedTags;return t.replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(t,i){return e.inArray(i.toLowerCase(),n)>"-1"?t:""})},paste_strip_tags:function(t){var n=this.opts.allowedTagsPaste;return t.replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(t,i){return e.inArray(i.toLowerCase(),n)>"-1"?t:""})},paste_clean_up:function(t){t=(t=(t=t.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"")).replace(/(&nbsp;){2,}/gi,"&nbsp;")).replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=this.paste_strip_tags(t)).replace(/<td><\/td>/gi,"[td]")).replace(/<td>&nbsp;<\/td>/gi,"[td]")).replace(/<td><br><\/td>/gi,"[td]")).replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]')).replace(/<img(.*?) src="(.*?)"(.*?)>/gi,'[img src="$2"]')).replace(/<(\w+)([\w\W]*?)>/gi,"<$1>")).replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,"")).replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,"")).replace(/\[td\]/gi,"<td>&nbsp;</td>")).replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>')).replace(/\[img(.*?)\]/gi,"<img$1>"),this.opts.convertDivs&&(t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p>$2</p>")),t=(t=(t=(t=t.replace(/<span>([\w\W]*?)<\/span>/gi,"$1")).replace(/\n{3,}/gi,"\n")).replace(/<p><p>/gi,"<p>")).replace(/<\/p><\/p>/gi,"</p>"),this.browser("mozilla")&&(t=t.replace(/<br>$/gi,"")),this.execCommand("inserthtml",t),e(this.document.body).scrollTop(this.saveScroll)},format_remove:function(t){var n=[],i=t.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null!==i&&e.each(i,function(e,i){t=t.replace(i,"prebuffer_"+e),n.push(i)}),t=(t=(t=(t=(t=(t=(t=t.replace(/\s{2,}/g," ")).replace(/\n/g," ")).replace(/[\t]*/g,"")).replace(/\n\s*\n/g,"\n")).replace(/^[\s\n]*/g,"")).replace(/[\s\n]*$/g,"")).replace(/>\s+</g,"><"),n&&(e.each(n,function(e,n){t=t.replace("prebuffer_"+e,n)}),n=[]),t},toggle:function(){var e;if(this.opts.visual){var t=this.$editor.innerHeight();this.$editor.hide(),e=this.$editor.html(),this.$html.height(t).val(e).show().focus(),this.set_btn_active("html"),this.opts.visual=!1}else this.$html.hide(),e=this.$html.val(),this.$editor.html(e).show(),""===this.$editor.html()&&this.set_code(this.opts.emptyHtml),this.$editor.focus(),this.set_btn_inactive("html"),this.opts.visual=!0,this.update()},get_html_fragment:function(e){var t=e.cloneNode(!0),n=this.document.createElement("div");return n.appendChild(t),n.innerHTML},extract_content:function(){for(var e,t=this.$editor.get(0),n=this.document.createDocumentFragment();e=t.firstChild;)n.appendChild(e);return n},save_selection:function(){this.$editor.focus(),this.savedSel=this.get_origin(),this.savedSelObj=this.get_focus()},restore_selection:function(){void 0!==this.savedSel&&null!==this.savedSel&&null!==this.savedSelObj&&"BODY"!==this.savedSel[0].tagName?0==e(this.savedSel[0]).closest(".spacedText").size()?this.$editor.focus():(this.browser("opera")&&this.$editor.focus(),this.set_selection(this.savedSel[0],this.savedSel[1],this.savedSelObj[0],this.savedSelObj[1]),this.browser("mozilla")&&this.$editor.focus()):this.$editor.focus()},get_selection:function(){var e=this.document;return this.window.getSelection?this.window.getSelection():e.getSelection?e.getSelection():e.selection.createRange()},has_selection:function(){if(this.old_ie()){var e,t=this.$editor.get(0);return t.focus(),t.document.selection?(e=t.document.selection.createRange())&&e.parentElement().document===t.document:!1}var n;return(n=this.get_selection())&&null!=n.focusNode&&null!=n.anchorNode},get_origin:function(){if(this.old_ie()){var e,t=this.$editor.get(0);return t.focus(),this.has_selection()?(e=t.document.selection.createRange(),this._get_boundary(t.document,e,!0)):null}var n;return(n=this.get_selection())&&null!=n.anchorNode?[n.anchorNode,n.anchorOffset]:null},get_focus:function(){if(this.old_ie()){var e,t=this.$editor.get(0);return t.focus(),this.has_selection()?(e=t.document.selection.createRange(),this._get_boundary(t.document,e,!1)):null}var n;return(n=this.get_selection())&&null!=n.focusNode?[n.focusNode,n.focusOffset]:null},set_selection:function(e,t,n,i){if(null==n&&(n=e),null==i&&(i=t),this.old_ie()){var o=this.$editor.get(0),s=o.document.body.createTextRange();return this._move_boundary(o.document,s,!1,n,i),this._move_boundary(o.document,s,!0,e,t),s.select()}var a=this.get_selection();if(a)if(a.collapse&&a.extend)a.collapse(e,t),a.extend(n,i);else{r=this.document.createRange(),r.setStart(e,t),r.setEnd(n,i);try{a.removeAllRanges()}catch(e){}a.addRange(r)}},get_current_node:function(){return void 0!==this.window.getSelection?this.get_selected_node().parentNode:void 0!==this.document.selection?this.get_selection().parentElement():void 0},get_parent_node:function(){return e(this.get_current_node()).parent()[0]},get_selected_node:function(){return this.old_ie()?this.get_selection().parentElement():void 0!==this.window.getSelection?this.window.getSelection().rangeCount>0&&this.get_selection().getRangeAt(0).commonAncestorContainer:void 0!==this.document.selection?this.get_selection():void 0},_get_boundary:function(e,t,n){var i,o,s,r,a;for(o=e.createElement("a"),(i=t.duplicate()).collapse(n),a=i.parentElement();a.insertBefore(o,o.previousSibling),i.moveToElementText(o),i.compareEndPoints(n?"StartToStart":"StartToEnd",t)>0&&null!=o.previousSibling;);return-1===i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&o.nextSibling?(i.setEndPoint(n?"EndToStart":"EndToEnd",t),s=o.nextSibling,r=i.text.length):(s=o.parentNode,r=this._get_child_index(o)),o.parentNode.removeChild(o),[s,r]},_move_boundary:function(e,t,n,i,o){var s,r,a,l,c;return c=0,s=this._is_text(i)?i:i.childNodes[o],r=this._is_text(i)?i.parentNode:i,this._is_text(i)&&(c=o),l=e.createElement("a"),r.insertBefore(l,s||null),(a=e.body.createTextRange()).moveToElementText(l),l.parentNode.removeChild(l),t.setEndPoint(n?"StartToStart":"EndToEnd",a),t[n?"moveStart":"moveEnd"]("character",c)},_is_text:function(e){return null!=e&&3==e.nodeType},_get_child_index:function(e){for(var t=0;e=e.previousSibling;)t++;return t},insert_node_at_caret:function(e){if(this.window.getSelection){var t=this.get_selection();if(t.rangeCount){var n=t.getRangeAt(0);n.collapse(!1),n.insertNode(e),(n=n.cloneRange()).selectNodeContents(e),n.collapse(!1),t.removeAllRanges(),t.addRange(n)}}else if(this.document.selection){var i=1===e.nodeType?e.outerHTML:e.data,o="marker_"+(""+Math.random()).slice(2);i+='<span id="'+o+'"></span>';var s=this.get_selection();s.collapse(!1),s.pasteHTML(i);var r=this.document.getElementById(o);s.moveToElementText(r),s.select(),r.parentNode.removeChild(r)}},show_size:function(e){return!1},show_size_value:function(t){if(this.execCommand("FontSize",2),this.$editor.find('font[size="2"]').length>0){if(this.wait_size_change){var n=this.wait_size_change_btn;this.wait_size_change=!1}else n=e(t.currentTarget);var i=1+parseInt(n.attr("data-size"))/parseInt(this.$editor.css("font-size"))+"em";this.$editor.find('font[size="2"]').replaceWith(function(){var t=e(this);return t.find('[style*="font-size"]').each(function(t,n){var i=e(this),o=i.attr("style");o=o.replace(/font-size:\s{0,3}([0-9]*){1,3}(px|pt|%|em);{0,1}/gi,""),i.attr("style",o)}),e('<span style="font-size: '+i+';">'+t.html()+"</span>")}),this.update()}else this.wait_size_change=!0,this.wait_size_change_btn=e(t.currentTarget)},show_color_font:function(t){var n,i=e(t.currentTarget),o=e(this.get_current_node()).eq(0).css("color");e.fn.spacedColors({value:o,element:i,element_offset:{top:50,left:257},opacity:!1,show:!0,change:e.proxy(function(e){n?(n.css("color",e.value),this.update()):n=this.set_color("font",e.value)},this),on_done:e.proxy(function(){},this),on_cancel:e.proxy(function(){n?(n.css("color",o),this.update()):n=this.set_color("font",o)},this)})},show_color_back:function(t){var n,i=e(t.currentTarget),o=e(this.get_current_node()).eq(0).css("background-color");e.fn.spacedColors({value:o,element:i,element_offset:{top:50,left:257},opacity:!1,show:!0,change:e.proxy(function(e){n?(n.css("background-color",e.value),this.update()):n=this.set_color("back",e.value)},this),on_done:e.proxy(function(){},this),on_cancel:e.proxy(function(){n?(n.css("background-color",o),this.update()):n=this.set_color("back",o)},this)})},set_color:function(t,n){var i;i="back"===t?this.browser("msie")?"BackColor":"hilitecolor":"forecolor",this.execCommand(i,n);var o=!1;return"forecolor"===i?(this.$editor.find("font").replaceWith(function(){var t=e('<span style="color: '+e(this).attr("color")+';">'+e(this).html()+"</span>");return o=o?o.add(t):t,t}),this.update(),o):this.browser("msie")&&"BackColor"===i?(this.$editor.find("font").replaceWith(function(){var t=e('<span style="color: '+e(this).attr("style")+';">'+e(this).html()+"</span>");return o=o?o.add(t):t,t}),this.update(),o):void 0},show_link_menu:function(t){var n=e(t.currentTarget),i="blank"==n.attr("target")?'target="_blank"':"",o=e("<div></div>"),s=e('<a style="margin-left: 15px">Редактировать</a>'),r=e("<a>удалить</a>");o.append('<a href="'+n.attr("href")+'" '+i+' title="Перейти по ссылке" class="is_link">'+n.attr("href")+"</a>").append(s).append("&nbsp;или&nbsp;").append(r);var a=spaced.modal.create({name:"spacedText_link",light:!0,width:"auto",data:o});this.modal_link=a,s.on("click",e.proxy(function(){a.close(),this.show_link(void 0,!0)},this)),r.on("click",e.proxy(function(){var t=this.get_selection();t.anchorNode&&"A"===e(t.anchorNode.parentNode).get(0).tagName?e(t.anchorNode.parentNode).replaceWith(e(t.anchorNode.parentNode).text()):this.exec("unlink",!1),a.close(),this.change()},this)),t.stopImmediatePropagation()},show_link:function(t,n){this.save_selection(),this.insert_link_node=!1;var i=this.get_selection(),o="",s="",r="";if(this.browser("msie")){var a=this.get_parent_node();"A"===a.nodeName?(this.insert_link_node=e(a),s=this.insert_link_node.text(),o=this.insert_link_node.attr("href"),r=this.insert_link_node.attr("target")):s=this.old_ie()?i.text:i.toString()}else i&&i.anchorNode&&"A"===i.anchorNode.parentNode.tagName?(o=i.anchorNode.parentNode.href,s=i.anchorNode.parentNode.text,r=i.anchorNode.parentNode.target,""===i.toString()&&(this.insert_link_node=i.anchorNode.parentNode)):s=i.toString();n&&(o=spaced.regex.link.get_link(o));var l=spaced.modal.create({name:"spacedText_link_edit",light:!0,width:270,options:{url:{type:"text",title:"URL",focus:!0,value:o,autocomplete:{source:"/admin/edit/link_search",minLength:1}},text:{type:"text",title:"Текст",value:s},is_blank:{type:"checkbox",title:"Открывать в новой вкладке",value:"_blank"==r}},buttons:{create:{title:n?"Изменить":"Создать",style:"light",click:e.proxy(function(e){if(e.url&&e.url.length){var t=spaced.regex.link.get_link(e.url);e.text.length<1&&(e.text=t),this.insert_link({url:t,is_blank:e.is_blank,text:e.text}),l.close()}},this)},cancel:{title:"Отмена",style:"cancel",width:104,align:"right",click:e.proxy(function(){},this)}},cancel:e.proxy(function(){},this)});this.modal_link_edit=l},insert_link:function(t){var n="",i="";t.is_blank&&(n=' target="_blank"',i="_blank");var o='<a href="'+t.url+'"'+n+">"+t.text+"</a>";this.$editor.focus(),this.restore_selection(),""!==t.text&&(this.insert_link_node?(e(this.insert_link_node).text(t.text),e(this.insert_link_node).attr("href",t.url),""!==i?e(this.insert_link_node).attr("target",i):e(this.insert_link_node).removeAttr("target"),this.update()):this.execCommand("inserthtml",o))},browser:function(e){var t=navigator.userAgent.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||/(trident) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return"version"==e?n[2]:"webkit"==e?"chrome"==n[1]||"webkit"==n[1]:n[1]==e},old_ie:function(){return!!(this.browser("msie")&&parseInt(this.browser("version"),10)<9)},is_mobile:function(){return!!/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)||!!/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)},is_old_safari:function(){var e=!1;this.browser("webkit")&&-1===navigator.userAgent.indexOf("Chrome")&&(this.browser("version").split(".")[0]<536&&(e=!0));return e}},e.fn.spacedText=function(n){return this.each(function(){var i=e(this),o=i.data("spacedText");o||i.data("spacedText",o=new t(this,n))})},e.fn.spacedTextDestroy=function(){this.each(function(){void 0!==e(this).data("spacedText")&&(e(this).data("spacedText").destroy(),e(this).removeData("spacedText"))})},e.fn.spacedTextGetCode=function(){return e.trim(this.data("spacedText").get_code())},e.fn.spacedTextSetCode=function(e){this.data("spacedText").set_code(e)},e.fn.spacedTextSetFocus=function(){this.data("spacedText").$editor.focus()}}(jQuery),function(e){var t=/(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,n=/(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g,i=function(){for(var o=this.childNodes,s=o.length;s--;){var r=o[s];if(3===r.nodeType){var a=r.nodeValue;a&&(a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(t,'$1<a href="http://$2">$2</a>$3').replace(n,'$1<a href="$2">$2</a>$5'),e(r).after(a).remove())}else 1!==r.nodeType||/^(a|button|textarea)$/i.test(r.tagName)||i.call(r)}};e.fn.linkfinder=function(){this.each(i)}}(jQuery),{}}),define("app/lib/spacedText/spacedText.css",()=>{}),define("app/pure_components/internal/Icon/Icon.js",function(){var e={};require("app/pure_components/internal/Icon/Icon.tea");const t=require("app/pure_components/internal/cover.js"),{Combo:n}=require("app/pure_components/internal/Combo/Combo.js"),{Dialog:i}=require("app/pure_components/internal/Dialog/Dialog.js");class o extends n{tpl_item(e){return html`
            <div class="lp-icon-panel-item" style=${{backgroundImage:"url("+base_url+"/"+e.value+")"}} />
        `}}o.defaultProps={items:()=>{for(var e=[],t=1;t<=841;t++)t>=285&&t<=289||t>=365&&t<=716||t>=743&&t<=766||e.push({value:lp.app.options.assets_url+"/ico/"+t+".png"});return e}};class s extends o{}s.defaultProps={items:()=>{for(var e=[],t=365;t<=716;t++)e.push({value:lp.app.options.assets_url+"/ico/"+t+".png"});return e},background:"#555"};return e.Icon=class extends t{configForm(){var e="white"==this.props.iconType?s:o;return html`
            <${i} title=${_t("Icons")} class="lp-icon-config-dialog">
                <${e} name=${this.props.name} />
            <//>
        `}render(){var e=this.configForm();return e&&(e.ref=this.configDialog),this.passValue(),html`<div class="lp-cover">
            <div class="ico" style="background-image: url(${base_url+"/"+this.value})">
                ${!lp.app.options.viewOnly&&html`
                    <div ref=${this.cover} class='cmp-cover fa fa-gear' onClick=${()=>this.openConfig()} />
                    ${e}
                
                `}
            </div>
        </div>`}},e.IconCombo=o,e.IconComboWhite=s,e}),define("app/pure_components/internal/Icon/Icon.tea",()=>!0),define("app/pure_components/internal/cover.js",function(){const e=require("app/pure_components/internal/editable.js");require("app/pure_components/internal/block.js");return class extends e{constructor(e){super(e),this.cover=preact.createRef(),this.configDialog=preact.createRef()}configForm(){return!1}openConfig(){let e=this.configDialog.current,t=this.cover.current.getBoundingClientRect();var n=document.documentElement.clientWidth,i=(document.documentElement.clientHeight,e.props.width),o=t.x+t.width;o+i>n&&(o=t.x-i-1)<0&&(o=0),e.open({x:o,y:t.y})}render(e,t){var n=this.configForm();return n&&(n.ref=this.configDialog),this.passValue(),html`<div class="lp-cover">
            ${this.tpl(e,t)}
            ${!lp.app.options.viewOnly&&html`
                <div ref=${this.cover} class='cmp-cover fa fa-gear' onClick=${()=>this.openConfig()} />
                ${n}
            `}
        </div>`}}}),define("app/pure_components/internal/Combo/Combo.js",function(){var e={};require("app/pure_components/internal/Combo/Combo.tea");const t=require("app/pure_components/internal/editable.js");class n extends t{tpl(e,t){return this.items=this.items||(e.items.call?e.items.call(this):e.items),html`
            <div class="lp-panel" style=${{background:e.background}}>
                ${this.items.map(e=>html`
                    <div 
                        class="lp-panel-item ${t.prevValue==e.value||!t.prevValue&&this.value==e.value?"lp-selected":""}"
                        onClick=${()=>{this.setState({prevValue:void 0}),this.setValue(e.value)}}
                        onMouseEnter=${()=>{this.setState({prevValue:this.value}),this.value!=e.value&&this.setValue(e.value)}}
                        onMouseLeave=${()=>{t.prevValue&&t.prevValue!=this.value&&this.setValue(t.prevValue),this.setState({prevValue:void 0})}}
                    >
                        ${this.tpl_item(e)}
                    </div>
                `)}
            </div>
        `}tpl_item(e){return html`${e.value}`}}return n.defaultProps={items:[],background:""},e.Combo=n,e}),define("app/pure_components/internal/Combo/Combo.tea",()=>!0),define("app/pure_components/internal/Color/Color.js",function(){var e={};require("app/pure_components/internal/Color/Color.tea");const{Combo:t}=require("app/pure_components/internal/Combo/Combo.js");class n extends t{tpl_item(e){return html`
            <div 
                class="lp-color-panel-item" 
                style="background-color:${e.color||e.value}"
            />
        `}}class i extends n{}return i.defaultProps={items:[{value:"#FFFFFF"},{value:"#F7F7F7"}]},e.Color=n,e.BlockColor=i,e}),define("app/pure_components/internal/Color/Color.tea",()=>!0),define("app/pure_components/internal/Switch/Switch.js",function(){var e={};require("app/pure_components/internal/Switch/Switch.tea");const t=require("app/pure_components/internal/editable.js");class n extends t{tpl(e,t){return html`
            <label class="lp-switch">
                <input type="checkbox" checked=${this.value||!1} onClick=${()=>this.setValue(!this.value)}/>
                <span class="lp-switch-slider"></span>
                <span class="lp-switch-label">${e.label}</span>
            </label>        
        `}}return n.defaultProps={label:""},e.Switch=n,e}),define("app/pure_components/internal/Switch/Switch.tea",()=>!0),require("app/app.js"),function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var i,o=!1,s=void 0!==e;s&&e.getComputedStyle?(i=t.createElement("div"),["","-webkit-","-moz-","-ms-"].some(function(e){try{i.style.position=e+"sticky"}catch(e){}return""!=i.style.position})&&(o=!0)):o=!0;var r=!1,a="undefined"!=typeof ShadowRoot,l={top:null,left:null},c=[];function d(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function u(e){return parseFloat(e)||0}function h(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t}var p=function(){function i(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),!(e instanceof HTMLElement))throw new Error("First argument must be HTMLElement");if(c.some(function(t){return t._node===e}))throw new Error("Stickyfill is already applied to this node");this._node=e,this._stickyMode=null,this._active=!1,c.push(this),this.refresh()}return n(i,[{key:"refresh",value:function(){if(!o&&!this._removed){this._active&&this._deactivate();var n=this._node,i=getComputedStyle(n),s={position:i.position,top:i.top,display:i.display,marginTop:i.marginTop,marginBottom:i.marginBottom,marginLeft:i.marginLeft,marginRight:i.marginRight,cssFloat:i.cssFloat};if(!isNaN(parseFloat(s.top))&&"table-cell"!=s.display&&"none"!=s.display){this._active=!0;var r=n.style.position;"sticky"!=i.position&&"-webkit-sticky"!=i.position||(n.style.position="static");var l=n.parentNode,c=a&&l instanceof ShadowRoot?l.host:l,p=n.getBoundingClientRect(),f=c.getBoundingClientRect(),m=getComputedStyle(c);this._parent={node:c,styles:{position:c.style.position},offsetHeight:c.offsetHeight},this._offsetToWindow={left:p.left,right:t.documentElement.clientWidth-p.right},this._offsetToParent={top:p.top-f.top-u(m.borderTopWidth),left:p.left-f.left-u(m.borderLeftWidth),right:-p.right+f.right-u(m.borderRightWidth)},this._styles={position:r,top:n.style.top,bottom:n.style.bottom,left:n.style.left,right:n.style.right,width:n.style.width,marginTop:n.style.marginTop,marginLeft:n.style.marginLeft,marginRight:n.style.marginRight};var g=u(s.top);this._limits={start:p.top+e.pageYOffset-g,end:f.top+e.pageYOffset+c.offsetHeight-u(m.borderBottomWidth)-n.offsetHeight-g-u(s.marginBottom)};var v=m.position;"absolute"!=v&&"relative"!=v&&(c.style.position="relative"),this._recalcPosition();var y=this._clone={};y.node=t.createElement("div"),d(y.node.style,{width:p.right-p.left+"px",height:p.bottom-p.top+"px",marginTop:s.marginTop,marginBottom:s.marginBottom,marginLeft:s.marginLeft,marginRight:s.marginRight,cssFloat:s.cssFloat,padding:0,border:0,borderSpacing:0,fontSize:"1em",position:"static"}),l.insertBefore(y.node,n),y.docOffsetTop=h(y.node)}}}},{key:"_recalcPosition",value:function(){if(this._active&&!this._removed){var e=l.top<=this._limits.start?"start":l.top>=this._limits.end?"end":"middle";if(this._stickyMode!=e){switch(e){case"start":d(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:this._offsetToParent.top+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"middle":d(this._node.style,{position:"fixed",left:this._offsetToWindow.left+"px",right:this._offsetToWindow.right+"px",top:this._styles.top,bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"end":d(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:"auto",bottom:0,width:"auto",marginLeft:0,marginRight:0})}this._stickyMode=e}}}},{key:"_fastCheck",value:function(){this._active&&!this._removed&&(Math.abs(h(this._clone.node)-this._clone.docOffsetTop)>1||Math.abs(this._parent.node.offsetHeight-this._parent.offsetHeight)>1)&&this.refresh()}},{key:"_deactivate",value:function(){var e=this;this._active&&!this._removed&&(this._clone.node.parentNode.removeChild(this._clone.node),delete this._clone,d(this._node.style,this._styles),delete this._styles,c.some(function(t){return t!==e&&t._parent&&t._parent.node===e._parent.node})||d(this._parent.node.style,this._parent.styles),delete this._parent,this._stickyMode=null,this._active=!1,delete this._offsetToWindow,delete this._offsetToParent,delete this._limits)}},{key:"remove",value:function(){var e=this;this._deactivate(),c.some(function(t,n){if(t._node===e._node)return c.splice(n,1),!0}),this._removed=!0}}]),i}(),f={stickies:c,Sticky:p,forceSticky:function(){o=!1,m(),this.refreshAll()},addOne:function(e){if(!(e instanceof HTMLElement)){if(!e.length||!e[0])return;e=e[0]}for(var t=0;t<c.length;t++)if(c[t]._node===e)return c[t];return new p(e)},add:function(e){if(e instanceof HTMLElement&&(e=[e]),e.length){for(var t=[],n=function(n){var i=e[n];return i instanceof HTMLElement?c.some(function(e){if(e._node===i)return t.push(e),!0})?"continue":void t.push(new p(i)):(t.push(void 0),"continue")},i=0;i<e.length;i++)n(i);return t}},refreshAll:function(){c.forEach(function(e){return e.refresh()})},removeOne:function(e){if(!(e instanceof HTMLElement)){if(!e.length||!e[0])return;e=e[0]}c.some(function(t){if(t._node===e)return t.remove(),!0})},remove:function(e){if(e instanceof HTMLElement&&(e=[e]),e.length)for(var t=function(t){var n=e[t];c.some(function(e){if(e._node===n)return e.remove(),!0})},n=0;n<e.length;n++)t(n)},removeAll:function(){for(;c.length;)c[0].remove()}};function m(){if(!r){r=!0,s(),e.addEventListener("scroll",s),e.addEventListener("resize",f.refreshAll),e.addEventListener("orientationchange",f.refreshAll);var n=void 0,i=void 0,o=void 0;"hidden"in t?(i="hidden",o="visibilitychange"):"webkitHidden"in t&&(i="webkitHidden",o="webkitvisibilitychange"),o?(t[i]||a(),t.addEventListener(o,function(){t[i]?clearInterval(n):a()})):a()}function s(){e.pageXOffset!=l.left?(l.top=e.pageYOffset,l.left=e.pageXOffset,f.refreshAll()):e.pageYOffset!=l.top&&(l.top=e.pageYOffset,l.left=e.pageXOffset,c.forEach(function(e){return e._recalcPosition()}))}function a(){n=setInterval(function(){c.forEach(function(e){return e._fastCheck()})},500)}}o||m(),"undefined"!=typeof module&&module.exports?module.exports=f:s&&(e.Stickyfill=f)}(window,document),function(e){"use strict";var t={ENTER:13,ESC:27,F1:112,F12:123,LEFT:37,RIGHT:39},n={modal:!0,basic:!1,frameless:!1,movable:!0,resizable:!0,closable:!0,closableByDimmer:!0,maximizable:!0,startMaximized:!1,pinnable:!0,pinned:!0,padding:!0,overflow:!0,maintainFocus:!0,transition:"pulse",autoReset:!0,notifier:{delay:5,position:"bottom-right"},glossary:{title:"AlertifyJS",ok:"OK",cancel:"Cancel",acccpt:"Accept",deny:"Deny",confirm:"Confirm",decline:"Decline",close:"Close",maximize:"Maximize",restore:"Restore"},theme:{input:"ajs-input",ok:"ajs-ok",cancel:"ajs-cancel"}},i=[];function o(e,t){e.className+=" "+t}function s(e,t){for(var n=t.split(" "),i=0;i<n.length;i+=1)e.className=e.className.replace(" "+n[i],"")}function r(){return"rtl"===e.getComputedStyle(document.body).direction}function a(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}function l(){return document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft}function c(e){for(;e.lastChild;)e.removeChild(e.lastChild)}var d=document.addEventListener?function(e,t,n,i){e.addEventListener(t,n,!0===i)}:document.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:void 0,u=document.removeEventListener?function(e,t,n,i){e.removeEventListener(t,n,!0===i)}:document.detachEvent?function(e,t,n){e.detachEvent("on"+t,n)}:void 0,h=function(){var e,t,n=!1,i={animation:"animationend",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(void 0!==document.documentElement.style[e]){t=i[e],n=!0;break}return{type:t,supported:n}}();function p(e,t){return function(){if(arguments.length>0){for(var n=[],i=0;i<arguments.length;i+=1)n.push(arguments[i]);return n.push(e),t.apply(e,n)}return t.apply(e,[null,e])}}function f(e,t){return{index:e,button:t,cancel:!1}}var m=function(){var n,m,g=[],y=null,b=e.navigator.userAgent.indexOf("Safari")>-1&&e.navigator.userAgent.indexOf("Chrome")<0,_={dimmer:'<div class="ajs-dimmer"></div>',modal:'<div class="ajs-modal" tabindex="0"></div>',dialog:'<div class="ajs-dialog" tabindex="0"></div>',reset:'<button class="ajs-reset"></button>',commands:'<div class="ajs-commands"><button class="ajs-pin"></button><button class="ajs-maximize"></button><button class="ajs-close"></button></div>',header:'<div class="ajs-header"></div>',body:'<div class="ajs-body"></div>',content:'<div class="ajs-content"></div>',footer:'<div class="ajs-footer"></div>',buttons:{primary:'<div class="ajs-primary ajs-buttons"></div>',auxiliary:'<div class="ajs-auxiliary ajs-buttons"></div>'},button:'<button class="ajs-button"></button>',resizeHandle:'<div class="ajs-handle"></div>'},x={base:"alertify",prefix:"ajs-",hidden:"ajs-hidden",noSelection:"ajs-no-selection",noOverflow:"ajs-no-overflow",noPadding:"ajs-no-padding",modeless:"ajs-modeless",movable:"ajs-movable",resizable:"ajs-resizable",capture:"ajs-capture",fixed:"ajs-fixed",closable:"ajs-closable",maximizable:"ajs-maximizable",maximize:"ajs-maximize",restore:"ajs-restore",pinnable:"ajs-pinnable",unpinned:"ajs-unpinned",pin:"ajs-pin",maximized:"ajs-maximized",animationIn:"ajs-in",animationOut:"ajs-out",shake:"ajs-shake",basic:"ajs-basic",frameless:"ajs-frameless"};function w(e){if(!e.__internal){var t;delete e.__init,null===y&&document.body.setAttribute("tabindex","0"),"function"==typeof e.setup?((t=e.setup()).options=t.options||{},t.focus=t.focus||{}):t={buttons:[],focus:{element:null,select:!1},options:{}},"object"!=typeof e.hooks&&(e.hooks={});var n=[];if(Array.isArray(t.buttons))for(var i=0;i<t.buttons.length;i+=1){var s=t.buttons[i],r={};for(var a in s)s.hasOwnProperty(a)&&(r[a]=s[a]);n.push(r)}var l=e.__internal={isOpen:!1,activeElement:document.body,timerIn:void 0,timerOut:void 0,buttons:n,focus:t.focus,options:{title:void 0,modal:void 0,basic:void 0,frameless:void 0,pinned:void 0,movable:void 0,resizable:void 0,autoReset:void 0,closable:void 0,closableByDimmer:void 0,maximizable:void 0,startMaximized:void 0,pinnable:void 0,transition:void 0,padding:void 0,overflow:void 0,onshow:void 0,onclose:void 0,onfocus:void 0},resetHandler:void 0,beginMoveHandler:void 0,beginResizeHandler:void 0,bringToFrontHandler:void 0,modalClickHandler:void 0,buttonsClickHandler:void 0,commandsClickHandler:void 0,transitionInHandler:void 0,transitionOutHandler:void 0},c={};c.root=document.createElement("div"),c.root.className=x.base+" "+x.hidden+" ",c.root.innerHTML=_.dimmer+_.modal,c.dimmer=c.root.firstChild,c.modal=c.root.lastChild,c.modal.innerHTML=_.dialog,c.dialog=c.modal.firstChild,c.dialog.innerHTML=_.reset+_.commands+_.header+_.body+_.footer+_.resizeHandle+_.reset,c.reset=[],c.reset.push(c.dialog.firstChild),c.reset.push(c.dialog.lastChild),c.commands={},c.commands.container=c.reset[0].nextSibling,c.commands.pin=c.commands.container.firstChild,c.commands.maximize=c.commands.pin.nextSibling,c.commands.close=c.commands.maximize.nextSibling,c.header=c.commands.container.nextSibling,c.body=c.header.nextSibling,c.body.innerHTML=_.content,c.content=c.body.firstChild,c.footer=c.body.nextSibling,c.footer.innerHTML=_.buttons.auxiliary+_.buttons.primary,c.resizeHandle=c.footer.nextSibling,c.buttons={},c.buttons.auxiliary=c.footer.firstChild,c.buttons.primary=c.buttons.auxiliary.nextSibling,c.buttons.primary.innerHTML=_.button,c.buttonTemplate=c.buttons.primary.firstChild,c.buttons.primary.removeChild(c.buttonTemplate);for(var d=0;d<e.__internal.buttons.length;d+=1){var u=e.__internal.buttons[d];for(var h in g.indexOf(u.key)<0&&g.push(u.key),u.element=c.buttonTemplate.cloneNode(),u.element.innerHTML=u.text,"string"==typeof u.className&&""!==u.className&&o(u.element,u.className),u.attrs)"className"!==h&&u.attrs.hasOwnProperty(h)&&u.element.setAttribute(h,u.attrs[h]);"auxiliary"===u.scope?c.buttons.auxiliary.appendChild(u.element):c.buttons.primary.appendChild(u.element)}e.elements=c,l.resetHandler=p(e,V),l.beginMoveHandler=p(e,ee),l.beginResizeHandler=p(e,ce),l.bringToFrontHandler=p(e,T),l.modalClickHandler=p(e,A),l.buttonsClickHandler=p(e,W),l.commandsClickHandler=p(e,j),l.transitionInHandler=p(e,Y),l.transitionOutHandler=p(e,U),e.set("title",void 0===t.options.title?v.defaults.glossary.title:t.options.title),e.set("modal",void 0===t.options.modal?v.defaults.modal:t.options.modal),e.set("basic",void 0===t.options.basic?v.defaults.basic:t.options.basic),e.set("frameless",void 0===t.options.frameless?v.defaults.frameless:t.options.frameless),e.set("movable",void 0===t.options.movable?v.defaults.movable:t.options.movable),e.set("resizable",void 0===t.options.resizable?v.defaults.resizable:t.options.resizable),e.set("autoReset",void 0===t.options.autoReset?v.defaults.autoReset:t.options.autoReset),e.set("closable",void 0===t.options.closable?v.defaults.closable:t.options.closable),e.set("closableByDimmer",void 0===t.options.closableByDimmer?v.defaults.closableByDimmer:t.options.closableByDimmer),e.set("maximizable",void 0===t.options.maximizable?v.defaults.maximizable:t.options.maximizable),e.set("startMaximized",void 0===t.options.startMaximized?v.defaults.startMaximized:t.options.startMaximized),e.set("pinnable",void 0===t.options.pinnable?v.defaults.pinnable:t.options.pinnable),e.set("pinned",void 0===t.options.pinned?v.defaults.pinned:t.options.pinned),e.set("transition",void 0===t.options.transition?v.defaults.transition:t.options.transition),e.set("padding",void 0===t.options.padding?v.defaults.padding:t.options.padding),e.set("overflow",void 0===t.options.overflow?v.defaults.overflow:t.options.overflow),"function"==typeof e.build&&e.build()}document.body.appendChild(e.elements.root)}function k(){for(var e=0,t=0;t<i.length;t+=1){var n=i[t];(n.isModal()||n.isMaximized())&&(e+=1)}0===e?s(document.body,x.noOverflow):e>0&&document.body.className.indexOf(x.noOverflow)<0&&o(document.body,x.noOverflow)}function C(e,t,n){"string"==typeof n&&s(e.elements.root,x.prefix+n),o(e.elements.root,x.prefix+t),y=e.elements.root.offsetWidth}function T(e,t){for(var n=i.indexOf(t)+1;n<i.length;n+=1)if(i[n].isModal())return;return document.body.lastChild!==t.elements.root&&(document.body.appendChild(t.elements.root),i.splice(i.indexOf(t),1),i.push(t),B(t)),!1}function S(e,t,n,i){switch(t){case"title":e.setHeader(i);break;case"modal":!function(e){e.get("modal")?(s(e.elements.root,x.modeless),e.isOpen()&&(me(e),P(e),k())):(o(e.elements.root,x.modeless),e.isOpen()&&(fe(e),P(e),k()))}(e);break;case"basic":!function(e){e.get("basic")?o(e.elements.root,x.basic):s(e.elements.root,x.basic)}(e);break;case"frameless":!function(e){e.get("frameless")?o(e.elements.root,x.frameless):s(e.elements.root,x.frameless)}(e);break;case"pinned":!function(e){e.get("pinned")?(s(e.elements.root,x.unpinned),e.isOpen()&&M(e)):(o(e.elements.root,x.unpinned),e.isOpen()&&!e.isModal()&&O(e))}(e);break;case"closable":!function(e){e.get("closable")?(o(e.elements.root,x.closable),function(e){d(e.elements.modal,"click",e.__internal.modalClickHandler)}(e)):(s(e.elements.root,x.closable),function(e){u(e.elements.modal,"click",e.__internal.modalClickHandler)}(e))}(e);break;case"maximizable":!function(e){e.get("maximizable")?o(e.elements.root,x.maximizable):s(e.elements.root,x.maximizable)}(e);break;case"pinnable":!function(e){e.get("pinnable")?o(e.elements.root,x.pinnable):s(e.elements.root,x.pinnable)}(e);break;case"movable":!function(e){e.get("movable")?(o(e.elements.root,x.movable),e.isOpen()&&ge(e)):(ie(e),s(e.elements.root,x.movable),e.isOpen()&&ve(e))}(e);break;case"resizable":!function(e){e.get("resizable")?(o(e.elements.root,x.resizable),e.isOpen()&&ye(e)):(he(e),s(e.elements.root,x.resizable),e.isOpen()&&be(e))}(e);break;case"transition":C(e,i,n);break;case"padding":i?s(e.elements.root,x.noPadding):e.elements.root.className.indexOf(x.noPadding)<0&&o(e.elements.root,x.noPadding);break;case"overflow":i?s(e.elements.root,x.noOverflow):e.elements.root.className.indexOf(x.noOverflow)<0&&o(e.elements.root,x.noOverflow);break;case"transition":C(e,i,n)}"function"==typeof e.hooks.onupdate&&e.hooks.onupdate.call(e,t,n,i)}function $(e,t,n,i,o){var s,r={op:void 0,items:[]};if(void 0===o&&"string"==typeof i)r.op="get",t.hasOwnProperty(i)?(r.found=!0,r.value=t[i]):(r.found=!1,r.value=void 0);else if(r.op="set","object"==typeof i){var a=i;for(var l in a)t.hasOwnProperty(l)?(t[l]!==a[l]&&(s=t[l],t[l]=a[l],n.call(e,l,s,a[l])),r.items.push({key:l,value:a[l],found:!0})):r.items.push({key:l,value:a[l],found:!1})}else{if("string"!=typeof i)throw new Error("args must be a string or object");t.hasOwnProperty(i)?(t[i]!==o&&(s=t[i],t[i]=o,n.call(e,i,s,o)),r.items.push({key:i,value:o,found:!0})):r.items.push({key:i,value:o,found:!1})}return r}function E(e){var t;I(e,function(e){return t=!0===e.invokeOnClose}),!t&&e.isOpen()&&e.close()}function j(e,t){switch(e.srcElement||e.target){case t.elements.commands.pin:t.isPinned()?D(t):H(t);break;case t.elements.commands.maximize:t.isMaximized()?L(t):N(t);break;case t.elements.commands.close:E(t)}return!1}function H(e){e.set("pinned",!0)}function D(e){e.set("pinned",!1)}function N(e){o(e.elements.root,x.maximized),e.isOpen()&&k()}function L(e){s(e.elements.root,x.maximized),e.isOpen()&&k()}function O(e){var t=l();e.elements.modal.style.marginTop=a()+"px",e.elements.modal.style.marginLeft=t+"px",e.elements.modal.style.marginRight=-t+"px"}function M(e){var t=parseInt(e.elements.modal.style.marginTop,10),n=parseInt(e.elements.modal.style.marginLeft,10);if(e.elements.modal.style.marginTop="",e.elements.modal.style.marginLeft="",e.elements.modal.style.marginRight="",e.isOpen()){var i=0,o=0;""!==e.elements.dialog.style.top&&(i=parseInt(e.elements.dialog.style.top,10)),e.elements.dialog.style.top=i+(t-a())+"px",""!==e.elements.dialog.style.left&&(o=parseInt(e.elements.dialog.style.left,10)),e.elements.dialog.style.left=o+(n-l())+"px"}}function P(e){e.get("modal")||e.get("pinned")?M(e):O(e)}var z=!1;function A(e,t){var n=e.srcElement||e.target;return z||n!==t.elements.modal||!0!==t.get("closableByDimmer")||E(t),z=!1,!1}var F=!1;function I(e,t){for(var n=0;n<e.__internal.buttons.length;n+=1){var i=e.__internal.buttons[n];if(!i.element.disabled&&t(i)){var o=f(n,i);"function"==typeof e.callback&&e.callback.apply(e,[o]),!1===o.cancel&&e.close();break}}}function W(e,t){var n=e.srcElement||e.target;I(t,function(e){return e.element===n&&(F=!0)})}function R(e){if(!F){var n=i[i.length-1],o=e.keyCode;return 0===n.__internal.buttons.length&&o===t.ESC&&!0===n.get("closable")?(E(n),!1):g.indexOf(o)>-1?(I(n,function(e){return e.key===o}),!1):void 0}F=!1}function q(e){var n=i[i.length-1],o=e.keyCode;if(o===t.LEFT||o===t.RIGHT){for(var s=n.__internal.buttons,r=0;r<s.length;r+=1)if(document.activeElement===s[r].element)switch(o){case t.LEFT:return void s[(r||s.length)-1].element.focus();case t.RIGHT:return void s[(r+1)%s.length].element.focus()}}else if(o<t.F12+1&&o>t.F1-1&&g.indexOf(o)>-1)return e.preventDefault(),e.stopPropagation(),I(n,function(e){return e.key===o}),!1}function B(e,t){if(t)t.focus();else{var n=e.__internal.focus,i=n.element;switch(typeof n.element){case"number":e.__internal.buttons.length>n.element&&(i=!0===e.get("basic")?e.elements.reset[0]:e.__internal.buttons[n.element].element);break;case"string":i=e.elements.body.querySelector(n.element);break;case"function":i=n.element.call(e)}null==i&&0===e.__internal.buttons.length&&(i=e.elements.reset[0]),i&&i.focus&&(i.focus(),n.select&&i.select&&i.select())}}function V(e,t){if(!t)for(var n=i.length-1;n>-1;n-=1)if(i[n].isModal()){t=i[n];break}if(t&&t.isModal()){var o,s=e.srcElement||e.target,r=s===t.elements.reset[1]||0===t.__internal.buttons.length&&s===document.body;r&&(t.get("maximizable")?o=t.elements.commands.maximize:t.get("closable")&&(o=t.elements.commands.close)),void 0===o&&("number"==typeof t.__internal.focus.element?s===t.elements.reset[0]?o=t.elements.buttons.auxiliary.firstChild||t.elements.buttons.primary.firstChild:r&&(o=t.elements.reset[0]):s===t.elements.reset[0]&&(o=t.elements.buttons.primary.lastChild||t.elements.buttons.auxiliary.lastChild)),B(t,o)}}function Y(t,i){clearTimeout(i.__internal.timerIn),B(i),e.scrollTo(n,m),F=!1,"function"==typeof i.get("onfocus")&&i.get("onfocus").call(i),u(i.elements.dialog,h.type,i.__internal.transitionInHandler),s(i.elements.root,x.animationIn)}function U(e,t){clearTimeout(t.__internal.timerOut),u(t.elements.dialog,h.type,t.__internal.transitionOutHandler),ie(t),he(t),t.isMaximized()&&!t.get("startMaximized")&&L(t),v.defaults.maintainFocus&&t.__internal.activeElement&&(t.__internal.activeElement.focus(),t.__internal.activeElement=null)}var G=null,X=0,K=0,Q="pageX",J="pageY";function Z(e,t){t.style.left=e[Q]-X+"px",t.style.top=e[J]-K+"px"}function ee(e,t){var n;if(null===oe&&!t.isMaximized()&&t.get("movable")&&("touchstart"===e.type?(e.preventDefault(),n=e.targetTouches[0],Q="clientX",J="clientY"):0===e.button&&(n=e),n)){G=t,X=n[Q],K=n[J];var i=t.elements.dialog;return o(i,x.capture),i.style.left&&(X-=parseInt(i.style.left,10)),i.style.top&&(K-=parseInt(i.style.top,10)),Z(n,i),o(document.body,x.noSelection),!1}}function te(e){var t;G&&("touchmove"===e.type?(e.preventDefault(),t=e.targetTouches[0]):0===e.button&&(t=e),t&&Z(t,G.elements.dialog))}function ne(){if(G){var e=G.elements.dialog;G=null,s(document.body,x.noSelection),s(e,x.capture)}}function ie(e){G=null;var t=e.elements.dialog;t.style.left=t.style.top=""}var oe=null,se=Number.Nan,re=0,ae=0,le=0;function ce(e,t){var n;if(!t.isMaximized()&&("touchstart"===e.type?(e.preventDefault(),n=e.targetTouches[0]):0===e.button&&(n=e),n)){oe=t,le=t.elements.resizeHandle.offsetHeight/2;var i=t.elements.dialog;return o(i,x.capture),se=parseInt(i.style.left,10),i.style.height=i.offsetHeight+"px",i.style.minHeight=t.elements.header.offsetHeight+t.elements.footer.offsetHeight+"px",i.style.width=(re=i.offsetWidth)+"px","none"!==i.style.maxWidth&&(i.style.minWidth=(ae=i.offsetWidth)+"px"),i.style.maxWidth="none",o(document.body,x.noSelection),!1}}function de(e){var t;oe&&("touchmove"===e.type?(e.preventDefault(),t=e.targetTouches[0]):0===e.button&&(t=e),t&&function(e,t,n){var i,o,s=t,a=0,l=0;do{a+=s.offsetLeft,l+=s.offsetTop}while(s=s.offsetParent);!0===n?(i=e.pageX,o=e.pageY):(i=e.clientX,o=e.clientY);var c=r();if(c&&(i=document.body.offsetWidth-i,isNaN(se)||(a=document.body.offsetWidth-a-t.offsetWidth)),t.style.height=o-l+le+"px",t.style.width=i-a+le+"px",!isNaN(se)){var d=.5*Math.abs(t.offsetWidth-re);c&&(d*=-1),t.offsetWidth>re?t.style.left=se+d+"px":t.offsetWidth>=ae&&(t.style.left=se-d+"px")}}(t,oe.elements.dialog,!oe.get("modal")&&!oe.get("pinned")))}function ue(){if(oe){var e=oe.elements.dialog;oe=null,s(document.body,x.noSelection),s(e,x.capture),z=!0}}function he(e){oe=null;var t=e.elements.dialog;"none"===t.style.maxWidth&&(t.style.maxWidth=t.style.minWidth=t.style.width=t.style.height=t.style.minHeight=t.style.left="",se=Number.Nan,re=ae=le=0)}function pe(){for(var e=0;e<i.length;e+=1){var t=i[e];t.get("autoReset")&&(ie(t),he(t))}}function fe(e){d(e.elements.dialog,"focus",e.__internal.bringToFrontHandler,!0)}function me(e){u(e.elements.dialog,"focus",e.__internal.bringToFrontHandler,!0)}function ge(e){d(e.elements.header,"mousedown",e.__internal.beginMoveHandler),d(e.elements.header,"touchstart",e.__internal.beginMoveHandler)}function ve(e){u(e.elements.header,"mousedown",e.__internal.beginMoveHandler),u(e.elements.header,"touchstart",e.__internal.beginMoveHandler)}function ye(e){d(e.elements.resizeHandle,"mousedown",e.__internal.beginResizeHandler),d(e.elements.resizeHandle,"touchstart",e.__internal.beginResizeHandler)}function be(e){u(e.elements.resizeHandle,"mousedown",e.__internal.beginResizeHandler),u(e.elements.resizeHandle,"touchstart",e.__internal.beginResizeHandler)}return{__init:w,isOpen:function(){return this.__internal.isOpen},isModal:function(){return this.elements.root.className.indexOf(x.modeless)<0},isMaximized:function(){return this.elements.root.className.indexOf(x.maximized)>-1},isPinned:function(){return this.elements.root.className.indexOf(x.unpinned)<0},maximize:function(){return this.isMaximized()||N(this),this},restore:function(){return this.isMaximized()&&L(this),this},pin:function(){return this.isPinned()||H(this),this},unpin:function(){return this.isPinned()&&D(this),this},moveTo:function(e,t){if(!isNaN(e)&&!isNaN(t)){var n=this.elements.dialog,i=n,o=0,s=0;n.style.left&&(o-=parseInt(n.style.left,10)),n.style.top&&(s-=parseInt(n.style.top,10));do{o+=i.offsetLeft,s+=i.offsetTop}while(i=i.offsetParent);var a=e-o,l=t-s;r()&&(a*=-1),n.style.left=a+"px",n.style.top=l+"px"}return this},resizeTo:function(e,t){var n=parseFloat(e),i=parseFloat(t),o=/(\d*\.\d+|\d+)%/;if(!isNaN(n)&&!isNaN(i)&&!0===this.get("resizable")){(""+e).match(o)&&(n=n/100*document.documentElement.clientWidth),(""+t).match(o)&&(i=i/100*document.documentElement.clientHeight);var s=this.elements.dialog;"none"!==s.style.maxWidth&&(s.style.minWidth=(ae=s.offsetWidth)+"px"),s.style.maxWidth="none",s.style.minHeight=this.elements.header.offsetHeight+this.elements.footer.offsetHeight+"px",s.style.width=n+"px",s.style.height=i+"px"}return this},setting:function(e,t){var n=this,i=$(this,this.__internal.options,function(e,t,i){S(n,e,t,i)},e,t);if("get"===i.op)return i.found?i.value:void 0!==this.settings?$(this,this.settings,this.settingUpdated||function(){},e,t).value:void 0;if("set"===i.op){if(i.items.length>0)for(var o=this.settingUpdated||function(){},s=0;s<i.items.length;s+=1){var r=i.items[s];r.found||void 0===this.settings||$(this,this.settings,o,r.key,r.value)}return this}},set:function(e,t){return this.setting(e,t),this},get:function(e){return this.setting(e)},setHeader:function(t){return"string"==typeof t?(c(this.elements.header),this.elements.header.innerHTML=t):t instanceof e.HTMLElement&&this.elements.header.firstChild!==t&&(c(this.elements.header),this.elements.header.appendChild(t)),this},setContent:function(t){return"string"==typeof t?(c(this.elements.content),this.elements.content.innerHTML=t):t instanceof e.HTMLElement&&this.elements.content.firstChild!==t&&(c(this.elements.content),this.elements.content.appendChild(t)),this},showModal:function(e){return this.show(!0,e)},show:function(t,r){if(w(this),this.__internal.isOpen){ie(this),he(this),o(this.elements.dialog,x.shake);var a=this;setTimeout(function(){s(a.elements.dialog,x.shake)},200)}else{if(this.__internal.isOpen=!0,i.push(this),v.defaults.maintainFocus&&(this.__internal.activeElement=document.activeElement),"function"==typeof this.prepare&&this.prepare(),c=this,1===i.length&&(d(e,"resize",pe),d(document.body,"keyup",R),d(document.body,"keydown",q),d(document.body,"focus",V),d(document.documentElement,"mousemove",te),d(document.documentElement,"touchmove",te),d(document.documentElement,"mouseup",ne),d(document.documentElement,"touchend",ne),d(document.documentElement,"mousemove",de),d(document.documentElement,"touchmove",de),d(document.documentElement,"mouseup",ue),d(document.documentElement,"touchend",ue)),d(c.elements.commands.container,"click",c.__internal.commandsClickHandler),d(c.elements.footer,"click",c.__internal.buttonsClickHandler),d(c.elements.reset[0],"focus",c.__internal.resetHandler),d(c.elements.reset[1],"focus",c.__internal.resetHandler),F=!0,d(c.elements.dialog,h.type,c.__internal.transitionInHandler),c.get("modal")||fe(c),c.get("resizable")&&ye(c),c.get("movable")&&ge(c),void 0!==t&&this.set("modal",t),n=e.scrollX,m=e.scrollY,k(),"string"==typeof r&&""!==r&&(this.__internal.className=r,o(this.elements.root,r)),this.get("startMaximized")?this.maximize():this.isMaximized()&&L(this),P(this),s(this.elements.root,x.animationOut),o(this.elements.root,x.animationIn),clearTimeout(this.__internal.timerIn),this.__internal.timerIn=setTimeout(this.__internal.transitionInHandler,h.supported?1e3:100),b){var l=this.elements.root;l.style.display="none",setTimeout(function(){l.style.display="block"},0)}y=this.elements.root.offsetWidth,s(this.elements.root,x.hidden),"function"==typeof this.hooks.onshow&&this.hooks.onshow.call(this),"function"==typeof this.get("onshow")&&this.get("onshow").call(this)}var c;return this},close:function(){var t;return this.__internal.isOpen&&(t=this,1===i.length&&(u(e,"resize",pe),u(document.body,"keyup",R),u(document.body,"keydown",q),u(document.body,"focus",V),u(document.documentElement,"mousemove",te),u(document.documentElement,"mouseup",ne),u(document.documentElement,"mousemove",de),u(document.documentElement,"mouseup",ue)),u(t.elements.commands.container,"click",t.__internal.commandsClickHandler),u(t.elements.footer,"click",t.__internal.buttonsClickHandler),u(t.elements.reset[0],"focus",t.__internal.resetHandler),u(t.elements.reset[1],"focus",t.__internal.resetHandler),d(t.elements.dialog,h.type,t.__internal.transitionOutHandler),t.get("modal")||me(t),t.get("movable")&&ve(t),t.get("resizable")&&be(t),s(this.elements.root,x.animationIn),o(this.elements.root,x.animationOut),clearTimeout(this.__internal.timerOut),this.__internal.timerOut=setTimeout(this.__internal.transitionOutHandler,h.supported?1e3:100),o(this.elements.root,x.hidden),y=this.elements.modal.offsetWidth,void 0!==this.__internal.className&&""!==this.__internal.className&&s(this.elements.root,this.__internal.className),"function"==typeof this.hooks.onclose&&this.hooks.onclose.call(this),"function"==typeof this.get("onclose")&&this.get("onclose").call(this),i.splice(i.indexOf(this),1),this.__internal.isOpen=!1,k()),this},closeOthers:function(){return v.closeAll(this),this}}}(),g=function(){var t,n=[],i={base:"alertify-notifier",message:"ajs-message",top:"ajs-top",right:"ajs-right",bottom:"ajs-bottom",left:"ajs-left",visible:"ajs-visible",hidden:"ajs-hidden"};function r(e){e.__internal||(e.__internal={position:v.defaults.notifier.position,delay:v.defaults.notifier.delay},t=document.createElement("DIV"),a(e)),t.parentNode!==document.body&&document.body.appendChild(t)}function a(e){switch(t.className=i.base,e.__internal.position){case"top-right":o(t,i.top+" "+i.right);break;case"top-left":o(t,i.top+" "+i.left);break;case"bottom-left":o(t,i.bottom+" "+i.left);break;default:case"bottom-right":o(t,i.bottom+" "+i.right)}}function l(r,a){function l(e,t){t.dismiss(!0)}function f(e,n){u(n.element,h.type,f),t.removeChild(n.element)}function m(e){clearTimeout(e.__internal.timer),clearTimeout(e.__internal.transitionTimeout)}return(v={element:r,push:function(e,s){if(!this.__internal.pushed){var r,a;switch((l=this).__internal.pushed=!0,n.push(l),m(this),arguments.length){case 0:a=this.__internal.delay;break;case 1:"number"==typeof e?a=e:(r=e,a=this.__internal.delay);break;case 2:r=e,a=s}return void 0!==r&&this.setContent(r),g.__internal.position.indexOf("top")<0?t.appendChild(this.element):t.insertBefore(this.element,t.firstChild),this.element.offsetWidth,o(this.element,i.visible),d(this.element,"click",this.__internal.clickHandler),this.delay(a)}var l;return this},ondismiss:function(){},callback:a,dismiss:function(e){var o;return this.__internal.pushed&&(m(this),"function"==typeof this.ondismiss&&!1===this.ondismiss.call(this)||(u(this.element,"click",this.__internal.clickHandler),void 0!==this.element&&this.element.parentNode===t&&(this.__internal.transitionTimeout=setTimeout(this.__internal.transitionEndHandler,h.supported?1e3:100),s(this.element,i.visible),"function"==typeof this.callback&&this.callback.call(this,e)),o=this,n.splice(n.indexOf(o),1),o.__internal.pushed=!1)),this},delay:function(e){if(m(this),this.__internal.delay=void 0===e||isNaN(+e)?g.__internal.delay:+e,this.__internal.delay>0){var t=this;this.__internal.timer=setTimeout(function(){t.dismiss()},1e3*this.__internal.delay)}return this},setContent:function(t){return"string"==typeof t?(c(this.element),this.element.innerHTML=t):t instanceof e.HTMLElement&&this.element.firstChild!==t&&(c(this.element),this.element.appendChild(t)),this},dismissOthers:function(){return g.dismissAll(this),this}}).__internal||(v.__internal={pushed:!1,delay:void 0,timer:void 0,clickHandler:void 0,transitionEndHandler:void 0,transitionTimeout:void 0},v.__internal.clickHandler=p(v,l),v.__internal.transitionEndHandler=p(v,f)),v;var v}return{setting:function(e,t){if(r(this),void 0===t)return this.__internal[e];switch(e){case"position":this.__internal.position=t,a(this);break;case"delay":this.__internal.delay=t}return this},set:function(e,t){return this.setting(e,t),this},get:function(e){return this.setting(e)},create:function(e,t){r(this);var n=document.createElement("div");return n.className=i.message+("string"==typeof e&&""!==e?" ajs-"+e:""),l(n,t)},dismissAll:function(e){for(var t=n.slice(0),i=0;i<t.length;i+=1){var o=t[i];void 0!==e&&e===o||o.dismiss()}}}}();var v=new function(){var e={};function t(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function o(t){var n=e[t].dialog;return n&&"function"==typeof n.__init&&n.__init(n),n}return{defaults:n,dialog:function(n,i,s,r){if("function"!=typeof i)return o(n);if(this.hasOwnProperty(n))throw new Error("alertify.dialog: name already exists");var a=function(n,i,o,s){var r={dialog:null,factory:i};return void 0!==s&&(r.factory=function(){return t(new e[s].factory,new i)}),o||(r.dialog=t(new r.factory,m)),e[n]=r}(n,i,s,r);this[n]=s?function(){if(0===arguments.length)return a.dialog;var e=t(new a.factory,m);return e&&"function"==typeof e.__init&&e.__init(e),e.main.apply(e,arguments),e.show.apply(e)}:function(){if(a.dialog&&"function"==typeof a.dialog.__init&&a.dialog.__init(a.dialog),0===arguments.length)return a.dialog;var e=a.dialog;return e.main.apply(a.dialog,arguments),e.show.apply(a.dialog)}},closeAll:function(e){for(var t=i.slice(0),n=0;n<t.length;n+=1){var o=t[n];void 0!==e&&e===o||o.close()}},setting:function(e,t,n){if("notifier"===e)return g.setting(t,n);var i=o(e);return i?i.setting(t,n):void 0},set:function(e,t,n){return this.setting(e,t,n)},get:function(e,t){return this.setting(e,t)},notify:function(e,t,n,i){return g.create(t,i).push(e,n)},message:function(e,t,n){return g.create(null,n).push(e,t)},success:function(e,t,n){return g.create("success",n).push(e,t)},error:function(e,t,n){return g.create("error",n).push(e,t)},warning:function(e,t,n){return g.create("warning",n).push(e,t)},dismissAll:function(){g.dismissAll()}}};v.dialog("alert",function(){return{main:function(e,t,n){var i,o,s;switch(arguments.length){case 1:o=e;break;case 2:"function"==typeof t?(o=e,s=t):(i=e,o=t);break;case 3:i=e,o=t,s=n}return this.set("title",i),this.set("message",o),this.set("onok",s),this},setup:function(){return{buttons:[{text:v.defaults.glossary.ok,key:t.ESC,invokeOnClose:!0,className:v.defaults.theme.ok}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(e){this.setContent(e)},settings:{message:void 0,onok:void 0,label:void 0},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=n)}},callback:function(e){if("function"==typeof this.get("onok")){var t=this.get("onok").call(this,e);void 0!==t&&(e.cancel=!t)}}}}),v.dialog("confirm",function(){var e={timer:null,index:null,text:null,duration:null,task:function(t,i){if(i.isOpen()){if(i.__internal.buttons[e.index].element.innerHTML=e.text+" (&#8207;"+e.duration+"&#8207;) ",e.duration-=1,-1===e.duration){n(i);var o=i.__internal.buttons[e.index],s=f(e.index,o);"function"==typeof i.callback&&i.callback.apply(i,[s]),!1!==s.close&&i.close()}}else n(i)}};function n(t){null!==e.timer&&(clearInterval(e.timer),e.timer=null,t.__internal.buttons[e.index].element.innerHTML=e.text)}function i(t,i,o){n(t),e.duration=o,e.index=i,e.text=t.__internal.buttons[i].element.innerHTML,e.timer=setInterval(p(t,e.task),1e3),e.task(null,t)}return{main:function(e,t,n,i){var o,s,r,a;switch(arguments.length){case 1:s=e;break;case 2:s=e,r=t;break;case 3:s=e,r=t,a=n;break;case 4:o=e,s=t,r=n,a=i}return this.set("title",o),this.set("message",s),this.set("onok",r),this.set("oncancel",a),this},setup:function(){return{buttons:[{text:v.defaults.glossary.ok,key:t.ENTER,className:v.defaults.theme.ok},{text:v.defaults.glossary.cancel,key:t.ESC,invokeOnClose:!0,className:v.defaults.theme.cancel}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){},prepare:function(){},setMessage:function(e){this.setContent(e)},settings:{message:null,labels:null,onok:null,oncancel:null,defaultFocus:null,reverseButtons:null},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"labels":"ok"in n&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].text=n.ok,this.__internal.buttons[0].element.innerHTML=n.ok),"cancel"in n&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].text=n.cancel,this.__internal.buttons[1].element.innerHTML=n.cancel);break;case"reverseButtons":!0===n?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);break;case"defaultFocus":this.__internal.focus.element="ok"===n?0:1}},callback:function(e){var t;switch(n(this),e.index){case 0:"function"==typeof this.get("onok")&&void 0!==(t=this.get("onok").call(this,e))&&(e.cancel=!t);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(t=this.get("oncancel").call(this,e))&&(e.cancel=!t)}},autoOk:function(e){return i(this,0,e),this},autoCancel:function(e){return i(this,1,e),this}}}),v.dialog("prompt",function(){var n=document.createElement("INPUT"),i=document.createElement("P");return{main:function(e,t,n,i,o){var s,r,a,l,c;switch(arguments.length){case 1:r=e;break;case 2:r=e,a=t;break;case 3:r=e,a=t,l=n;break;case 4:r=e,a=t,l=n,c=i;break;case 5:s=e,r=t,a=n,l=i,c=o}return this.set("title",s),this.set("message",r),this.set("value",a),this.set("onok",l),this.set("oncancel",c),this},setup:function(){return{buttons:[{text:v.defaults.glossary.ok,key:t.ENTER,className:v.defaults.theme.ok},{text:v.defaults.glossary.cancel,key:t.ESC,invokeOnClose:!0,className:v.defaults.theme.cancel}],focus:{element:n,select:!0},options:{maximizable:!1,resizable:!1}}},build:function(){n.className=v.defaults.theme.input,n.setAttribute("type","text"),n.value=this.get("value"),this.elements.content.appendChild(i),this.elements.content.appendChild(n)},prepare:function(){},setMessage:function(t){"string"==typeof t?(c(i),i.innerHTML=t):t instanceof e.HTMLElement&&i.firstChild!==t&&(c(i),i.appendChild(t))},settings:{message:void 0,labels:void 0,onok:void 0,oncancel:void 0,value:"",type:"text",reverseButtons:void 0},settingUpdated:function(e,t,i){switch(e){case"message":this.setMessage(i);break;case"value":n.value=i;break;case"type":switch(i){case"text":case"color":case"date":case"datetime-local":case"email":case"month":case"number":case"password":case"search":case"tel":case"time":case"week":n.type=i;break;default:n.type="text"}break;case"labels":i.ok&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=i.ok),i.cancel&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].element.innerHTML=i.cancel);break;case"reverseButtons":!0===i?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element)}},callback:function(e){var t;switch(e.index){case 0:this.settings.value=n.value,"function"==typeof this.get("onok")&&void 0!==(t=this.get("onok").call(this,e,this.settings.value))&&(e.cancel=!t);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(t=this.get("oncancel").call(this,e))&&(e.cancel=!t)}}}}),"object"==typeof module&&"object"==typeof module.exports?module.exports=v:"function"==typeof define&&define.amd?define([],function(){return v}):e.alertify||(e.alertify=v)}("undefined"!=typeof window?window:this),function(e,t,n,i){"use strict";var o=n("html"),s=n(e),r=n(t),a=n.fancybox=function(){a.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),c=null,d=void 0!==t.createTouch,u=function(e){return e&&e.hasOwnProperty&&e instanceof n},h=function(e){return e&&"string"===n.type(e)},p=function(e){return h(e)&&e.indexOf("%")>0},f=function(e,t){var n=parseInt(e,10)||0;return t&&p(e)&&(n=a.getViewport()[t]/100*n),Math.ceil(n)},m=function(e,t){return f(e,t)+"px"};n.extend(a,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!d,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeChange:n.noop,beforeClose:n.noop,afterClose:n.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){if(e&&(n.isPlainObject(t)||(t={}),!1!==a.close(!0)))return n.isArray(e)||(e=u(e)?n(e).get():[e]),n.each(e,function(i,o){var s,r,l,c,d,p,f,m={};"object"===n.type(o)&&(o.nodeType&&(o=n(o)),u(o)?(m={href:o.data("fancybox-href")||o.attr("href"),title:o.data("fancybox-title")||o.attr("title"),isDom:!0,element:o},n.metadata&&n.extend(!0,m,o.metadata())):m=o),s=t.href||m.href||(h(o)?o:null),r=void 0!==t.title?t.title:m.title||"",!(c=(l=t.content||m.content)?"html":t.type||m.type)&&m.isDom&&((c=o.data("fancybox-type"))||(c=(d=o.prop("class").match(/fancybox\.(\w+)/))?d[1]:null)),h(s)&&(c||(a.isImage(s)?c="image":a.isSWF(s)?c="swf":"#"===s.charAt(0)?c="inline":h(o)&&(c="html",l=o)),"ajax"===c&&(p=s.split(/\s+/,2),s=p.shift(),f=p.shift())),l||("inline"===c?s?l=n(h(s)?s.replace(/.*(?=#[^\s]+$)/,""):s):m.isDom&&(l=o):"html"===c?l=s:c||s||!m.isDom||(c="inline",l=o)),n.extend(m,{href:s,type:c,content:l,title:r,selector:f}),e[i]=m}),a.opts=n.extend(!0,{},a.defaults,t),void 0!==t.keys&&(a.opts.keys=!!t.keys&&n.extend({},a.defaults.keys,t.keys)),a.group=e,a._start(a.opts.index)},cancel:function(){var e=a.coming;e&&!1!==a.trigger("onCancel")&&(a.hideLoading(),a.ajaxLoad&&a.ajaxLoad.abort(),a.ajaxLoad=null,a.imgPreload&&(a.imgPreload.onload=a.imgPreload.onerror=null),e.wrap&&e.wrap.stop(!0,!0).trigger("onReset").remove(),a.coming=null,a.current||a._afterZoomOut(e))},close:function(e){a.cancel(),!1!==a.trigger("beforeClose")&&(a.unbindEvents(),a.isActive&&(a.isOpen&&!0!==e?(a.isOpen=a.isOpened=!1,a.isClosing=!0,n(".fancybox-item, .fancybox-nav").remove(),a.wrap.stop(!0,!0).removeClass("fancybox-opened"),a.transitions[a.current.closeMethod]()):(n(".fancybox-wrap").stop(!0).trigger("onReset").remove(),a._afterZoomOut())))},play:function(e){var t=function(){clearTimeout(a.player.timer)},n=function(){t(),a.current&&a.player.isActive&&(a.player.timer=setTimeout(a.next,a.current.playSpeed))},i=function(){t(),r.unbind(".player"),a.player.isActive=!1,a.trigger("onPlayEnd")};!0===e||!a.player.isActive&&!1!==e?a.current&&(a.current.loop||a.current.index<a.group.length-1)&&(a.player.isActive=!0,r.bind({"onCancel.player beforeClose.player":i,"onUpdate.player":n,"beforeLoad.player":t}),n(),a.trigger("onPlayStart")):i()},next:function(e){var t=a.current;t&&(h(e)||(e=t.direction.next),a.jumpto(t.index+1,e,"next"))},prev:function(e){var t=a.current;t&&(h(e)||(e=t.direction.prev),a.jumpto(t.index-1,e,"prev"))},jumpto:function(e,t,n){var i=a.current;i&&(e=f(e),a.direction=t||i.direction[e>=i.index?"next":"prev"],a.router=n||"jumpto",i.loop&&(e<0&&(e=i.group.length+e%i.group.length),e%=i.group.length),void 0!==i.group[e]&&(a.cancel(),a._start(e)))},reposition:function(e,t){var i,o=a.current,s=o?o.wrap:null;s&&(i=a._getPosition(t),e&&"scroll"===e.type?(delete i.position,s.stop(!0,!0).animate(i,200)):(s.css(i),o.pos=n.extend({},o.dim,i)))},update:function(e){var t=e&&e.type,n=!t||"orientationchange"===t;n&&(clearTimeout(c),c=null),a.isOpen&&!c&&(c=setTimeout(function(){var i=a.current;i&&!a.isClosing&&(a.wrap.removeClass("fancybox-tmp"),(n||"load"===t||"resize"===t&&i.autoResize)&&a._setDimension(),"scroll"===t&&i.canShrink||a.reposition(e),a.trigger("onUpdate"),c=null)},n&&!d?0:300))},toggle:function(e){a.isOpen&&(a.current.fitToView="boolean"===n.type(e)?e:!a.current.fitToView,d&&(a.wrap.removeAttr("style").addClass("fancybox-tmp"),a.trigger("onUpdate")),a.update())},hideLoading:function(){r.unbind(".loading"),n("#fancybox-loading").remove()},showLoading:function(){var e,t;a.hideLoading(),e=n('<div id="fancybox-loading"><div></div></div>').click(a.cancel).appendTo("body"),r.bind("keydown.loading",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),a.cancel())}),a.defaults.fixed||(t=a.getViewport(),e.css({position:"absolute",top:.5*t.h+t.y,left:.5*t.w+t.x}))},getViewport:function(){var t=a.current&&a.current.locked||!1,n={x:s.scrollLeft(),y:s.scrollTop()};return t?(n.w=t[0].clientWidth,n.h=t[0].clientHeight):(n.w=d&&e.innerWidth?e.innerWidth:s.width(),n.h=d&&e.innerHeight?e.innerHeight:s.height()),n},unbindEvents:function(){a.wrap&&u(a.wrap)&&a.wrap.unbind(".fb"),r.unbind(".fb"),s.unbind(".fb")},bindEvents:function(){var e,t=a.current;t&&(s.bind("orientationchange.fb"+(d?"":" resize.fb")+(t.autoCenter&&!t.locked?" scroll.fb":""),a.update),(e=t.keys)&&r.bind("keydown.fb",function(i){var o=i.which||i.keyCode,s=i.target||i.srcElement;if(27===o&&a.coming)return!1;i.ctrlKey||i.altKey||i.shiftKey||i.metaKey||s&&(s.type||n(s).is("[contenteditable]"))||n.each(e,function(e,s){return t.group.length>1&&void 0!==s[o]?(a[e](s[o]),i.preventDefault(),!1):n.inArray(o,s)>-1?(a[e](),i.preventDefault(),!1):void 0})}),n.fn.mousewheel&&t.mouseWheel&&a.wrap.bind("mousewheel.fb",function(e,i,o,s){for(var r,l=e.target||null,c=n(l),d=!1;c.length&&!(d||c.is(".fancybox-skin")||c.is(".fancybox-wrap"));)d=(r=c[0])&&!(r.style.overflow&&"hidden"===r.style.overflow)&&(r.clientWidth&&r.scrollWidth>r.clientWidth||r.clientHeight&&r.scrollHeight>r.clientHeight),c=n(c).parent();0===i||d||a.group.length>1&&!t.canShrink&&(s>0||o>0?a.prev(s>0?"down":"left"):(s<0||o<0)&&a.next(s<0?"up":"right"),e.preventDefault())}))},trigger:function(e,t){var i,o=t||a.coming||a.current;if(o){if(n.isFunction(o[e])&&(i=o[e].apply(o,Array.prototype.slice.call(arguments,1))),!1===i)return!1;o.helpers&&n.each(o.helpers,function(t,i){i&&a.helpers[t]&&n.isFunction(a.helpers[t][e])&&a.helpers[t][e](n.extend(!0,{},a.helpers[t].defaults,i),o)}),r.trigger(e)}},isImage:function(e){return h(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(e){return h(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var t,i,o,s,r,l={};if(e=f(e),!(t=a.group[e]||null))return!1;if(s=(l=n.extend(!0,{},a.opts,t)).margin,r=l.padding,"number"===n.type(s)&&(l.margin=[s,s,s,s]),"number"===n.type(r)&&(l.padding=[r,r,r,r]),l.modal&&n.extend(!0,l,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),l.autoSize&&(l.autoWidth=l.autoHeight=!0),"auto"===l.width&&(l.autoWidth=!0),"auto"===l.height&&(l.autoHeight=!0),l.group=a.group,l.index=e,a.coming=l,!1!==a.trigger("beforeLoad")){if(o=l.type,i=l.href,!o)return a.coming=null,!(!a.current||!a.router||"jumpto"===a.router)&&(a.current.index=e,a[a.router](a.direction));if(a.isActive=!0,"image"!==o&&"swf"!==o||(l.autoHeight=l.autoWidth=!1,l.scrolling="visible"),"image"===o&&(l.aspectRatio=!0),"iframe"===o&&d&&(l.scrolling="scroll"),l.wrap=n(l.tpl.wrap).addClass("fancybox-"+(d?"mobile":"desktop")+" fancybox-type-"+o+" fancybox-tmp "+l.wrapCSS).appendTo(l.parent||"body"),n.extend(l,{skin:n(".fancybox-skin",l.wrap),outer:n(".fancybox-outer",l.wrap),inner:n(".fancybox-inner",l.wrap)}),n.each(["Top","Right","Bottom","Left"],function(e,t){l.skin.css("padding"+t,m(l.padding[e]))}),a.trigger("onReady"),"inline"===o||"html"===o){if(!l.content||!l.content.length)return a._error("content")}else if(!i)return a._error("href");"image"===o?a._loadImage():"ajax"===o?a._loadAjax():"iframe"===o?a._loadIframe():a._afterLoad()}else a.coming=null},_error:function(e){n.extend(a.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:e,content:a.coming.tpl.error}),a._afterLoad()},_loadImage:function(){var e=a.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null,a.coming.width=this.width/a.opts.pixelRatio,a.coming.height=this.height/a.opts.pixelRatio,a._afterLoad()},e.onerror=function(){this.onload=this.onerror=null,a._error("image")},e.src=a.coming.href,!0!==e.complete&&a.showLoading()},_loadAjax:function(){var e=a.coming;a.showLoading(),a.ajaxLoad=n.ajax(n.extend({},e.ajax,{url:e.href,error:function(e,t){a.coming&&"abort"!==t?a._error("ajax",e):a.hideLoading()},success:function(t,n){"success"===n&&(e.content=t,a._afterLoad())}}))},_loadIframe:function(){var e=a.coming,t=n(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",d?"auto":e.iframe.scrolling).attr("src",e.href);n(e.wrap).bind("onReset",function(){try{n(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),e.iframe.preload&&(a.showLoading(),t.one("load",function(){n(this).data("ready",1),d||n(this).bind("load.fb",a.update),n(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),a._afterLoad()})),e.content=t.appendTo(e.inner),e.iframe.preload||a._afterLoad()},_preloadImages:function(){var e,t,n=a.group,i=a.current,o=n.length,s=i.preload?Math.min(i.preload,o-1):0;for(t=1;t<=s;t+=1)"image"===(e=n[(i.index+t)%o]).type&&e.href&&((new Image).src=e.href)},_afterLoad:function(){var e,t,i,o,s,r,l=a.coming,c=a.current,d="fancybox-placeholder";if(a.hideLoading(),l&&!1!==a.isActive){if(!1===a.trigger("afterLoad",l,c))return l.wrap.stop(!0).trigger("onReset").remove(),void(a.coming=null);switch(c&&(a.trigger("beforeChange",c),c.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),a.unbindEvents(),e=l,t=l.content,i=l.type,o=l.scrolling,n.extend(a,{wrap:e.wrap,skin:e.skin,outer:e.outer,inner:e.inner,current:e,previous:c}),s=e.href,i){case"inline":case"ajax":case"html":e.selector?t=n("<div>").html(t).find(e.selector):u(t)&&(t.data(d)||t.data(d,n('<div class="'+d+'"></div>').insertAfter(t).hide()),t=t.show().detach(),e.wrap.bind("onReset",function(){n(this).find(t).length&&t.hide().replaceAll(t.data(d)).data(d,!1)}));break;case"image":t=e.tpl.image.replace("{href}",s);break;case"swf":t='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+s+'"></param>',r="",n.each(e.swf,function(e,n){t+='<param name="'+e+'" value="'+n+'"></param>',r+=" "+e+'="'+n+'"'}),t+='<embed src="'+s+'" type="application/x-shockwave-flash" width="100%" height="100%"'+r+"></embed></object>"}u(t)&&t.parent().is(e.inner)||e.inner.append(t),a.trigger("beforeShow"),e.inner.css("overflow","yes"===o?"scroll":"no"===o?"hidden":o),a._setDimension(),a.reposition(),a.isOpen=!1,a.coming=null,a.bindEvents(),a.isOpened?c.prevMethod&&a.transitions[c.prevMethod]():n(".fancybox-wrap").not(e.wrap).stop(!0).trigger("onReset").remove(),a.transitions[a.isOpened?e.nextMethod:e.openMethod](),a._preloadImages()}},_setDimension:function(){var e,t,i,o,s,r,l,c,d,u,h,g,v,y,b,_,x,w=a.getViewport(),k=0,C=a.wrap,T=a.skin,S=a.inner,$=a.current,E=$.width,j=$.height,H=$.minWidth,D=$.minHeight,N=$.maxWidth,L=$.maxHeight,O=$.scrolling,M=$.scrollOutside?$.scrollbarWidth:0,P=$.margin,z=f(P[1]+P[3]),A=f(P[0]+P[2]);if(C.add(T).add(S).width("auto").height("auto").removeClass("fancybox-tmp"),s=z+(i=f(T.outerWidth(!0)-T.width())),r=A+(o=f(T.outerHeight(!0)-T.height())),l=p(E)?(w.w-s)*f(E)/100:E,c=p(j)?(w.h-r)*f(j)/100:j,"iframe"===$.type){if(_=$.content,$.autoHeight&&1===_.data("ready"))try{_[0].contentWindow.document.location&&(S.width(l).height(9999),x=_.contents().find("body"),M&&x.css("overflow-x","hidden"),c=x.outerHeight(!0))}catch(e){}}else($.autoWidth||$.autoHeight)&&(S.addClass("fancybox-tmp"),$.autoWidth||S.width(l),$.autoHeight||S.height(c),$.autoWidth&&(l=S.width()),$.autoHeight&&(c=S.height()),S.removeClass("fancybox-tmp"));if(E=f(l),j=f(c),h=l/c,H=f(p(H)?f(H,"w")-s:H),N=f(p(N)?f(N,"w")-s:N),D=f(p(D)?f(D,"h")-r:D),d=N,u=L=f(p(L)?f(L,"h")-r:L),$.fitToView&&(N=Math.min(w.w-s,N),L=Math.min(w.h-r,L)),y=w.w-z,b=w.h-A,$.aspectRatio?(E>N&&(j=f((E=N)/h)),j>L&&(E=f((j=L)*h)),E<H&&(j=f((E=H)/h)),j<D&&(E=f((j=D)*h))):(E=Math.max(H,Math.min(E,N)),$.autoHeight&&"iframe"!==$.type&&(S.width(E),j=S.height()),j=Math.max(D,Math.min(j,L))),$.fitToView)if(S.width(E).height(j),C.width(E+i),g=C.width(),v=C.height(),$.aspectRatio)for(;(g>y||v>b)&&E>H&&j>D&&!(k++>19);)j=Math.max(D,Math.min(L,j-10)),(E=f(j*h))<H&&(j=f((E=H)/h)),E>N&&(j=f((E=N)/h)),S.width(E).height(j),C.width(E+i),g=C.width(),v=C.height();else E=Math.max(H,Math.min(E,E-(g-y))),j=Math.max(D,Math.min(j,j-(v-b)));M&&"auto"===O&&j<c&&E+i+M<y&&(E+=M),S.width(E).height(j),C.width(E+i),g=C.width(),v=C.height(),e=(g>y||v>b)&&E>H&&j>D,t=$.aspectRatio?E<d&&j<u&&E<l&&j<c:(E<d||j<u)&&(E<l||j<c),n.extend($,{dim:{width:m(g),height:m(v)},origWidth:l,origHeight:c,canShrink:e,canExpand:t,wPadding:i,hPadding:o,wrapSpace:v-T.outerHeight(!0),skinSpace:T.height()-j}),!_&&$.autoHeight&&j>D&&j<L&&!t&&S.height("auto")},_getPosition:function(e){var t=a.current,n=a.getViewport(),i=t.margin,o=a.wrap.width()+i[1]+i[3],s=a.wrap.height()+i[0]+i[2],r={position:"absolute",top:i[0],left:i[3]};return t.autoCenter&&t.fixed&&!e&&s<=n.h&&o<=n.w?r.position="fixed":t.locked||(r.top+=n.y,r.left+=n.x),r.top=m(Math.max(r.top,r.top+(n.h-s)*t.topRatio)),r.left=m(Math.max(r.left,r.left+(n.w-o)*t.leftRatio)),r},_afterZoomIn:function(){var e=a.current;e&&(a.isOpen=a.isOpened=!0,a.wrap.css("overflow","visible").addClass("fancybox-opened"),a.update(),(e.closeClick||e.nextClick&&a.group.length>1)&&a.inner.css("cursor","pointer").bind("click.fb",function(t){n(t.target).is("a")||n(t.target).parent().is("a")||(t.preventDefault(),a[e.closeClick?"close":"next"]())}),e.closeBtn&&n(e.tpl.closeBtn).appendTo(a.skin).bind("click.fb",function(e){e.preventDefault(),a.close()}),e.arrows&&a.group.length>1&&((e.loop||e.index>0)&&n(e.tpl.prev).appendTo(a.outer).bind("click.fb",a.prev),(e.loop||e.index<a.group.length-1)&&n(e.tpl.next).appendTo(a.outer).bind("click.fb",a.next)),a.trigger("afterShow"),e.loop||e.index!==e.group.length-1?a.opts.autoPlay&&!a.player.isActive&&(a.opts.autoPlay=!1,a.play()):a.play(!1))},_afterZoomOut:function(e){e=e||a.current,n(".fancybox-wrap").trigger("onReset").remove(),n.extend(a,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),a.trigger("afterClose",e)}}),a.transitions={getOrigPosition:function(){var e=a.current,t=e.element,n=e.orig,i={},o=50,s=50,r=e.hPadding,l=e.wPadding,c=a.getViewport();return!n&&e.isDom&&t.is(":visible")&&((n=t.find("img:first")).length||(n=t)),u(n)?(i=n.offset(),n.is("img")&&(o=n.outerWidth(),s=n.outerHeight())):(i.top=c.y+(c.h-s)*e.topRatio,i.left=c.x+(c.w-o)*e.leftRatio),("fixed"===a.wrap.css("position")||e.locked)&&(i.top-=c.y,i.left-=c.x),i={top:m(i.top-r*e.topRatio),left:m(i.left-l*e.leftRatio),width:m(o+l),height:m(s+r)}},step:function(e,t){var n,i,o=t.prop,s=a.current,r=s.wrapSpace,l=s.skinSpace;"width"!==o&&"height"!==o||(n=t.end===t.start?1:(e-t.start)/(t.end-t.start),a.isClosing&&(n=1-n),i=e-("width"===o?s.wPadding:s.hPadding),a.skin[o](f("width"===o?i:i-r*n)),a.inner[o](f("width"===o?i:i-r*n-l*n)))},zoomIn:function(){var e=a.current,t=e.pos,i=e.openEffect,o="elastic"===i,s=n.extend({opacity:1},t);delete s.position,o?(t=this.getOrigPosition(),e.openOpacity&&(t.opacity=.1)):"fade"===i&&(t.opacity=.1),a.wrap.css(t).animate(s,{duration:"none"===i?0:e.openSpeed,easing:e.openEasing,step:o?this.step:null,complete:a._afterZoomIn})},zoomOut:function(){var e=a.current,t=e.closeEffect,n="elastic"===t,i={opacity:.1};n&&(i=this.getOrigPosition(),e.closeOpacity&&(i.opacity=.1)),a.wrap.animate(i,{duration:"none"===t?0:e.closeSpeed,easing:e.closeEasing,step:n?this.step:null,complete:a._afterZoomOut})},changeIn:function(){var e,t=a.current,n=t.nextEffect,i=t.pos,o={opacity:1},s=a.direction;i.opacity=.1,"elastic"===n&&(e="down"===s||"up"===s?"top":"left","down"===s||"right"===s?(i[e]=m(f(i[e])-200),o[e]="+=200px"):(i[e]=m(f(i[e])+200),o[e]="-=200px")),"none"===n?a._afterZoomIn():a.wrap.css(i).animate(o,{duration:t.nextSpeed,easing:t.nextEasing,complete:a._afterZoomIn})},changeOut:function(){var e=a.previous,t=e.prevEffect,i={opacity:.1},o=a.direction;"elastic"===t&&(i["down"===o||"up"===o?"top":"left"]=("up"===o||"left"===o?"-":"+")+"=200px"),e.wrap.animate(i,{duration:"none"===t?0:e.prevSpeed,easing:e.prevEasing,complete:function(){n(this).trigger("onReset").remove()}})}},a.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!d,fixed:!0},overlay:null,fixed:!1,el:n("html"),create:function(e){e=n.extend({},this.defaults,e),this.overlay&&this.close(),this.overlay=n('<div class="fancybox-overlay"></div>').appendTo(a.coming?a.coming.parent:e.parent),this.fixed=!1,e.fixed&&a.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(e){var t=this;e=n.extend({},this.defaults,e),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(e),this.fixed||(s.bind("resize.overlay",n.proxy(this.update,this)),this.update()),e.closeClick&&this.overlay.bind("click.overlay",function(e){if(n(e.target).hasClass("fancybox-overlay"))return a.isActive?a.close():t.close(),!1}),this.overlay.css(e.css).show()},close:function(){var e,t;s.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(n(".fancybox-margin").removeClass("fancybox-margin"),e=s.scrollTop(),t=s.scrollLeft(),this.el.removeClass("fancybox-lock"),s.scrollTop(e).scrollLeft(t)),n(".fancybox-overlay").remove().hide(),n.extend(this,{overlay:null,fixed:!1})},update:function(){var e,n="100%";this.overlay.width(n).height("100%"),l?(e=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),r.width()>e&&(n=r.width())):r.width()>s.width()&&(n=r.width()),this.overlay.width(n).height(r.height())},onReady:function(e,t){var i=this.overlay;n(".fancybox-overlay").stop(!0,!0),i||this.create(e),e.locked&&this.fixed&&t.fixed&&(i||(this.margin=r.height()>s.height()&&n("html").css("margin-right").replace("px","")),t.locked=this.overlay.append(t.wrap),t.fixed=!1),!0===e.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,t){var i,o;t.locked&&(!1!==this.margin&&(n("*").filter(function(){return"fixed"===n(this).css("position")&&!n(this).hasClass("fancybox-overlay")&&!n(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),i=s.scrollTop(),o=s.scrollLeft(),this.el.addClass("fancybox-lock"),s.scrollTop(i).scrollLeft(o)),this.open(e)},onUpdate:function(){this.fixed||this.update()},afterClose:function(e){this.overlay&&!a.coming&&this.overlay.fadeOut(e.speedOut,n.proxy(this.close,this))}},a.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(e){var t,i,o=a.current,s=o.title,r=e.type;if(n.isFunction(s)&&(s=s.call(o.element,o)),h(s)&&""!==n.trim(s)){switch(t=n('<div class="fancybox-title fancybox-title-'+r+'-wrap">'+s+"</div>"),r){case"inside":i=a.skin;break;case"outside":i=a.wrap;break;case"over":i=a.inner;break;default:i=a.skin,t.appendTo("body"),l&&t.width(t.width()),t.wrapInner('<span class="child"></span>'),a.current.margin[2]+=Math.abs(f(t.css("margin-bottom")))}t["top"===e.position?"prependTo":"appendTo"](i)}}},n.fn.fancybox=function(e){var t,i=n(this),o=this.selector||"",s=function(s){var r,l,c=n(this).blur(),d=t;s.ctrlKey||s.altKey||s.shiftKey||s.metaKey||c.is(".fancybox-wrap")||(r=e.groupAttr||"data-fancybox-group",(l=c.attr(r))||(r="rel",l=c.get(0)[r]),l&&""!==l&&"nofollow"!==l&&(d=(c=(c=o.length?n(o):i).filter("["+r+'="'+l+'"]')).index(this)),e.index=d,!1!==a.open(c,e)&&s.preventDefault())};return t=(e=e||{}).index||0,o&&!1!==e.live?r.undelegate(o,"click.fb-start").delegate(o+":not('.fancybox-item, .fancybox-nav')","click.fb-start",s):i.unbind("click.fb-start").bind("click.fb-start",s),this.filter("[data-fancybox-start=1]").trigger("click"),this},r.ready(function(){var t,i,s,r;void 0===n.scrollbarWidth&&(n.scrollbarWidth=function(){var e=n('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),i=t.innerWidth()-t.height(99).innerWidth();return e.remove(),i}),void 0===n.support.fixedPosition&&(n.support.fixedPosition=(s=n('<div style="position:fixed;top:20px;"></div>').appendTo("body"),r=20===s[0].offsetTop||15===s[0].offsetTop,s.remove(),r)),n.extend(a.defaults,{scrollbarWidth:n.scrollbarWidth(),fixed:n.support.fixedPosition,parent:n("body")}),t=n(e).width(),o.addClass("fancybox-lock-test"),i=n(e).width(),o.removeClass("fancybox-lock-test"),n("<style type='text/css'>.fancybox-margin{margin-right:"+(i-t)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function(e){e.fn.county||(e.fn.county=function(t){var n=e.extend({endDateTime:new Date((new Date).getTime()+864e5),animation:!1,speed:500,days:!0,labels:{d:"days",h:"hours",m:"minutes",s:"seconds"}},t);return this.each(function(){var t=e(this);if(t.addClass("county"),t.append(n.days?'<div class="county-days"><div>00</div><span>'+n.labels.d+"</span></div>":"",'<div class="county-hours separator-left"><div>00</div><span>'+n.labels.h+"</span></div>",'<div class="county-minutes separator-left"><div>00</div><span>'+n.labels.m+"</span></div>",'<div class="county-seconds separator-left"><div>00</div><span>'+n.labels.s+"</span></div>"),null!=t.attr("id")&&null!=t.attr("id")||(e.fn.county.total=(e.fn.county.total||0)+1,t.attr("id","county_"+e.fn.county.total)),!e.fn.county.hash){e.fn.county.hash={},setInterval(function(){for(var t in e.fn.county.hash)0==e("#"+t).length?delete e.fn.county.hash[t]:e.fn.county.hash[t]()},1e3)}e.fn.county.hash[this.id]=l;var i=t.find(".county-days > div"),o=t.find(".county-hours > div"),s=t.find(".county-minutes > div"),r=t.find(".county-seconds > div"),a=n.animation;function l(){var e=function(){var e=new Date,t=parseFloat(n.endDateTime-e),i=0,o=0,s=0,r=parseFloat(t/1e3/60/60/24),a=parseInt(r);return r-=a,r*=24,s=parseInt(r),r-=s,r*=60,o=parseInt(r),r-=o,r*=60,i=parseInt(r),{days:d(Math.max(0,a),!0),hours:d(Math.max(0,s),!1),minutes:d(Math.max(0,o),!1),seconds:d(Math.max(0,i),!1)}}(),t=i.html(),a=o.html(),l=s.html(),u=r.html();t==e.days?i.html(e.days):c(i,null,t,e.days,n.animation),a==e.hours?o.html(e.hours):c(o,null,a,e.hours,n.animation),l==e.minutes?s.html(e.minutes):c(s,null,l,e.minutes,n.animation),u==e.seconds?r.html(e.seconds):c(r,null,u,e.seconds,n.animation)}function c(e,t,i,o,s){if("fade"==s)e.fadeOut("fast").fadeIn("fast").html(o);else if("scroll"==s){var r=e.data("copy");r||((r=e.clone().css({position:"absolute"})).prependTo(e.parent()),e.data("copy",r)),r.text(e.text()),e.text(o);var a=r.outerHeight();e.stop().css({top:-a}).animate({top:0},n.speed),r.stop().css({top:0}).animate({top:a},n.speed)}else e.html(o)}function d(e,t){var n=e.toString();return t?1==n.length?"0"+n:n:0==n.length?"0"+n:n}return n.animation=!1,l(),n.animation=a,this})})}(jQuery),function(e){var t=Array.prototype.slice;function n(){}function i(e){if(e){var i="undefined"==typeof console?n:function(e){console.error(e)};return e.bridget=function(n,o){!function(t){t.prototype.option||(t.prototype.option=function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))})}(o),function(n,o){e.fn[n]=function(s){if("string"==typeof s){for(var r=t.call(arguments,1),a=0,l=this.length;a<l;a++){var c=this[a],d=e.data(c,n);if(d)if(e.isFunction(d[s])&&"_"!==s.charAt(0)){var u=d[s].apply(d,r);if(void 0!==u)return u}else i("no such method '"+s+"' for "+n+" instance");else i("cannot call methods on "+n+" prior to initialization; attempted to call '"+s+"'")}return this}return this.each(function(){var t=e.data(this,n);t?(t.option(s),t._init()):(t=new o(this,s),e.data(this,n,t))})}}(n,o)},e.bridget}}"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],i):"object"==typeof exports?i(require("jquery")):i(e.jQuery)}(window),function(e){var t=document.documentElement,n=function(){};function i(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}t.addEventListener?n=function(e,t,n){e.addEventListener(t,n,!1)}:t.attachEvent&&(n=function(e,t,n){e[t+n]=n.handleEvent?function(){var t=i(e);n.handleEvent.call(n,t)}:function(){var t=i(e);n.call(e,t)},e.attachEvent("on"+t,e[t+n])});var o=function(){};t.removeEventListener?o=function(e,t,n){e.removeEventListener(t,n,!1)}:t.detachEvent&&(o=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(i){e[t+n]=void 0}});var s={bind:n,unbind:o};"function"==typeof define&&define.amd?define("eventie/eventie",s):"object"==typeof exports?module.exports=s:e.eventie=s}(this),function(e){var t=e.document,n=[];function i(e){"function"==typeof e&&(i.isReady?e():n.push(e))}function o(e){var n="readystatechange"===e.type&&"complete"!==t.readyState;i.isReady||n||s()}function s(){i.isReady=!0;for(var e=0,t=n.length;e<t;e++){(0,n[e])()}}function r(n){return"complete"===t.readyState?s():(n.bind(t,"DOMContentLoaded",o),n.bind(t,"readystatechange",o),n.bind(e,"load",o)),i}i.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],r):"object"==typeof exports?module.exports=r(require("eventie")):e.docReady=r(e.eventie)}(window),function(){function e(){}var t=e.prototype,n=this,i=n.EventEmitter;function o(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function s(e){return function(){return this[e].apply(this,arguments)}}t.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp)for(n in t={},i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},t.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},t.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},t.addListener=function(e,t){var n,i=this.getListenersAsObject(e),s="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===o(i[n],t)&&i[n].push(s?t:{listener:t,once:!1});return this},t.on=s("addListener"),t.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},t.once=s("addOnceListener"),t.defineEvent=function(e){return this.getListeners(e),this},t.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},t.removeListener=function(e,t){var n,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&-1!==(n=o(s[i],t))&&s[i].splice(n,1);return this},t.off=s("removeListener"),t.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},t.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},t.manipulateListeners=function(e,t,n){var i,o,s=e?this.removeListener:this.addListener,r=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)s.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(o=t[i])&&("function"==typeof o?s.call(this,i,o):r.call(this,i,o));return this},t.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},t.removeAllListeners=s("removeEvent"),t.emitEvent=function(e,t){var n,i,o,s=this.getListenersAsObject(e);for(o in s)if(s.hasOwnProperty(o))for(i=s[o].length;i--;)!0===(n=s[o][i]).once&&this.removeListener(e,n.listener),n.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},t.trigger=s("emitEvent"),t.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},t.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},t._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},t._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return n.EventEmitter=i,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:n.EventEmitter=e}.call(this),function(e){var t="Webkit Moz ms Ms O".split(" "),n=document.documentElement.style;function i(e){if(e){if("string"==typeof n[e])return e;var i;e=e.charAt(0).toUpperCase()+e.slice(1);for(var o=0,s=t.length;o<s;o++)if(i=t[o]+e,"string"==typeof n[i])return i}}"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return i}):"object"==typeof exports?module.exports=i:e.getStyleProperty=i}(window),function(e,t){function n(e){var t=parseFloat(e);return-1===e.indexOf("%")&&!isNaN(t)&&t}var i="undefined"==typeof console?function(){}:function(e){console.error(e)},o=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];function s(t){var s,r,a,l=!1;function c(t,n){if(e.getComputedStyle||-1===n.indexOf("%"))return n;var i=t.style,o=i.left,s=t.runtimeStyle,r=s&&s.left;return r&&(s.left=t.currentStyle.left),i.left=n,n=i.pixelLeft,i.left=o,r&&(s.left=r),n}return function(d){if(function(){if(!l){l=!0;var o,c=e.getComputedStyle;if(o=c?function(e){return c(e,null)}:function(e){return e.currentStyle},s=function(e){var t=o(e);return t||i("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),t},r=t("boxSizing")){var d=document.createElement("div");d.style.width="200px",d.style.padding="1px 2px 3px 4px",d.style.borderStyle="solid",d.style.borderWidth="1px 2px 3px 4px",d.style[r]="border-box";var u=document.body||document.documentElement;u.appendChild(d);var h=s(d);a=200===n(h.width),u.removeChild(d)}}}(),"string"==typeof d&&(d=document.querySelector(d)),d&&"object"==typeof d&&d.nodeType){var u=s(d);if("none"===u.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0,n=o.length;t<n;t++)e[o[t]]=0;return e}();var h={};h.width=d.offsetWidth,h.height=d.offsetHeight;for(var p=h.isBorderBox=!(!r||!u[r]||"border-box"!==u[r]),f=0,m=o.length;f<m;f++){var g=o[f],v=u[g];v=c(d,v);var y=parseFloat(v);h[g]=isNaN(y)?0:y}var b=h.paddingLeft+h.paddingRight,_=h.paddingTop+h.paddingBottom,x=h.marginLeft+h.marginRight,w=h.marginTop+h.marginBottom,k=h.borderLeftWidth+h.borderRightWidth,C=h.borderTopWidth+h.borderBottomWidth,T=p&&a,S=n(u.width);!1!==S&&(h.width=S+(T?0:b+k));var $=n(u.height);return!1!==$&&(h.height=$+(T?0:_+C)),h.innerWidth=h.width-(b+k),h.innerHeight=h.height-(_+C),h.outerWidth=h.width+x,h.outerHeight=h.height+w,h}}}"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],s):"object"==typeof exports?module.exports=s(require("desandro-get-style-property")):e.getSize=s(e.getStyleProperty)}(window),function(e){var t,n=function(){if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],n=0,i=t.length;n<i;n++){var o=t[n]+"MatchesSelector";if(e[o])return o}}();function i(e,t){return e[n](t)}function o(e){e.parentNode||document.createDocumentFragment().appendChild(e)}if(n){var s=i(document.createElement("div"),"div");t=s?i:function(e,t){return o(e),i(e,t)}}else t=function(e,t){o(e);for(var n=e.parentNode.querySelectorAll(t),i=0,s=n.length;i<s;i++)if(n[i]===e)return!0;return!1};"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return t}):"object"==typeof exports?module.exports=t:window.matchesSelector=t}(Element.prototype),function(e){var t=e.getComputedStyle,n=t?function(e){return t(e,null)}:function(e){return e.currentStyle};function i(e,t,i){var o=i("transition"),s=i("transform"),r=o&&s,a=!!i("perspective"),l={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[o],c=["transform","transition","transitionDuration","transitionProperty"],d=function(){for(var e={},t=0,n=c.length;t<n;t++){var o=c[t],s=i(o);s&&s!==o&&(e[o]=s)}return e}();function u(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}!function(e,t){for(var n in t)e[n]=t[n]}(u.prototype,e.prototype),u.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},u.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},u.prototype.getSize=function(){this.size=t(this.element)},u.prototype.css=function(e){var t=this.element.style;for(var n in e){t[d[n]||n]=e[n]}},u.prototype.getPosition=function(){var e=n(this.element),t=this.layout.options,i=t.isOriginLeft,o=t.isOriginTop,s=parseInt(e[i?"left":"right"],10),r=parseInt(e[o?"top":"bottom"],10);s=isNaN(s)?0:s,r=isNaN(r)?0:r;var a=this.layout.size;s-=i?a.paddingLeft:a.paddingRight,r-=o?a.paddingTop:a.paddingBottom,this.position.x=s,this.position.y=r},u.prototype.layoutPosition=function(){var e=this.layout.size,t=this.layout.options,n={};t.isOriginLeft?(n.left=this.position.x+e.paddingLeft+"px",n.right=""):(n.right=this.position.x+e.paddingRight+"px",n.left=""),t.isOriginTop?(n.top=this.position.y+e.paddingTop+"px",n.bottom=""):(n.bottom=this.position.y+e.paddingBottom+"px",n.top=""),this.css(n),this.emitEvent("layout",[this])};var h=a?function(e,t){return"translate3d("+e+"px, "+t+"px, 0)"}:function(e,t){return"translate("+e+"px, "+t+"px)"};u.prototype._transitionTo=function(e,t){this.getPosition();var n=this.position.x,i=this.position.y,o=parseInt(e,10),s=parseInt(t,10),r=o===this.position.x&&s===this.position.y;if(this.setPosition(e,t),!r||this.isTransitioning){var a=e-n,l=t-i,c={},d=this.layout.options;a=d.isOriginLeft?a:-a,l=d.isOriginTop?l:-l,c.transform=h(a,l),this.transition({to:c,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},u.prototype.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},u.prototype.moveTo=r?u.prototype._transitionTo:u.prototype.goTo,u.prototype.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},u.prototype._nonTransition=function(e){for(var t in this.css(e.to),e.isCleaning&&this._removeStyles(e.to),e.onTransitionEnd)e.onTransitionEnd[t].call(this)},u.prototype._transition=function(e){if(parseFloat(this.layout.options.transitionDuration)){var t=this._transn;for(var n in e.onTransitionEnd)t.onEnd[n]=e.onTransitionEnd[n];for(n in e.to)t.ingProperties[n]=!0,e.isCleaning&&(t.clean[n]=!0);if(e.from){this.css(e.from);this.element.offsetHeight;null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0}else this._nonTransition(e)};var p=s&&s.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})+",opacity";u.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:p,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(l,this,!1))},u.prototype.transition=u.prototype[o?"_transition":"_nonTransition"],u.prototype.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},u.prototype.onotransitionend=function(e){this.ontransitionend(e)};var f={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};u.prototype.ontransitionend=function(e){if(e.target===this.element){var t=this._transn,n=f[e.propertyName]||e.propertyName;if(delete t.ingProperties[n],function(e){for(var t in e)return!1;return!0}(t.ingProperties)&&this.disableTransition(),n in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[n]),n in t.onEnd)t.onEnd[n].call(this),delete t.onEnd[n];this.emitEvent("transitionEnd",[this])}},u.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(l,this,!1),this.isTransitioning=!1},u.prototype._removeStyles=function(e){var t={};for(var n in e)t[n]="";this.css(t)};var m={transitionProperty:"",transitionDuration:""};return u.prototype.removeTransitionStyles=function(){this.css(m)},u.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},u.prototype.remove=function(){if(o&&parseFloat(this.layout.options.transitionDuration)){var e=this;this.on("transitionEnd",function(){return e.removeElem(),!0}),this.hide()}else this.removeElem()},u.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options;this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0})},u.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options;this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},u.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},u}"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],i):"object"==typeof exports?module.exports=i(require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property")):(e.Outlayer={},e.Outlayer.Item=i(e.EventEmitter,e.getSize,e.getStyleProperty))}(window),function(e){var t=e.document,n=e.console,i=e.jQuery,o=function(){};function s(e,t){for(var n in t)e[n]=t[n];return e}var r=Object.prototype.toString;function a(e){var t=[];if(function(e){return"[object Array]"===r.call(e)}(e))t=e;else if(e&&"number"==typeof e.length)for(var n=0,i=e.length;n<i;n++)t.push(e[n]);else t.push(e);return t}var l="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},c=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1};function d(e,t){var n=c(t,e);-1!==n&&t.splice(n,1)}function u(r,c,u,h,p,f){var m=0,g={};function v(e,i){if("string"==typeof e&&(e=t.querySelector(e)),e&&l(e)){this.element=e,this.options=s({},this.constructor.defaults),this.option(i);var o=++m;this.element.outlayerGUID=o,g[o]=this,this._create(),this.options.isInitLayout&&this.layout()}else n&&n.error("Bad "+this.constructor.namespace+" element: "+e)}return v.namespace="outlayer",v.Item=f,v.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},s(v.prototype,u.prototype),v.prototype.option=function(e){s(this.options,e)},v.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),s(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},v.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},v.prototype._itemize=function(e){for(var t=this._filterFindItemElements(e),n=this.constructor.Item,i=[],o=0,s=t.length;o<s;o++){var r=new n(t[o],this);i.push(r)}return i},v.prototype._filterFindItemElements=function(e){e=a(e);for(var t=this.options.itemSelector,n=[],i=0,o=e.length;i<o;i++){var s=e[i];if(l(s))if(t){p(s,t)&&n.push(s);for(var r=s.querySelectorAll(t),c=0,d=r.length;c<d;c++)n.push(r[c])}else n.push(s)}return n},v.prototype.getItemElements=function(){for(var e=[],t=0,n=this.items.length;t<n;t++)e.push(this.items[t].element);return e},v.prototype.layout=function(){this._resetLayout(),this._manageStamps();var e=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},v.prototype._init=v.prototype.layout,v.prototype._resetLayout=function(){this.getSize()},v.prototype.getSize=function(){this.size=h(this.element)},v.prototype._getMeasurement=function(e,t){var n,i=this.options[e];i?("string"==typeof i?n=this.element.querySelector(i):l(i)&&(n=i),this[e]=n?h(n)[t]:i):this[e]=0},v.prototype.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},v.prototype._getItemsForLayout=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var o=e[n];o.isIgnored||t.push(o)}return t},v.prototype._layoutItems=function(e,t){var n=this;function i(){n.emitEvent("layoutComplete",[n,e])}if(e&&e.length){this._itemsOn(e,"layout",i);for(var o=[],s=0,r=e.length;s<r;s++){var a=e[s],l=this._getItemLayoutPosition(a);l.item=a,l.isInstant=t||a.isLayoutInstant,o.push(l)}this._processLayoutQueue(o)}else i()},v.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},v.prototype._processLayoutQueue=function(e){for(var t=0,n=e.length;t<n;t++){var i=e[t];this._positionItem(i.item,i.x,i.y,i.isInstant)}},v.prototype._positionItem=function(e,t,n,i){i?e.goTo(t,n):e.moveTo(t,n)},v.prototype._postLayout=function(){this.resizeContainer()},v.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},v.prototype._getContainerSize=o,v.prototype._setContainerMeasure=function(e,t){if(void 0!==e){var n=this.size;n.isBorderBox&&(e+=t?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},v.prototype._itemsOn=function(e,t,n){var i=0,o=e.length,s=this;function r(){return++i===o&&n.call(s),!0}for(var a=0,l=e.length;a<l;a++){e[a].on(t,r)}},v.prototype.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},v.prototype.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},v.prototype.stamp=function(e){if(e=this._find(e)){this.stamps=this.stamps.concat(e);for(var t=0,n=e.length;t<n;t++){var i=e[t];this.ignore(i)}}},v.prototype.unstamp=function(e){if(e=this._find(e))for(var t=0,n=e.length;t<n;t++){var i=e[t];d(i,this.stamps),this.unignore(i)}},v.prototype._find=function(e){if(e)return"string"==typeof e&&(e=this.element.querySelectorAll(e)),e=a(e)},v.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var e=0,t=this.stamps.length;e<t;e++){var n=this.stamps[e];this._manageStamp(n)}}},v.prototype._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},v.prototype._manageStamp=o,v.prototype._getElementOffset=function(e){var t=e.getBoundingClientRect(),n=this._boundingRect,i=h(e);return{left:t.left-n.left-i.marginLeft,top:t.top-n.top-i.marginTop,right:n.right-t.right-i.marginRight,bottom:n.bottom-t.bottom-i.marginBottom}},v.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},v.prototype.bindResize=function(){this.isResizeBound||(r.bind(e,"resize",this),this.isResizeBound=!0)},v.prototype.unbindResize=function(){this.isResizeBound&&r.unbind(e,"resize",this),this.isResizeBound=!1},v.prototype.onresize=function(){this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(function(){e.resize(),delete e.resizeTimeout},100)},v.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},v.prototype.needsResizeLayout=function(){var e=h(this.element);return this.size&&e&&e.innerWidth!==this.size.innerWidth},v.prototype.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},v.prototype.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},v.prototype.prepended=function(e){var t=this._itemize(e);if(t.length){var n=this.items.slice(0);this.items=t.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(n)}},v.prototype.reveal=function(e){var t=e&&e.length;if(t)for(var n=0;n<t;n++){e[n].reveal()}},v.prototype.hide=function(e){var t=e&&e.length;if(t)for(var n=0;n<t;n++){e[n].hide()}},v.prototype.getItem=function(e){for(var t=0,n=this.items.length;t<n;t++){var i=this.items[t];if(i.element===e)return i}},v.prototype.getItems=function(e){if(e&&e.length){for(var t=[],n=0,i=e.length;n<i;n++){var o=e[n],s=this.getItem(o);s&&t.push(s)}return t}},v.prototype.remove=function(e){e=a(e);var t=this.getItems(e);if(t&&t.length){this._itemsOn(t,"remove",function(){this.emitEvent("removeComplete",[this,t])});for(var n=0,i=t.length;n<i;n++){var o=t[n];o.remove(),d(o,this.items)}}},v.prototype.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="";for(var t=0,n=this.items.length;t<n;t++){this.items[t].destroy()}this.unbindResize();var o=this.element.outlayerGUID;delete g[o],delete this.element.outlayerGUID,i&&i.removeData(this.element,this.constructor.namespace)},v.data=function(e){var t=e&&e.outlayerGUID;return t&&g[t]},v.create=function(e,o){function r(){v.apply(this,arguments)}return Object.create?r.prototype=Object.create(v.prototype):s(r.prototype,v.prototype),r.prototype.constructor=r,r.defaults=s({},v.defaults),s(r.defaults,o),r.prototype.settings={},r.namespace=e,r.data=v.data,r.Item=function(){f.apply(this,arguments)},r.Item.prototype=new f,c(function(){for(var o=e.replace(/(.)([A-Z])/g,function(e,t,n){return t+"-"+n}).toLowerCase(),s=t.querySelectorAll(".js-"+o),a="data-"+o+"-options",l=0,c=s.length;l<c;l++){var d,u=s[l],h=u.getAttribute(a);try{d=h&&JSON.parse(h)}catch(e){n&&n.error("Error parsing "+a+" on "+u.nodeName.toLowerCase()+(u.id?"#"+u.id:"")+": "+e);continue}var p=new r(u,d);i&&i.data(u,e,p)}}),i&&i.bridget&&i.bridget(e,r),r},v.Item=f,v}"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],u):"object"==typeof exports?module.exports=u(require("eventie"),require("doc-ready"),require("wolfy87-eventemitter"),require("get-size"),require("desandro-matches-selector"),require("./item")):e.Outlayer=u(e.eventie,e.docReady,e.EventEmitter,e.getSize,e.matchesSelector,e.Outlayer.Item)}(window),function(e){var t=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,i=e.length;n<i;n++){if(e[n]===t)return n}return-1};function n(e,n){var i=e.create("masonry");return i.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var e=this.cols;for(this.colYs=[];e--;)this.colYs.push(0);this.maxY=0},i.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var e=this.items[0],t=e&&e.element;this.columnWidth=t&&n(t).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},i.prototype.getContainerWidth=function(){var e=this.options.isFitWidth?this.element.parentNode:this.element,t=n(e);this.containerWidth=t&&t.innerWidth},i.prototype._getItemLayoutPosition=function(e){e.getSize();var n=e.size.outerWidth%this.columnWidth,i=Math[n&&n<1?"round":"ceil"](e.size.outerWidth/this.columnWidth);i=Math.min(i,this.cols);for(var o=this._getColGroup(i),s=Math.min.apply(Math,o),r=t(o,s),a={x:this.columnWidth*r,y:s},l=s+e.size.outerHeight,c=this.cols+1-o.length,d=0;d<c;d++)this.colYs[r+d]=l;return a},i.prototype._getColGroup=function(e){if(e<2)return this.colYs;for(var t=[],n=this.cols+1-e,i=0;i<n;i++){var o=this.colYs.slice(i,i+e);t[i]=Math.max.apply(Math,o)}return t},i.prototype._manageStamp=function(e){var t=n(e),i=this._getElementOffset(e),o=this.options.isOriginLeft?i.left:i.right,s=o+t.outerWidth,r=Math.floor(o/this.columnWidth);r=Math.max(0,r);var a=Math.floor(s/this.columnWidth);a-=s%this.columnWidth?0:1,a=Math.min(this.cols-1,a);for(var l=(this.options.isOriginTop?i.top:i.bottom)+t.outerHeight,c=r;c<=a;c++)this.colYs[c]=Math.max(l,this.colYs[c])},i.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this.options.isFitWidth&&(e.width=this._getContainerFitWidth()),e},i.prototype._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t&&0===this.colYs[t];)e++;return(this.cols-e)*this.columnWidth-this.gutter},i.prototype.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!==this.containerWidth},i}"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],n):"object"==typeof exports?module.exports=n(require("outlayer"),require("get-size")):e.Masonry=n(e.Outlayer,e.getSize)}(window),function(e){var t={},n={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onSliderResize:function(){}};e.fn.bxSlider=function(o){if(0==this.length)return this;if(this.length>1)return this.each(function(){e(this).bxSlider(o)}),this;var s={},r=this;t.el=this;var a=e(window).width(),l=e(window).height(),c=function(){s.settings=e.extend({},n,o),s.settings.slideWidth=parseInt(s.settings.slideWidth),s.children=r.children(s.settings.slideSelector),s.children.length<s.settings.minSlides&&(s.settings.minSlides=s.children.length),s.children.length<s.settings.maxSlides&&(s.settings.maxSlides=s.children.length),s.settings.randomStart&&(s.settings.startSlide=Math.floor(Math.random()*s.children.length)),s.active={index:s.settings.startSlide},s.carousel=s.settings.minSlides>1||s.settings.maxSlides>1,s.carousel&&(s.settings.preloadImages="all"),s.minThreshold=s.settings.minSlides*s.settings.slideWidth+(s.settings.minSlides-1)*s.settings.slideMargin,s.maxThreshold=s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin,s.working=!1,s.controls={},s.interval=null,s.animProp="vertical"==s.settings.mode?"top":"left",s.usingCSS=s.settings.useCSS&&"fade"!=s.settings.mode&&function(){var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var n in t)if(void 0!==e.style[t[n]])return s.cssPrefix=t[n].replace("Perspective","").toLowerCase(),s.animProp="-"+s.cssPrefix+"-transform",!0;return!1}(),"vertical"==s.settings.mode&&(s.settings.maxSlides=s.settings.minSlides),r.data("origStyle",r.attr("style")),r.children(s.settings.slideSelector).each(function(){e(this).data("origStyle",e(this).attr("style"))}),d()},d=function(){r.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>'),s.viewport=r.parent(),s.loader=e('<div class="bx-loading" />'),s.viewport.prepend(s.loader),r.css({width:"horizontal"==s.settings.mode?100*s.children.length+215+"%":"auto",position:"relative"}),s.usingCSS&&s.settings.easing?r.css("-"+s.cssPrefix+"-transition-timing-function",s.settings.easing):s.settings.easing||(s.settings.easing="swing"),g(),s.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),s.viewport.parent().css({maxWidth:f()}),s.settings.pager||s.viewport.parent().css({margin:"0 auto 0px"}),s.children.css({float:"horizontal"==s.settings.mode?"left":"none",listStyle:"none",position:"relative"}),s.children.css("width",m()),"horizontal"==s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginRight",s.settings.slideMargin),"vertical"==s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginBottom",s.settings.slideMargin),"fade"==s.settings.mode&&(s.children.css({position:"absolute",zIndex:0,display:"none"}),s.children.eq(s.settings.startSlide).css({zIndex:s.settings.slideZIndex,display:"block"})),s.controls.el=e('<div class="bx-controls" />'),s.settings.captions&&T(),s.active.last=s.settings.startSlide==v()-1,s.settings.video&&r.fitVids();var t=s.children.eq(s.settings.startSlide);"all"==s.settings.preloadImages&&(t=s.children),s.settings.ticker?s.settings.pager=!1:(s.settings.pager&&w(),s.settings.controls&&k(),s.settings.auto&&s.settings.autoControls&&C(),(s.settings.controls||s.settings.autoControls||s.settings.pager)&&s.viewport.after(s.controls.el)),u(t,h)},u=function(t,n){var i=t.find("img, iframe").length;if(0!=i){var o=0;t.find("img, iframe").each(function(){e(this).one("load",function(){++o==i&&n()}).each(function(){this.complete&&e(this).load()})})}else n()},h=function(){if(s.settings.infiniteLoop&&"fade"!=s.settings.mode&&!s.settings.ticker){var t="vertical"==s.settings.mode?s.settings.minSlides:s.settings.maxSlides,n=s.children.slice(0,t).clone().addClass("bx-clone"),i=s.children.slice(-t).clone().addClass("bx-clone");r.append(n).prepend(i)}s.loader.remove(),b(),"vertical"==s.settings.mode&&(s.settings.adaptiveHeight=!0),s.viewport.height(p()),r.redrawSlider(),s.settings.onSliderLoad(s.active.index),s.initialized=!0,s.settings.responsive&&e(window).bind("resize",R),s.settings.auto&&s.settings.autoStart&&M(),s.settings.ticker&&P(),s.settings.pager&&D(s.settings.startSlide),s.settings.controls&&O(),s.settings.touchEnabled&&!s.settings.ticker&&A()},p=function(){var t=0,n=e();if("vertical"==s.settings.mode||s.settings.adaptiveHeight)if(s.carousel){var o=1==s.settings.moveSlides?s.active.index:s.active.index*y();for(n=s.children.eq(o),i=1;i<=s.settings.maxSlides-1;i++)n=o+i>=s.children.length?n.add(s.children.eq(i-1)):n.add(s.children.eq(o+i))}else n=s.children.eq(s.active.index);else n=s.children;return"vertical"==s.settings.mode?(n.each(function(){t+=e(this).outerHeight()}),s.settings.slideMargin>0&&(t+=s.settings.slideMargin*(s.settings.minSlides-1))):t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight(!1)}).get()),t},f=function(){var e="100%";return s.settings.slideWidth>0&&(e="horizontal"==s.settings.mode?s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin:s.settings.slideWidth),e},m=function(){var e=s.settings.slideWidth,t=s.viewport.width();return 0==s.settings.slideWidth||s.settings.slideWidth>t&&!s.carousel||"vertical"==s.settings.mode?e=t:s.settings.maxSlides>1&&"horizontal"==s.settings.mode&&(t>s.maxThreshold||t<s.minThreshold&&(e=(t-s.settings.slideMargin*(s.settings.minSlides-1))/s.settings.minSlides)),e},g=function(){var e=1;if("horizontal"==s.settings.mode&&s.settings.slideWidth>0)if(s.viewport.width()<s.minThreshold)e=s.settings.minSlides;else if(s.viewport.width()>s.maxThreshold)e=s.settings.maxSlides;else{var t=s.children.first().width();e=Math.floor(s.viewport.width()/t)}else"vertical"==s.settings.mode&&(e=s.settings.minSlides);return e},v=function(){var e=0;if(s.settings.moveSlides>0)if(s.settings.infiniteLoop)e=s.children.length/y();else for(var t=0,n=0;t<s.children.length;)++e,t=n+g(),n+=s.settings.moveSlides<=g()?s.settings.moveSlides:g();else e=Math.ceil(s.children.length/g());return e},y=function(){return s.settings.moveSlides>0&&s.settings.moveSlides<=g()?s.settings.moveSlides:g()},b=function(){if(s.children.length>s.settings.maxSlides&&s.active.last&&!s.settings.infiniteLoop){if("horizontal"==s.settings.mode){var e=s.children.last(),t=e.position();_(-(t.left-(s.viewport.width()-e.width())),"reset",0)}else if("vertical"==s.settings.mode){var n=s.children.length-s.settings.minSlides;t=s.children.eq(n).position();_(-t.top,"reset",0)}}else{t=s.children.eq(s.active.index*y()).position();s.active.index==v()-1&&(s.active.last=!0),null!=t&&("horizontal"==s.settings.mode?_(-t.left,"reset",0):"vertical"==s.settings.mode&&_(-t.top,"reset",0))}},_=function(e,t,n,i){if(s.usingCSS){var o="vertical"==s.settings.mode?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";r.css("-"+s.cssPrefix+"-transition-duration",n/1e3+"s"),"slide"==t?(r.css(s.animProp,o),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),N()})):"reset"==t?r.css(s.animProp,o):"ticker"==t&&(r.css("-"+s.cssPrefix+"-transition-timing-function","linear"),r.css(s.animProp,o),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),_(i.resetValue,"reset",0),z()}))}else{var a={};a[s.animProp]=e,"slide"==t?r.animate(a,n,s.settings.easing,function(){N()}):"reset"==t?r.css(s.animProp,e):"ticker"==t&&r.animate(a,speed,"linear",function(){_(i.resetValue,"reset",0),z()})}},x=function(){for(var t="",n=v(),i=0;n>i;i++){var o="";s.settings.buildPager&&e.isFunction(s.settings.buildPager)?(o=s.settings.buildPager(i),s.pagerEl.addClass("bx-custom-pager")):(o=i+1,s.pagerEl.addClass("bx-default-pager")),t+='<div class="bx-pager-item"><a href="" data-slide-index="'+i+'" class="bx-pager-link">'+o+"</a></div>"}s.pagerEl.html(t)},w=function(){s.settings.pagerCustom?s.pagerEl=e(s.settings.pagerCustom):(s.pagerEl=e('<div class="bx-pager" />'),s.settings.pagerSelector?e(s.settings.pagerSelector).html(s.pagerEl):s.controls.el.addClass("bx-has-pager").append(s.pagerEl),x()),s.pagerEl.on("click","a",H)},k=function(){s.controls.next=e('<a class="bx-next" href="">'+s.settings.nextText+"</a>"),s.controls.prev=e('<a class="bx-prev" href="">'+s.settings.prevText+"</a>"),s.controls.next.bind("click",S),s.controls.prev.bind("click",$),s.settings.nextSelector&&e(s.settings.nextSelector).append(s.controls.next),s.settings.prevSelector&&e(s.settings.prevSelector).append(s.controls.prev),s.settings.nextSelector||s.settings.prevSelector||(s.controls.directionEl=e('<div class="bx-controls-direction" />'),s.controls.directionEl.append(s.controls.prev).append(s.controls.next),s.controls.el.addClass("bx-has-controls-direction").append(s.controls.directionEl))},C=function(){s.controls.start=e('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+s.settings.startText+"</a></div>"),s.controls.stop=e('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+s.settings.stopText+"</a></div>"),s.controls.autoEl=e('<div class="bx-controls-auto" />'),s.controls.autoEl.on("click",".bx-start",E),s.controls.autoEl.on("click",".bx-stop",j),s.settings.autoControlsCombine?s.controls.autoEl.append(s.controls.start):s.controls.autoEl.append(s.controls.start).append(s.controls.stop),s.settings.autoControlsSelector?e(s.settings.autoControlsSelector).html(s.controls.autoEl):s.controls.el.addClass("bx-has-controls-auto").append(s.controls.autoEl),L(s.settings.autoStart?"stop":"start")},T=function(){s.children.each(function(){var t=e(this).find("img:first").attr("title");null!=t&&(""+t).length&&e(this).append('<div class="bx-caption"><span>'+t+"</span></div>")})},S=function(e){s.settings.auto&&r.stopAuto(),r.goToNextSlide(),e.preventDefault()},$=function(e){s.settings.auto&&r.stopAuto(),r.goToPrevSlide(),e.preventDefault()},E=function(e){r.startAuto(),e.preventDefault()},j=function(e){r.stopAuto(),e.preventDefault()},H=function(t){s.settings.auto&&r.stopAuto();var n=e(t.currentTarget),i=parseInt(n.attr("data-slide-index"));i!=s.active.index&&r.goToSlide(i),t.preventDefault()},D=function(t){var n=s.children.length;return"short"==s.settings.pagerType?(s.settings.maxSlides>1&&(n=Math.ceil(s.children.length/s.settings.maxSlides)),void s.pagerEl.html(t+1+s.settings.pagerShortSeparator+n)):(s.pagerEl.find("a").removeClass("active"),void s.pagerEl.each(function(n,i){e(i).find("a").eq(t).addClass("active")}))},N=function(){if(s.settings.infiniteLoop){var e="";0==s.active.index?e=s.children.eq(0).position():s.active.index==v()-1&&s.carousel?e=s.children.eq((v()-1)*y()).position():s.active.index==s.children.length-1&&(e=s.children.eq(s.children.length-1).position()),e&&("horizontal"==s.settings.mode?_(-e.left,"reset",0):"vertical"==s.settings.mode&&_(-e.top,"reset",0))}s.working=!1,s.settings.onSlideAfter(s.children.eq(s.active.index),s.oldIndex,s.active.index)},L=function(e){s.settings.autoControlsCombine?s.controls.autoEl.html(s.controls[e]):(s.controls.autoEl.find("a").removeClass("active"),s.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active"))},O=function(){1==v()?(s.controls.prev.addClass("disabled"),s.controls.next.addClass("disabled")):!s.settings.infiniteLoop&&s.settings.hideControlOnEnd&&(0==s.active.index?(s.controls.prev.addClass("disabled"),s.controls.next.removeClass("disabled")):s.active.index==v()-1?(s.controls.next.addClass("disabled"),s.controls.prev.removeClass("disabled")):(s.controls.prev.removeClass("disabled"),s.controls.next.removeClass("disabled")))},M=function(){s.settings.autoDelay>0?setTimeout(r.startAuto,s.settings.autoDelay):r.startAuto(),s.settings.autoHover&&r.hover(function(){s.interval&&(r.stopAuto(!0),s.autoPaused=!0)},function(){s.autoPaused&&(r.startAuto(!0),s.autoPaused=null)})},P=function(){var t=0;if("next"==s.settings.autoDirection)r.append(s.children.clone().addClass("bx-clone"));else{r.prepend(s.children.clone().addClass("bx-clone"));var n=s.children.first().position();t="horizontal"==s.settings.mode?-n.left:-n.top}_(t,"reset",0),s.settings.pager=!1,s.settings.controls=!1,s.settings.autoControls=!1,s.settings.tickerHover&&!s.usingCSS&&s.viewport.hover(function(){r.stop()},function(){var t=0;s.children.each(function(){t+="horizontal"==s.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)});var n=s.settings.speed/t,i="horizontal"==s.settings.mode?"left":"top",o=n*(t-Math.abs(parseInt(r.css(i))));z(o)}),z()},z=function(e){speed=e||s.settings.speed;var t={left:0,top:0},n={left:0,top:0};"next"==s.settings.autoDirection?t=r.find(".bx-clone").first().position():n=s.children.first().position();var i="horizontal"==s.settings.mode?-t.left:-t.top,o="horizontal"==s.settings.mode?-n.left:-n.top;_(i,"ticker",speed,{resetValue:o})},A=function(){s.touch={start:{x:0,y:0},end:{x:0,y:0}},s.viewport.bind("touchstart",F)},F=function(e){if(s.working)e.preventDefault();else{s.touch.originalPos=r.position();var t=e.originalEvent;s.touch.start.x=t.changedTouches[0].pageX,s.touch.start.y=t.changedTouches[0].pageY,s.viewport.bind("touchmove",I),s.viewport.bind("touchend",W)}},I=function(e){var t=e.originalEvent,n=Math.abs(t.changedTouches[0].pageX-s.touch.start.x),i=Math.abs(t.changedTouches[0].pageY-s.touch.start.y);if(3*n>i&&s.settings.preventDefaultSwipeX?e.preventDefault():3*i>n&&s.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!=s.settings.mode&&s.settings.oneToOneTouch){var o=0;if("horizontal"==s.settings.mode){var r=t.changedTouches[0].pageX-s.touch.start.x;o=s.touch.originalPos.left+r}else{r=t.changedTouches[0].pageY-s.touch.start.y;o=s.touch.originalPos.top+r}_(o,"reset",0)}},W=function(e){s.viewport.unbind("touchmove",I);var t=e.originalEvent,n=0;if(s.touch.end.x=t.changedTouches[0].pageX,s.touch.end.y=t.changedTouches[0].pageY,"fade"==s.settings.mode){(i=Math.abs(s.touch.start.x-s.touch.end.x))>=s.settings.swipeThreshold&&(s.touch.start.x>s.touch.end.x?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto())}else{var i=0;"horizontal"==s.settings.mode?(i=s.touch.end.x-s.touch.start.x,n=s.touch.originalPos.left):(i=s.touch.end.y-s.touch.start.y,n=s.touch.originalPos.top),!s.settings.infiniteLoop&&(0==s.active.index&&i>0||s.active.last&&0>i)?_(n,"reset",200):Math.abs(i)>=s.settings.swipeThreshold?(0>i?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto()):_(n,"reset",200)}s.viewport.unbind("touchend",W)},R=function(){var t=e(window).width(),n=e(window).height();(a!=t||l!=n)&&(a=t,l=n,r.redrawSlider(),s.settings.onSliderResize.call(r,s.active.index))};return r.goToSlide=function(t,n){if(!s.working&&s.active.index!=t)if(s.working=!0,s.oldIndex=s.active.index,s.active.index=0>t?v()-1:t>=v()?0:t,s.settings.onSlideBefore(s.children.eq(s.active.index),s.oldIndex,s.active.index),"next"==n?s.settings.onSlideNext(s.children.eq(s.active.index),s.oldIndex,s.active.index):"prev"==n&&s.settings.onSlidePrev(s.children.eq(s.active.index),s.oldIndex,s.active.index),s.active.last=s.active.index>=v()-1,s.settings.pager&&D(s.active.index),s.settings.controls&&O(),"fade"==s.settings.mode)s.settings.adaptiveHeight&&s.viewport.height()!=p()&&s.viewport.animate({height:p()},s.settings.adaptiveHeightSpeed),s.children.filter(":visible").fadeOut(s.settings.speed).css({zIndex:0}),s.children.eq(s.active.index).css("zIndex",s.settings.slideZIndex+1).fadeIn(s.settings.speed,function(){e(this).css("zIndex",s.settings.slideZIndex),N()});else{s.settings.adaptiveHeight&&s.viewport.height()!=p()&&s.viewport.animate({height:p()},s.settings.adaptiveHeightSpeed);var i=0,o={left:0,top:0};if(!s.settings.infiniteLoop&&s.carousel&&s.active.last)if("horizontal"==s.settings.mode){o=(l=s.children.eq(s.children.length-1)).position(),i=s.viewport.width()-l.outerWidth()}else{var a=s.children.length-s.settings.minSlides;o=s.children.eq(a).position()}else if(s.carousel&&s.active.last&&"prev"==n){var l,c=1==s.settings.moveSlides?s.settings.maxSlides-y():(v()-1)*y()-(s.children.length-s.settings.maxSlides);o=(l=r.children(".bx-clone").eq(c)).position()}else if("next"==n&&0==s.active.index)o=r.find("> .bx-clone").eq(s.settings.maxSlides).position(),s.active.last=!1;else if(t>=0){var d=t*y();o=s.children.eq(d).position()}if(void 0!==o){var u="horizontal"==s.settings.mode?-(o.left-i):-o.top;_(u,"slide",s.settings.speed)}}},r.goToNextSlide=function(){if(s.settings.infiniteLoop||!s.active.last){var e=parseInt(s.active.index)+1;r.goToSlide(e,"next")}},r.goToPrevSlide=function(){if(s.settings.infiniteLoop||0!=s.active.index){var e=parseInt(s.active.index)-1;r.goToSlide(e,"prev")}},r.startAuto=function(e){s.interval||(s.interval=setInterval(function(){"next"==s.settings.autoDirection?r.goToNextSlide():r.goToPrevSlide()},s.settings.pause),s.settings.autoControls&&1!=e&&L("stop"))},r.stopAuto=function(e){s.interval&&(clearInterval(s.interval),s.interval=null,s.settings.autoControls&&1!=e&&L("start"))},r.getCurrentSlide=function(){return s.active.index},r.getCurrentSlideElement=function(){return s.children.eq(s.active.index)},r.getSlideCount=function(){return s.children.length},r.redrawSlider=function(){s.children.add(r.find(".bx-clone")).outerWidth(m()),s.viewport.css("height",p()),s.settings.ticker||b(),s.active.last&&(s.active.index=v()-1),s.active.index>=v()&&(s.active.last=!0),s.settings.pager&&!s.settings.pagerCustom&&(x(),D(s.active.index))},r.destroySlider=function(){s.initialized&&(s.initialized=!1,e(".bx-clone",this).remove(),s.children.each(function(){null!=e(this).data("origStyle")?e(this).attr("style",e(this).data("origStyle")):e(this).removeAttr("style")}),null!=e(this).data("origStyle")?this.attr("style",e(this).data("origStyle")):e(this).removeAttr("style"),e(this).unwrap().unwrap(),s.controls.el&&s.controls.el.remove(),s.controls.next&&s.controls.next.remove(),s.controls.prev&&s.controls.prev.remove(),s.pagerEl&&s.settings.controls&&s.pagerEl.remove(),e(".bx-caption",this).remove(),s.controls.autoEl&&s.controls.autoEl.remove(),clearInterval(s.interval),s.settings.responsive&&e(window).unbind("resize",R))},r.reloadSlider=function(e){null!=e&&(o=e),r.destroySlider(),c()},c(),this}}(jQuery),$.fn.mapYandexRedraw=function(){$(this).each(function(){var e=$(this).data("ymap");e&&e.container.fitToViewport()})},$.fn.mapYandex=function(e,t){$(this).each(function(){var n=$(this),o=e||JSON.parse(n.attr("data-map-settings")),s=o.map_center,r=o.map_places,a=(o.map_type,o.map_zoom),l=o.map_drag;function c(){ymaps.ready(function(){var e,o=n.data("ymap");for(o?o.setCenter(s,Number(a)):(o=new ymaps.Map(n[0],{center:s,zoom:a,controls:["geolocationControl","fullscreenControl","zoomControl"]}),n.data("ymap",o),t&&t(o)),l?o.behaviors.enable("drag"):o.behaviors.disable("drag"),o.behaviors.disable("scrollZoom"),o.geoObjects.removeAll(),i=0;i<r.length;i++){var c=r[i],d=[c.lat,c.lng];e=new ymaps.Placemark(d,{hintContent:c.title,balloonContentHeader:c.title,balloonContentBody:c.address},{balloonCloseButton:!0,balloonPanelMaxMapArea:"Infinity",balloonPane:"outerBalloon",preset:"islands#"+c.color+"DotIcon"}),o.geoObjects.add(e)}})}if(window.ymaps)c();else if(window.ymaps_loading)window.ymaps_loading.push(c);else{window.ymaps_loading=[c];var d="ru"==window.locale_lang?"ru_RU":"en_US";$.getScript("//api-maps.yandex.ru/2.1/?lang="+d,function(){$.each(window.ymaps_loading,function(){this()})})}})},alertify.genericDialog||alertify.dialog("genericDialog",function(){return{main:function(e){this.setContent(e);var t=$(e).hasClass("wide");$(this.elements.dialog).toggleClass("wide",t);var n=navigator.userAgent.match(/Android\s+([\d\.]+)/);if(n&&(n=n[1])<"4"){var i=0;$(this.elements.modal).on("touchstart",function(e){i=this.scrollTop+e.originalEvent.touches[0].pageY,e.preventDefault()}).on("touchmove",function(e){this.scrollTop=i-e.originalEvent.touches[0].pageY,e.preventDefault()})}},setup:function(){return{options:{basic:!0,maximizable:!1,resizable:!1,padding:!1}}},hooks:{onshow:function(){this.bodyScroll=$("body")[0].scrollTop,$(".ajs-global-close").remove(),$(this.elements.dialog).hasClass("wide")?($(this.elements.root).find(".ajs-close").hide(),$(this.elements.root).append($("<button class='ajs-global-close'></button>").click(function(){$(this).parent().find(".ajs-close").click()}))):$(this.elements.root).find(".ajs-close").show()},onclose:function(){this.bodyScroll&&($("body")[0].scrollTop=this.bodyScroll),$(".ajs-global-close").remove()}}}}),$.fn.lpCounty=function(e){$(this).each(function(){var t,n,i=e||JSON.parse($(this).attr("data-datetime")),o=new Date,s=o.getFullYear(),r=o.getMonth(),a=o.getDay(),l=o.getDate(),c=o.getDate()+1,d=i.time.split(":"),u=d[0],h=d[1];switch(i.type){case"datetime":t=new Date(i.date+" "+i.time),isNaN(t)&&(t=0);break;case"monthly":var p,f=r+1;if(n=i.day-l,2==f?s%4==0?(30!=i.day&&31!=i.day||(n=29-l),p=29):(29!=i.day&&30!=i.day&&31!=i.day||(n=28-l),p=28):4==f||6==f||9==f||11==f?(31==i.day&&(n=30-l),p=30):p=31,n<0)n=p+n;else if(0==n){new Date(s,r,l,u,h)<o&&(n=p)}l>i.day?(l=1==i.day?1:i.day,t=new Date(s,r+1,l,u,h)):t=new Date(s,r,l+n,u,h),isNaN(t)&&(t=0);break;case"weekly":if(0==(n=i.dayOfWeek-a))new Date(s,r,l,u,h)<o&&(n=7);n<0&&(n=7+n),t=new Date(s,r,l+n,u,h),isNaN(t)&&(t=0);break;case"daily":(t=new Date(s,r,l,u,h))<o&&(t=new Date(s,r,c,u,h)),isNaN(t)&&(t=0)}$(this).empty().county({endDateTime:t,labels:"ru"==window.locale_lang?{d:"дни",h:"часы",m:"минуты",s:"секунды"}:void 0})})},$.fn.lpFancybox=function(){$(this).each(function(){var e=$(this).parents(".gallery").eq(0),t=e.attr("rel");if(!t){var n=$(this).parents("body > *").eq(0).attr("id");t="rel_"+e.attr("class").match(/gallery_(\d+)/)[1]+"_"+n,e.attr("rel",t)}$(this).attr("rel",t)}),$(this).fancybox({openEffect:"elastic",closeEffect:"elastic",helpers:{title:{type:"inside"}}})},$.fn.lpMasonry=function(){var e=$(this);function t(){const t=e.data("masonry-gutter");e.masonry({itemSelector:".masonry .item_block",gutter:t||10,singleMode:!0,columnWidth:".masonry .item_block"}),e.masonry("reloadItems")}e.find("img").unbind("load").bind("load",t),t()},$.fn.lpBxSlider=function(){$(this).each(function(){var e=$(this),t={controls:!0,slideMargin:10,slideSelector:"div.item_block:visible",slideWidth:367},n=1200;function i(i){var o=e.data("minSlides");$(window).width()<n?(t.minSlides=1,t.maxSlides=1,t.adaptiveHeight=!0):(t.minSlides=3,t.maxSlides=3,t.adaptiveHeight=!1),o!=t.minSlides&&(e.data("minSlides",t.minSlides),i&&e.data("slider").reloadSlider(t))}i();var o=e.find("div.item_block.bx-clone").size();if(0!=e.find(".item_block:visible").not(".bx-clone").size())if(0==o){var s=e.bxSlider(t),r=e.find(".item_block:visible").not(".bx-clone").size();e.data("counter",r),e.data("slider",s),$(window).resize(function(){i(!0)})}else{e.data("counter"),s=e.data("slider");var a=e.find(".item_block:visible").not(".bx-clone").size();s.reloadSlider(t),e.data("counter",a)}})},$.fn.lpStickyMenu=function(){$(this).each(function(){var e=$(this).parents("[id^=id]");e.addClass("sticky_menu_component"),e.on("click",".items li a",function(t){t.preventDefault();var n=$(document).find($(this).data("id")).offset().top;$(document).find("html").animate({scrollTop:n},500),e.removeClass("active")}),e.on("click",".toggler",function(t){t.preventDefault(),e.toggleClass("active")}),Stickyfill.add(e)})},$.fn.textBlockHeight=function(){$(this).each(function(){var e=$(this),t=e.find(".overlay"),n=e.find(".in");e.hover(function(){t.height(n.outerHeight())},function(){t.css("height","")})})},$(function(){$(document).on("track_sent",function(){"function"==typeof extraHtmlSubmit?extraHtmlSubmit():window.parent&&"function"==typeof parent.extraHtmlSubmit&&window.parent.extraHtmlSubmit()}),$(".gallery_2 .item_list .item_block .item").textBlockHeight(),$(".countdown").lpCounty(),$(".fancybox:visible").lpFancybox(),$(".masonry:visible").lpMasonry(),$(".slider > div").lpBxSlider(),$(".map").mapYandex(),$(".sticky_menu").lpStickyMenu(),initForms(),initOrderButton(),initPolicyInfo(),initFAQ()});