var require_min=function(f){require.define("http://uxcandy.com/~boomyjee/templater/lib/client/style.css",!0),require.define("http://uxcandy.com/~boomyjee/templater/lib/client/controls/component.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={},i=teacss.jQuery,a=window.Component=i.Class.extend({baseId:(new Date).getTime(),load:function(e,t){function n(){i.each(e,function(){this.afterLoad()}),t&&t()}var r=[],o=[];i.each(e,function(){this.type&&(r.push(this),o.push(this.value))});var s=a.request={};r.length?a.app.request("component",{values:JSON.stringify(o)},function(e){a.request==s&&(i.each(r,function(t){this.html=e[t].html,this.form=e[t].form}),n())}):n()},classFromName:function(e){var t,n=e.split("."),i=n[0];if(t="ui"==i?teacss.ui:window[i])for(var a=1;a<n.length;a++)t&&(t=t[n[a]]);if(!t)throw new Error("Can't find class for name: "+e);return t}},{init:function(e){this.value=e||{},this.styleControls=[],this.zIndex=100,this.value.id||(this.value.id="id"+ ++this.Class.baseId),this.children=[],e&&e.type&&(this.type=a.app.components[e.type]),this.type=this.type||{}},load:function(e,t){this.parent=e,this.index=t,this.position(),this.html=this.type.new.html,this.form=this.type.new.form,this.afterLoad()},afterLoad:function(e){if(!this.element){this.scripts=[];{i.buildFragment([this.html],document,this.scripts)}this.element=i(this.html,a.previewFrame.document).eq(0),this.element.attr("id")||this.element.attr("id",this.value.id),this.element.find("br.component-area").remove(),this.element.data("component",this);var t;t=this.inherited||!this.parent||this.parent.inherited?i("<span>").text(this.type.name):i("<a href='#'>").text(this.type.name).click(function(e){e.preventDefault(),s.changeType()});var n=!1;!this.parent||this.inherited||this.parent.inherited||(n=i("<a href='#' class='close-link'>").text("del").click(function(e){e.preventDefault(),a.previewFrame.select(!1),s.remove()}));var r=!1;this.form&&!this.inherited&&this.parent&&!this.parent.inherited&&(r=i("<a href='#' class='edit-link'>").text("edit").click(function(e){e.preventDefault(),a.previewFrame.select(!1),s.edit()}));var o=!1;this.inherited||!this.parent||this.parent.inherited||(o=i("<a href='#' class='edit-link'>").text("copy").click(function(e){e.preventDefault(),s.clone()})),this.menu=i("<div>").append(i("<div class='combo-group'>").append(n,o,r,t,"<span>&nbsp;</span>",this.idLink=i("<a href='#'>").text("#"+this.value.id).click(function(e){e.preventDefault(),s.changeId()})))}!this.area&&this.type&&this.type.area&&(this.area=this.type.area===!0?this.element:this.element.find(this.type.area).eq(0));var s=this;s.componentHandle&&s.componentHandle.detach(),s.parentComponentHandle&&(s.parentComponentHandle.remove(),delete s.parentComponentHandle),this.type&&this.type.area&&(s.parentComponentHandle=i("<div class='parent-component-handle'>").text("Parent").click(function(e){a.previewFrame.select(s,e)})),s.parent?s.componentHandle=i("<div class='component-handle'>").data("component",this).click(function(e){a.previewFrame.select(s,e)}).append(s.headingHandle=i("<div class='component-heading'>").html(this.type.name||"Root"),s.controlsBack=i("<div class='controls-back'>").append(),s.controlsCenter=i("<div class='controls-center'>").append(s.addInsideButton=i("<span>+</span>").attr({title:"Add into this area"}).click(function(e){s.addInside(e)})),s.controlsTop=i("<div class='controls-top'>").append(s.addTopButton=i("<span>+</span>").attr({title:"Add before this component"}).click(function(e){s.addTop(e)})),s.controlsBottom=i("<div class='controls-bottom'>").append(s.addBottomButton=i("<span>+</span>").attr({title:"Add after this component"}).click(function(e){s.addBottom(e)})),s.controlsLeft=i("<div class='controls-left'>").append(),s.controlsRight=i("<div class='controls-right'>").append()):(s.componentHandle=i("<div class='controls-root'>"),s.inherited||s.componentHandle.append(i("<div class='add-section'>").append(i("<span>").text(_t("Add Section")).click(function(e){s.addInside(e)})))),a.previewFrame.handleContainer.append(s.componentHandle),a.previewFrame.handleContainer.append(s.parentComponentHandle),this.area&&this.inherited&&this.menu&&this.menu.append(s.redefineHandle=i("<div class='combo-item'>").html("Redefine").click(function(){a.previewFrame.select(!1),s.redefine()})),this.area&&!this.inherited&&this.parent&&this.parent.inherited&&this.menu&&this.menu.append(i("<div class='combo-item'>").html("Undefine").click(function(){a.previewFrame.select(!1),s.undefine()})),!this.parent||this.inherited||this.parent.inherited||s.headingHandle.add(s.addTopButton).each(function(){i(this).addClass("draggable"),i(this).data("component",s)}),this.parent&&this.componentHandle.dblclick(function(e){s.selectNext(e)}),this.form&&!this.inherited&&this.parent&&!this.parent.inherited&&s.headingHandle.dblclick(function(){return a.previewFrame.select(!1),s.edit(),!1}),this.parent&&(this.inherited||this.parent.inherited||s.componentHandle.append(i("<div class='sort-handle'>")),e?e.replaceWith&&(e.replaceWith(this.element),i.each(this.children,function(){s.area.append(this.element)})):this.position(),this.setHandleIndex()),this.type.clientControl&&!this.clientControl&&(s.clientControl=a.classFromName(this.type.clientControl)({cmp:s}),s.clientControl.bind("change",function(){s.value=s.clientControl.getValue(),clearTimeout(s.saveTimeout),s.saveTimeout=setTimeout(function(){a.previewFrame.trigger("change")},500)})),s.clientControl&&s.clientControl.setValue(s.value)},setHandleIndex:function(e,t){this.zIndex=this.parent?this.parent.zIndex+this.parent.children.indexOf(this)+3:100;var n=this,a=function(){var e=n.element.offset(),t={left:0,top:0};e||(e={}),t||(t={}),n.element.is("body")&&(e.top=0);var i=n.elementScale?n.elementScale.x:1,a=n.elementScale?n.elementScale.y:1,r=n.element.outerWidth(),o=n.element.outerHeight();if(n.parentComponentHandle){var s=Math.floor(e.left-t.left)+"px",l=Math.floor(e.top-t.top+o*a)+"px",c=n.parentComponentHandle[0];c.style.left!=s&&(c.style.left=s),c.style.top!=l&&(c.style.top=l)}if(n.componentHandle){var c=n.componentHandle[0],u={zIndex:n.zIndex,left:Math.floor(e.left-t.left)+"px",top:Math.floor(e.top-t.top)+"px",width:Math.floor(r*i)+"px",height:Math.floor(o*a)+"px"};for(var h in u)c.style[h]!=u[h]&&(c.style[h]=u[h])}};n.element&&(e?a():setTimeout(a,1)),t||i.each(this.children,function(){this.setHandleIndex(e)})},selectNext:function(e){var t=this,n=[],r=[],o=!1;i.each(t.parent.children,function(e,i){i==t?o=!0:o?r.push(i):n.push(i)});var s=r.concat(n);i.each(s,function(t,n){var i=n.element,r=i.offset(),o=i.outerWidth(),s=i.outerHeight(),l=e.pageX,c=e.pageY;return l>=r.left&&l<=r.left+o&&c>=r.top&&c<=r.top+s?(a.previewFrame.select(n),!1):void 0})},position:function(e,t){if(this.parent){var n=this.parent.children.indexOf(this);n>=0&&this.parent.children.splice(n,1)}if(e&&(this.parent=e,this.index=t),void 0===this.index){if(this.parent.children.push(this),this.parent.area?this.parent.area.append(this.element):console.debug("No area for",this),this.scripts&&this.scripts.length){var i=this;setTimeout(function(){for(var e=a.previewFrame.frame[0].contentWindow.document,t=e.head||e.getElementsByTagName("head")[0],n=teacss.LazyLoad_f(e),r=teacss.queue(1),o=0;o<i.scripts.length;o++){var s=i.scripts[o];s.src?r.defer(function(e,t){n.js([e],function(){t()})},s.src):r.defer(function(n,i){el=e.createElement("script"),el.innerHTML=n,t.appendChild(el),i()},s.innerHTML)}r.await(function(){}),i.scripts=[]},1)}}else{var n=this.parent.children.indexOf(this.index.before||this.index.after);this.index.before?(this.parent.children.splice(n,0,this),this.index.before.element.before(this.element)):(n==this.parent.children.length-1?this.parent.children.push(this):this.parent.children.splice(n+1,0,this),this.index.after.element.after(this.element))}},redefine:function(){this.inherited=!1;for(var e=0;e<this.children.length;e++)this.children[e].remove();this.children=[],this.area.empty(),this.afterLoad(!0),this.redefineHandle.remove(),a.previewFrame.trigger("change")},undefine:function(){this.remove(),a.previewFrame.trigger("change");var e=a.previewFrame;e.setValue(e.getValue())},remove:function(){var e=this.parent.children.indexOf(this);e>=0&&this.parent.children.splice(e,1),this.element.detach(),a.previewFrame.trigger("change"),this.componentHandle.remove();for(var e=0;e<this.children.length;e++)this.children[e].remove();this.removeControls(),a.previewFrame.root.setHandleIndex()},removeControls:function(){this.controls&&this.hasControls&&(i.each(this.controls,function(e,t){if(t.form){var n=t.form.items.indexOf(t);-1!=n&&t.form.items.splice(n,1)}t.element.remove()}),this.hasControls=!1,this.controls=[])},clone:function(){function e(n){var r=i.extend(!0,{},n.value);delete r.id;var o=new a(r);o.html=n.html,o.form=n.form;var s=a.app.settings.theme;return s.cmp&&(s.cmp[o.value.id]=i.extend(!0,{},s.cmp[n.value.id])),t.push(o),i.each(n.children,function(t,n){var i=e(n);i.parent=o,o.children.push(i)}),o}var t=[],n=e(this);n.parent=this.parent,n.afterLoad(),a.previewFrame.dropComponent({type:"after",cmp:this},n),i.each(t,function(e,t){t!=n&&t.afterLoad(),a.previewFrame.componentsHash[t.value.id]=t}),a.previewFrame.select(n),a.previewFrame.trigger("change")},addComponent:function(e,t,n){if(e.preventDefault(),(n||e.ctrlKey)&&a.app.options.allowSkipType){var i=a.previewFrame.dropComponent({type:t,cmp:this},{create:!0,type:{id:"container"}});a.previewFrame.trigger("change"),a.previewFrame.select(i)}else this.changeType({type:t,cmp:this})},addInside:function(e){this.addComponent(e,"inside",this==a.previewFrame.root)},addTop:function(e){this.addComponent(e,"left",this.parent==a.previewFrame.root)},addBottom:function(e){this.addComponent(e,"right",this.parent==a.previewFrame.root)},changeId:function(){var e,t=this;if((e=prompt("Enter new id",t.value.id))&&e!=t.value.id){var n=!1;if(i.each(a.app.settings.templates,function(){i.each_deep(this,function(){this&&this.value&&this.value.id==e&&(n=!0)})}),n)alert("This id is already taken");else{var r=t.value.id;t.value.id=e,t.element.attr("id",e),t.idLink.text("#"+e),t.removeControls();var o=a.app.form.value;i.each(o,function(){this[r]&&(this[e]=this[r],delete this[r])}),a.app.form.setValue(o),a.app.form.trigger("change"),a.app.updateComponentUI(t),a.previewFrame.select(t)}}},changeType:function(e){if(!a.typeDialog){a.typeDialog=teacss.ui.dialog({modal:!0,resizable:!1,draggable:!1,width:600,dialogClass:"change-type-dialog",title:_t("Select component type")});var t=a.app.components,n={};for(var r in t){var o=t[r];n[o.category]||(n[o.category]=[]),n[o.category].push(o)}var s=i("<div style='position:relative !important;'>").addClass("button-select-panel").click(function(e){e.stopPropagation()});a.typeDialog.element.css({padding:0}).append(s),s.append(s=i("<div>"));for(var l in n)s.append("<div class='combo-group'>"+l+"</div>"),i.each(n[l],function(){var e=this,t=i("<div class='combo-item'>").html(e.name).click(function(){var t,n=a.typeDialog.handle,i=a.typeDialog.cmp;if(n)t=a.previewFrame.dropComponent(n,{create:!0,type:e});else{i.hasControls=!1,i.controls=[],i.value={id:i.value.id,type:e.id},i.type=e;var r=i.element;delete i.element,delete i.area,i.html=i.type.new.html,i.form=i.type.new.form,i.afterLoad(r)}a.previewFrame.reloadScript=!0,a.previewFrame.trigger("change"),a.previewFrame.select(t||i),a.previewFrame.reloadTea(),a.typeDialog.close()});e.description&&t.append(i("<small>").html(e.description)),s.append(t)})}a.typeDialog.cmp=this,a.typeDialog.handle=e,a.typeDialog.element.css({maxHeight:.8*i(window).height()}),a.typeDialog.open()},edit:function(){var e=this;if(!e.dialog){var t=800;e.form&&e.form.control&&e.form.width&&(t=e.form.width),e.dialog=teacss.ui.dialog({modal:!0,resizable:!1,draggable:!1,width:t,title:e.type.name,dialogClass:"component-form",maxHeight:"90%",buttons:{Save:function(){if(e.dialog.control)var t=e.dialog.control.getValue();else var t=i.extend({id:e.value.id,type:e.value.type},e.dialog.element.find(":input").serializeObject());i(this).dialog("close"),a.app.request("component",{values:JSON.stringify([t]),dataSource:a.previewFrame.value.data},function(t){e.html=t[0].html,e.form=t[0].form,e.value=t[0].value;var n=e.element;delete e.element,delete e.area,e.afterLoad(n),a.previewFrame.reloadScript=!0,a.previewFrame.reloadTea(),a.previewFrame.trigger("change"),a.previewFrame.select(e)})},Cancel:function(){i(this).dialog("close"),a.previewFrame.select(e)}}}),e.dialog.element.css({overflowY:"scroll",overflowX:"hidden"}),e.dialog.reposition=function(){e.dialog.element.dialog("option","position",{my:"center",at:"center",of:window}),e.dialog.element.css({maxHeight:.9*i(window).height()})},setInterval(e.dialog.reposition,100),e.form&&e.form.control&&(e.dialog.control=a.classFromName(e.form.control)(),e.dialog.push(e.dialog.control))}e.dialog.control?(e.dialog.control.form=e.form,e.dialog.control.setValue(e.value)):(e.dialog.element.html(""),e.dialog.push(e.form),e.dialog.element.each(function(){var e=this;i(e).find("[data-value]").each(function(){function t(e){var t=r.clone();o.before(t),t.find("[name]").each(function(){var t=i(this).attr("name");i(this).attr("name",a+"[item_"+s+"]["+t+"]"),e&&e[t]&&i(this).val(e[t])}),t.find(".remove").click(function(e){e.preventDefault(),t.remove()}),s++}var n=i.parseJSON(i(this).attr("data-value")),a=i(this).attr("data-name"),r=i(this),o=i("<span>");r.removeAttr("data-value"),r.replaceWith(o);for(var s=0,l=0;l<n.length;l++)t(n[l]);i(e).find(".add[data-name='"+a+"']").click(function(e){e.preventDefault(),t()})})})),e.dialog.open(),a.currentDialog=e.dialog}});return t.exports||n}),require.define("http://uxcandy.com/~boomyjee/templater/lib/client/controls/previewFrame.js",function(e){var t=window.require.factory(e),n={exports:!1},i={},a=t.dir;return ui.previewFrame=ui.panel.extend({init:function(e){var t=this;this._super(e);var n=a+"/../blank.htm";this.frameWrapper=$("<div>").css({position:"absolute",left:0,right:0,top:0,bottom:0}).appendTo(this.element),this.frame=$("<iframe>",{id:"preview_frame",src:n}).css({width:"100%",height:"100%"}).appendTo(this.frameWrapper),this.frame.on("load",function(){var e=t.window=t.frame[0].contentWindow,n=t.document=e.document,i=t.frame.contents();t.$f=function(e){return teacss.jQuery(e,i)},t.trigger("init"),t.layoutMode(!0),t.$f(n).mousedown(function(e){t.frame.parent().trigger("mousedown");var n=$(e.target),i=n.data("component");n.hasClass("draggable")&&i&&!t.dragging&&(t.dragComponent=i,t.dragPoint={x:e.pageX,y:e.pageY},e.preventDefault())}),t.$f(n).mouseup(function(e){t.dragComponent=!1,t.dragging&&(t.drop(e),t.dragEnd(e))}),t.$f(n).mousemove(function(e){t.frame.parent().trigger(e),t.dragComponent&&!t.dragging&&(Math.abs(e.pageX-t.dragPoint.x)>3||Math.abs(e.pageY-t.dragPoint.y)>3)&&t.dragStart(e,t.dragComponent),t.dragging&&t.dragOver(e)}),t.$f(n).bind("contextmenu",function(){return t.select(!1),!1}),t.$f("body").click(function(e){var t=$(e.target);(t.is("[type=submit]")||t.is("[href]"))&&e.preventDefault()}),setInterval(function(){t.updateHandles()},1e3)}),Component.previewFrame=this},setValue:function(e){function t(e,n){e.value&&e.value.parentTemplate?(t(Component.app.settings.templates[e.value.parentTemplate]||{},!0),e.children&&$.each(e.children,function(){this.value&&this.value.id&&(o[this.value.id]={data:this,inherit:n})})):s=e}function n(e,t,a){t.children&&$.each(t.children,function(){var t=this,r=a;this.value&&this.value.id&&o&&o[this.value.id]&&(t=o[this.value.id].data,r=o[this.value.id].inherit);var s=new Component(this.value);s.parent=e,s.inherited=r,c.push(s),n(s,t,r),i.componentsHash[s.value.id]=s})}var i=this;this._super(e),i.componentsHash={};var a=i.$f;a("head").find("script").remove(),a("body").html("").append(i.handleContainer=$("<div>").addClass("handle-container")),i.dropHandle=!1;var r=i.root=new Component(e.template.value);r.element=a("body"),r.area=a("body");var o=!1,s=e.template,l=!1;i.root.value.parentTemplate&&(o={},t(e.template,!1),l=r.inherited=!0);var c=[];n(r,s,l),i.setLoading(!0),Component.load(c,function(){r.afterLoad(),i.setLoading(!1),i.reloadTea(!1,function(){i.trigger("loaded")})})},getValue:function(){function e(t){var n={};return n.value=t.value,t.children.length&&(n.children=[],$.each(t.children,function(){this&&this.type&&this.type.name&&n.children.push(e(this))})),n}function t(e){e.inherited?$.each(e.children,function(){t(this)}):a.push(e)}var n;if(this.root.inherited){var i=this.root.children,a=[];t(this.root),this.root.children=a,n=e(this.root),this.root.children=i}else n=e(this.root);return{template:n,data:this.value.data}},showHandles:function(e){var t=this;e?t.$f("body").removeClass("hide-handles"):t.$f("body").addClass("hide-handles")},view3dMode:function(e){function t(e,n,i,a){if(n>0){var r=e.parent.element.offset(),o=e.element.offset(),s=e.parent.element.width(),l=e.parent.element.height(),c=(s-20)/s,u=(l-20)/l,h=20+r.left-o.left,d=20+r.top-o.top,p="scale("+c+","+u+") translate(20px,20px)";e.element.css({"-webkit-transform":p,"-moz-transform":p,"-moz-transform-origin":h+"px "+d+"px","-webkit-transform-origin":h+"px "+d+"px"}),i*=c,a*=u,e.elementScale={x:i,y:a}}$.each(e.children,function(){t(this,n+1,i,a)})}var n=this;e?n.$f("body").addClass("view3d"):n.$f("body").removeClass("view3d"),n.view3d&&!e&&($.each(n.componentsHash,function(){var e=this;e.element.add(e.componentHandle).css({"-webkit-transform":"","-moz-transform":""}),e.elementScale=void 0}),n.updateHandles(!0)),e&&!n.view3d&&(t(n.root,-2,1,1),n.updateHandles(!0)),n.view3d=e},layoutMode:function(e){var t=this;this.$f("body").toggleClass("edit-layout",e),this.$f("body").toggleClass("view-layout",!e),!e&&this.layoutModeEnabled&&(t.view3dBackup=t.view3d,t.view3dMode(!1)),e&&!this.layoutModeEnabled&&setTimeout(function(){t.view3dMode(t.view3dBackup)},1),e?t.contentEditableBackup&&t.contentEditableBackup.attr("contenteditable","true"):t.contentEditableBackup=this.$f("[contenteditable]").removeAttr("contenteditable"),this.root&&this.root.setHandleIndex(),this.layoutModeEnabled=e},setLoading:function(e){e?this.$f("body").append("<div class='loading-handle'>"):this.$f(".loading-handle").remove()},reloadTea:function(e,t){function n(){i.processTea("templater_dynamic",Component.app.styles,Component.app.settings.theme.extra_js,e,t)}var i=this;i.window.templaterStaticLoaded||!Component.app.staticStyles||0==Component.app.staticStyles.length?n():i.processTea("templater_static",Component.app.staticStyles,!1,function(){i.window.templaterStaticLoaded=!0,n()}),teacss.files["templater_static.tea"]=teacss.files["templater_static.tea"]||" ",teacss.files["templater_dynamic.tea"]=teacss.files["templater_dynamic.tea"]||" ",teacss.files["templater_makefile.tea"]=teacss.files["templater_makefile.tea"]||"@import 'templater_static.tea';@import 'templater_dynamic.tea';"},processTea:function(e,t,n,i,a){for(var r=this,o=this.frame,s="",l=0;l<t.length;l++)s+='@import "'+t[l]+'";\n';n&&(s+="Script { @append {\n"+n+"\n}\n"),s+=" ",teacss.image.update=function(){},teacss.files[e+".tea"]=s,teacss.process(e+".tea",function(){teacss.tea.Style.insert(o[0].contentWindow.document),r.reloadScript&&r.$f("head script."+e).remove(),r.reloadScript=!1,teacss.tea.Script.insert(o[0].contentWindow.document),r.$f("head script:not([class*=templater])").addClass(e),r.updateHandles(),a&&a(),teacss.image.getDeferred()?teacss.image.update=function(){r.reloadTea(i)}:i&&i.call&&i()},o[0].contentWindow.document)},updateHandles:function(e){this.root&&this.root.setHandleIndex(e)},select:function(e,t){var n=this,i=Component.app;if($("#teacss-layer > .button-select-panel").hide(),t&&t.stopPropagation(),n.$f&&(n.$f(".component-handle").removeClass("selected selected-parent"),n.$f(".controls-handle").removeClass("selected"),n.$f(".parent-component-handle").removeClass("selected-parent")),e&&(e.componentHandle.addClass("selected"),$.each(e.overlayControls||[],function(){e.componentHandle.append(this.element)}),e.addInsideButton.toggleClass("visible",e.area&&!e.inherited?!0:!1),e.addTopButton.toggleClass("visible",e!=n.root&&!e.parent.inherited),e.addBottomButton.toggleClass("visible",e!=n.root&&!e.parent.inherited)),e==n.root&&(e=!1),n.selected=e,e&&e.parent&&e.parent!=n.root&&(e.parent.componentHandle.addClass("selected-parent"),e.parent.parentComponentHandle&&e.parent.parentComponentHandle.addClass("selected-parent")),n.contextMenu||(n.contextMenu=$("<div>").addClass("context-menu button-select-panel"),n.contextMenu.appendTo(i.componentPanel.element),n.contextMenu.click(function(e){e.stopPropagation()}),n.contextMenu.data("combo",n.contextMenu),n.contextMenu.getParentCombo=function(){return!1},n.contextStyles=ui.fieldset(),n.contextStyles.element.css({padding:10})),e){Component.app.updateComponentUI(e),n.contextStyles.element.children().detach(),n.contextMenu.children().detach(),n.contextMenu.append(e.menu),n.contextMenu.show(),i.stylePanel.element.hide(),i.breadcrumbs.show().empty();for(var a=e;a;)i.breadcrumbs.prepend(" > ",$("<a href='#'>").text(a.value.type).click(a,function(e){e.preventDefault(),n.select(e.data,e)})),a=a.parent,a==n.root&&(a=!1);{e.controls}e.controls&&e.controls.length&&(n.contextMenu.append(n.contextStyles.element),$.each(e.controls,function(){this.options.cmp=e,this.options.position?e[this.options.position].append(this.element):(n.contextStyles.push(this),"default"==this.options.comboDirection&&(this.options.comboDirection="right"))}))}else n.contextMenu.hide(),i.breadcrumbs.hide(),i.stylePanel.element.show()},initDragScroll:function(){var e=this;if(!e.dragScroll){e.dragScroll={top:$("<div>").css({top:0}),bottom:$("<div>").css({bottom:0})};var t,n,i=e.dragScroll.both=$(e.dragScroll.top).add(e.dragScroll.bottom);i.css({position:"fixed",left:0,right:0,height:20,zIndex:99999}),i.bind("mousemove",function(){if(e.dragging){if(e.$f("html,body").is(":animated"))return!0;var i=e.frame[0].contentWindow,a=i.document,r=$(i).scrollTop(),o=0==parseInt($(this).css("top"))?-1:1,s=-1==o?t:n,l=-1==o?r:$(a).height()-(r+$(i).height());if(void 0!=s&&s==l&&l>0){var c=r+50*o;e.$f("html,body").animate({scrollTop:c},0,"linear")}return-1==o?t=l:n=l,!0}$(this).hide()})}e.dragScroll.both.appendTo(e.$f("body"));var a=e.frame[0].contentWindow,r=a.document;$(r).height()>$(a).height()?e.dragScroll.both.show():e.dragScroll.both.hide()},dragStart:function(e,t){var n=this;n.$f&&(n.dragging=!0,n.initDragScroll(),n.Class.draggable=n.draggable=t,n.view3dBackupDrag=n.view3d,n.view3dMode(!0),n.$f("body").addClass("dragging"),n.$f(".controls-handle").addClass("hidden"))},dragEnd:function(){var e=this;e.dragging=!1,e.$f("body").removeClass("dragging"),e.$f(".controls-handle").removeClass("hidden"),e.$f(".sort-handle").removeClass("visible"),e.$f(".area-handle").removeClass("visible"),e.dragScroll&&e.dragScroll.both.hide(),e.view3dMode(e.view3dBackupDrag)},dragOver:function(e){function t(e){return e*e}function n(e,n){return t(e.x-n.x)+t(e.y-n.y)}function i(e,t,i){var a=n(t,i);if(0==a)return n(e,t);var r=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/a;return 0>r?n(e,t):r>1?n(e,i):n(e,{x:t.x+r*(i.x-t.x),y:t.y+r*(i.y-t.y)})}function a(t){var n=i({x:e.pageX,y:e.pageY},{x:t.x0,y:t.y0},{x:t.x1,y:t.y1});(!r||n<r.dist)&&(t.dist=n,r=t)}if(this.dragging){e.preventDefault();var r=!1,o=this,s=[o.root];$.each(o.componentsHash,function(){if(!this.parent||!this.parent.inherited){for(var e=this.parent;e;){if(e==o.draggable)return;e=e.parent}s.push(this)}}),$.each(s,function(){var e=this,t=e.element;if(t&&e!=o.root){var n=t.offset(),i=n.left,r=n.top,s=n.left+t.width(),l=n.top+t.height();a({x0:i,y0:r,x1:s,y1:r,cmp:e,type:"top"}),a({x0:i,y0:r,x1:i,y1:l,cmp:e,type:"left"}),a({x0:s,y0:r,x1:s,y1:l,cmp:e,type:"right"}),a({x0:i,y0:l,x1:s,y1:l,cmp:e,type:"bottom"})}}),$.each(s,function(){var t=this;if(!this.inherited&&this.area&&0==this.children.length){var n=this.area,i=n.offset();if(!i)return;var a=n.outerWidth(),o=n.outerHeight(),s=i.left,l=i.top,c=i.left+a,u=i.top+o;if(e.pageX>s&&e.pageY>l&&e.pageX<c&&e.pageY<u){var h=a*o;(!r||"inside"!=r.type||h<r.dist)&&(r={type:"inside",cmp:t,dist:h,x0:s,y0:l,x1:c,y1:u})}}}),r.cmp==o.draggable&&(r=!1),r?(o.dropHandle||(o.dropHandle=$("<div>").addClass("drop-marker").appendTo(o.handleContainer)),o.dropHandle.stop().show().css({opacity:1,left:r.x0,top:r.y0,width:r.x1-r.x0,height:r.y1-r.y0}),"inside"!=r.type?o.dropHandle.addClass("flat"):o.dropHandle.removeClass("flat"),o.dropHandle.min=r):o.dropHandle&&o.dropHandle.hide()}},dropComponent:function(e,t){var n=this,i=e.cmp;if(t!=i){var a,r=i.parent;if("inside"==e.type&&(r=i),("left"==e.type||"top"==e.type)&&(a={before:i}),"right"==e.type&&(a={after:i}),"bottom"==e.type){a={after:i};for(var o=r.children.indexOf(i)+1;o<r.children.length;o++){var s=r.children[o];if(s!=t){var l=s.componentHandle;if(l.offset().top+l.height()>e.y0)break;a={after:s}}}}if(t.create){var c=new Component({type:t.type.id});c.load(r,a),n.componentsHash[c.value.id]=c}else c=t,t.position(r,a);return n.root.setHandleIndex(),setTimeout(function(){n.reloadTea()},1),n.select(n.selected),c}},drop:function(e){var t=this;if(t.dragging=!1,e.preventDefault(),t.dropHandle&&t.dropHandle.min){var n=t.dropHandle.min,i=t.draggable;if(i!=n.cmp){var a=t.dropComponent(n,i);t.trigger("change"),setTimeout(function(){var e=a.element,n=e.offset();t.dropHandle.stop().removeClass("flat").css({opacity:1}).animate({left:n.left,top:n.top,width:e.outerWidth(),height:e.outerHeight()},600).animate({opacity:0},1e3,function(){t.dropHandle.hide()})},1)}}}}),n.exports||i}),require.define("http://uxcandy.com/~boomyjee/templater/lib/client/controls/serializeObject.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return function(e){e.fn.serializeObject=function(){var t=this,n={},i={},a={validate:/^[a-zA-Z][a-zA-Z0-9_-]*(?:\[(?:\d*|[a-zA-Z0-9_-]+)\])*$/,key:/[a-zA-Z0-9_-]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_-]+$/};return this.build=function(e,t,n){return e[t]=n,e},this.push_counter=function(e){return void 0===i[e]&&(i[e]=0),i[e]++},e.each(e(this).serializeArray(),function(){if(a.validate.test(this.name)){for(var i,r=this.name.match(a.key),o=this.value,s=this.name;void 0!==(i=r.pop());)s=s.replace(new RegExp("\\["+i+"\\]$"),""),i.match(a.push)?o=t.build([],t.push_counter(s),o):i.match(a.fixed)?o=t.build([],i,o):i.match(a.named)&&(o=t.build({},i,o));n=e.extend(!0,n,o)}}),n}}(teacss.jQuery),t.exports||n}),require.define("http://uxcandy.com/~boomyjee/templater/lib/client/controls/rasterizeHTML.js",function(e){var t=window.require.factory(e),n={exports:!1},i={};return!function(e){if("object"==typeof i)n.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.rasterizeHTML=e()}}(function(){var e;return function n(e,i,a){function r(s,l){if(!i[s]){if(!e[s]){var c="function"==typeof t&&t;if(!l&&c)return c(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return r(n?n:t)},u,u.exports,n,e,i,a)}return i[s].exports}for(var o="function"==typeof t&&t,s=0;s<a.length;s++)r(a[s]);return r}({1:[function(t,n,i){!function(a,r){"object"==typeof i?n.exports=r(t("url"),t("xmlserializer"),t("ayepromise"),t("inlineresources")):"function"==typeof e&&e.amd?e(["url","xmlserializer","ayepromise","inlineresources"],r):a.rasterizeHTML=r(a.url,a.xmlserializer,a.ayepromise,a.inlineresources)}(this,function(e,t,n,i){var a=function(e){"use strict";var t={},n=[];t.joinUrl=function(t,n){return t?e.resolve(t,n):n},t.getConstantUniqueIdFor=function(e){return n.indexOf(e)<0&&n.push(e),n.indexOf(e)},t.clone=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n};var i=function(e){return"object"==typeof e&&null!==e},a=function(e){return i(e)&&Object.prototype.toString.apply(e).match(/\[object (Canvas|HTMLCanvasElement)\]/i)},r=function(e){return"function"==typeof e};return t.parseOptionalParameters=function(e){var n={canvas:null,options:{},callback:null};return r(e[0])?n.callback=e[0]:null==e[0]||a(e[0])?(n.canvas=e[0]||null,r(e[1])?n.callback=e[1]:(n.options=t.clone(e[1]),n.callback=e[2]||null)):(n.options=t.clone(e[0]),n.callback=e[1]||null),n},t}(e),r=function(e,t){var n={};return n.baseUrlRespecting=function(t,n){var i=function(){var i=new t,a=i.open;return i.open=function(){var t=Array.prototype.slice.call(arguments),i=t.shift(),r=t.shift(),o=e.joinUrl(n,r);return a.apply(this,[i,o].concat(t))},i};return i},n.finishNotifying=function(e){var n=0,i=0,a=!1,r=t.defer(),o=function(){var e=n-i;0>=e&&a&&r.resolve({totalCount:n})},s=function(){var t=new e,a=t.send;return t.send=function(){return n+=1,a.apply(this,arguments)},t.addEventListener("load",function(){i+=1,o()}),t};return s.waitForRequestsToFinish=function(){return a=!0,o(),r.promise},s},n}(a,n),o=function(){"use strict";var e={},t=function(e){return Array.prototype.slice.call(e)};e.addClassNameRecursively=function(t,n){t.className+=" "+n,t.parentNode!==t.ownerDocument&&e.addClassNameRecursively(t.parentNode,n)};var n=function(e,n){var i=e.parentStyleSheet,a=t(i.cssRules).indexOf(e);i.insertRule(n,a+1),i.deleteRule(a)},i=function(e,t){var i=e.cssText.replace(/^[^\{]+/,""),a=t+" "+i;n(e,a)},a=function(e){return t(e).reduce(function(e,t){return e+t.cssText},"")},r=function(e){e.textContent=a(e.sheet.cssRules)};return e.rewriteStyleRuleSelector=function(e,n,a){var o=n+"(?=\\W|$)";t(e.querySelectorAll("style")).forEach(function(e){var n=t(e.sheet.cssRules).filter(function(e){return e.selectorText&&new RegExp(o).test(e.selectorText)});n.length&&(n.forEach(function(e){var t=e.selectorText.replace(new RegExp(o,"g"),a);i(e,t)}),r(e))})},e}(),s=function(e){"use strict";var t={},n=function(e){return Array.prototype.slice.call(e)};return t.fakeHover=function(t,n){var i=t.querySelector(n),a="rasterizehtmlhover";i&&(e.addClassNameRecursively(i,a),e.rewriteStyleRuleSelector(t,":hover","."+a))},t.fakeActive=function(t,n){var i=t.querySelector(n),a="rasterizehtmlactive";i&&(e.addClassNameRecursively(i,a),e.rewriteStyleRuleSelector(t,":active","."+a))},t.persistInputValues=function(e){var t=e.querySelectorAll("input"),i=e.querySelectorAll("textarea"),a=function(e){return"checkbox"===e.type||"radio"===e.type};n(t).filter(a).forEach(function(e){e.checked?e.setAttribute("checked",""):e.removeAttribute("checked")}),n(t).filter(function(e){return!a(e)}).forEach(function(e){e.setAttribute("value",e.value)}),n(i).forEach(function(e){e.textContent=e.value})},t}(o),l=function(e,t,n,i){"use strict";var a={},r=function(e,t,n,i){var a=e.createElement(t);return a.style.visibility="hidden",a.style.width=n+"px",a.style.height=i+"px",a.style.position="absolute",a.style.top=-1e4-i+"px",a.style.left=-1e4-n+"px",e.getElementsByTagName("body")[0].appendChild(a),a};a.executeJavascript=function(e,a){var o=r(i.document,"iframe",a.width,a.height),s=e.documentElement.outerHTML,l=[],c=n.defer(),u=a.executeJsTimeout||0,h=function(){var e=o.contentDocument;i.document.getElementsByTagName("body")[0].removeChild(o),c.resolve({document:e,errors:l})},d=function(){var e=n.defer();return u>0?setTimeout(e.resolve,u):e.resolve(),e.promise};o.onload=function(){d().then(f.waitForRequestsToFinish).then(h)};var p=o.contentWindow.XMLHttpRequest,f=t.finishNotifying(p),m=t.baseUrlRespecting(f,a.baseUrl);return o.contentDocument.open(),o.contentWindow.XMLHttpRequest=m,o.contentWindow.onerror=function(e){l.push({resourceType:"scriptExecution",msg:e})},o.contentDocument.write(s),o.contentDocument.close(),c.promise};var o=function(e,t,n){var i=e.createElement("iframe");return i.style.width=t+"px",i.style.height=n+"px",i.style.visibility="hidden",i.style.position="absolute",i.style.top=-1e4-n+"px",i.style.left=-1e4-t+"px",i.sandbox="allow-same-origin",i},s=function(e,t,n){var a=Math.floor(e/n),r=Math.floor(t/n);return o(i.document,a,r)},l=function(e,t,n,i){return{width:Math.max(e.width*i,t),height:Math.max(e.height*i,n)}
},c=function(e,t,n,i,a){var r,o,s,c,u,h,d,p=Math.max(e.documentElement.scrollWidth,e.body.clientWidth),f=Math.max(e.documentElement.scrollHeight,e.body.scrollHeight,e.body.clientHeight);if(t){if(u=e.querySelector(t),!u)throw{message:"Clipping selector not found"};h=u.getBoundingClientRect(),r=h.top,o=h.left,s=h.width,c=h.height}else r=0,o=0,s=p,c=f;return d=l({width:s,height:c},n,i,a),{left:o,top:r,width:d.width,height:d.height,viewportWidth:p,viewportHeight:f}};a.calculateDocumentContentSize=function(e,t){var a,r=e.documentElement.outerHTML,o=n.defer(),l=t.zoom||1;return a=s(t.width,t.height,l),i.document.getElementsByTagName("body")[0].appendChild(a),a.onload=function(){var e,n=a.contentDocument;try{e=c(n,t.clip,t.width,t.height,l),i.document.getElementsByTagName("body")[0].removeChild(a),o.resolve(e)}catch(r){o.reject(r)}},a.contentDocument.open(),a.contentDocument.write(r),a.contentDocument.close(),o.promise};var u=function(e,t){var n,a,r,o,s=/<html((?:\s+[^>]*)?)>/im.exec(t),l=i.document.implementation.createHTMLDocument("");if(s)for(n="<div"+s[1]+"></div>",l.documentElement.innerHTML=n,r=l.querySelector("div"),a=0;a<r.attributes.length;a++)o=r.attributes[a],e.documentElement.setAttribute(o.name,o.value)};a.parseHTML=function(e){var t;return(new DOMParser).parseFromString("<a></a>","text/html")?t=(new DOMParser).parseFromString(e,"text/html"):(t=i.document.implementation.createHTMLDocument(""),t.documentElement.innerHTML=e,u(t,e)),t};var h=function(e){var t=new DOMParser,n=t.parseFromString("<","text/xml"),i=n.getElementsByTagName("parsererror")[0].namespaceURI;return"http://www.w3.org/1999/xhtml"===i?e.getElementsByTagName("parsererror").length>0:e.getElementsByTagNameNS(i,"parsererror").length>0},d=function(e){if(h(e))throw{message:"Invalid source"}};a.validateXHTML=function(e){var t=new DOMParser,n=t.parseFromString(e,"application/xml");d(n)};var p=null,f=function(e,t){return t===!1||"none"===t||"repeated"===t?((null===p||"repeated"!==t)&&(p=Date.now()),e+"?_="+p):e},m=function(t,i){var a=new window.XMLHttpRequest,r=e.joinUrl(i.baseUrl,t),o=f(r,i.cache),s=n.defer(),l=function(){s.reject({message:"Unable to load page"})};a.addEventListener("load",function(){200===a.status||0===a.status?s.resolve(a.responseXML):l()},!1),a.addEventListener("error",function(){l()},!1);try{a.open("GET",o,!0),a.responseType="document",a.send(null)}catch(c){l()}return s.promise};return a.loadDocument=function(e,t){return m(e,t).then(function(e){return d(e),e})},a}(a,r,n,window),c=function(e,t,n,i,a,r){"use strict";var o={},s=function(){if(r.navigator.userAgent.indexOf("WebKit")>=0&&r.navigator.userAgent.indexOf("Chrome")<0)return!1;if(r.BlobBuilder||r.MozBlobBuilder||r.WebKitBlobBuilder)return!0;if(r.Blob)try{return new r.Blob(["<b></b>"],{type:"text/xml"}),!0}catch(e){return!1}return!1},l=function(e){var t,n="image/svg+xml;charset=utf-8",i=r.BlobBuilder||r.MozBlobBuilder||r.WebKitBlobBuilder;return i?(t=new i,t.append(e),t.getBlob(n)):new r.Blob([e],{type:n})},c=function(e){var t=r.URL||r.webkitURL||r;return s()?t.createObjectURL(l(e)):"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e)},u=function(e){var t=r.URL||r.webkitURL||r;s()&&t.revokeObjectURL(e)},h=function(e,t){var n,i,a,r;t=t||1,n=Math.round(e.viewportWidth),i=Math.round(e.viewportHeight),a=-e.left,r=-e.top;var o={x:a,y:r,width:n,height:i};return 1!==t&&(o.style="-webkit-transform: scale("+t+"); -webkit-transform-origin: 0 0; transform: scale("+t+"); transform-origin: 0 0;"),o},d=function(e){var t=e.style||"";e.style=t+"float: left;"},p=function(e){var t=Object.keys(e);return t.length?" "+t.map(function(t){return t+'="'+e[t]+'"'}).join(" "):""};o.getSvgForDocument=function(e,n,a){var r;r=i.serializeToString(e),t.validateXHTML(r);var o=h(n,a);return d(o),'<svg xmlns="http://www.w3.org/2000/svg" width="'+n.width+'" height="'+n.height+'"><foreignObject'+p(o)+">"+r+"</foreignObject></svg>"};var f=function(){return{message:"Error rendering page"}};return o.renderSvg=function(e){var t,n,i=a.defer(),o=function(){n.onload=null,n.onerror=null},s=function(){t&&u(t)};return t=c(e),n=new r.Image,n.onload=function(){o(),s(),i.resolve(n)},n.onerror=function(){s(),i.reject(f())},n.src=t,i.promise},o.drawImageOnCanvas=function(e,t){try{t.getContext("2d").drawImage(e,0,0)}catch(n){throw f()}},o.drawDocumentImage=function(e,i){return i.hover&&n.fakeHover(e,i.hover),i.active&&n.fakeActive(e,i.active),t.calculateDocumentContentSize(e,i).then(function(t){return o.getSvgForDocument(e,t,i.zoom)}).then(function(e){return o.renderSvg(e)})},o}(a,l,s,t,n,window),u=function(e,t,n,i,a){"use strict";var r={},o=function(e,t,n){return i.drawDocumentImage(e,n).then(function(e){return t&&i.drawImageOnCanvas(e,t),e})},s=function(e,i){return t.executeJavascript(e,i).then(function(e){var t=e.document;return n.persistInputValues(t),{document:t,errors:e.errors}})};return r.rasterize=function(t,n,i){var r;return r=e.clone(i),r.inlineScripts=i.executeJs===!0,a.inlineReferences(t,r).then(function(e){return i.executeJs?s(t,i).then(function(t){return{document:t.document,errors:e.concat(t.errors)}}):{document:t,errors:e}}).then(function(e){return o(e.document,n,i).then(function(t){return{image:t,errors:e.errors}})})},r}(a,l,s,c,i),h=function(e,t,n){"use strict";var i={},a=function(e,t){var n=300,i=200,a=e?e.width:n,r=e?e.height:i,o=void 0!==t.width?t.width:a,s=void 0!==t.height?t.height:r;return{width:o,height:s}},r=function(t){var n,i=a(t.canvas,t.options);return n=e.clone(t.options),n.width=i.width,n.height=i.height,n};i.drawDocument=function(){var t=arguments[0],i=Array.prototype.slice.call(arguments,1),a=e.parseOptionalParameters(i),o=n.rasterize(t,a.canvas,r(a));return a.callback&&o.then(function(e){a.callback(e.image,e.errors)},function(){a.callback(null,[{resourceType:"document",msg:"Error rendering page"}])}),o};var o=function(e,n,a,r){var o=t.parseHTML(e);return i.drawDocument(o,n,a,r)};i.drawHTML=function(){var t=arguments[0],n=Array.prototype.slice.call(arguments,1),i=e.parseOptionalParameters(n);return o(t,i.canvas,i.options,i.callback)};var s=function(t,n,i){var a=document.implementation.createHTMLDocument("");a.replaceChild(t.documentElement,a.documentElement);var r=i?e.clone(i):{};return i.baseUrl||(r.baseUrl=n),{document:a,options:r}},l=function(e,n,a,r){var o=t.loadDocument(e,a).then(function(t){var r=s(t,e,a);return i.drawDocument(r.document,n,r.options)});return r&&o.then(function(e){r(e.image,e.errors)},function(t){r(null,[{resourceType:"page",url:e,msg:t.message+" "+e}])}),o};return i.drawURL=function(){var t=arguments[0],n=Array.prototype.slice.call(arguments,1),i=e.parseOptionalParameters(n);return l(t,i.canvas,i.options,i.callback)},i}(a,l,u);return h})},{ayepromise:2,inlineresources:30,url:"j37I/u",xmlserializer:37}],2:[function(t,n,i){!function(t,a){"function"==typeof e&&e.amd?e(a):"object"==typeof i?n.exports=a():t.ayepromise=a()}(this,function(){"use strict";var e={},t=function(){var e=!1;return function(t){return function(){e||(e=!0,t.apply(null,arguments))}}},n=function(e){var t=e&&e.then;return"object"==typeof e&&"function"==typeof t?function(){return t.apply(e,arguments)}:void 0},i=function(t,n){var i=e.defer(),a=function(e,t){setTimeout(function(){var n;try{n=e(t)}catch(a){return void i.reject(a)}n===i.promise?i.reject(new TypeError("Cannot resolve promise with itself")):i.resolve(n)},1)},o=function(e){t&&t.call?a(t,e):i.resolve(e)},s=function(e){n&&n.call?a(n,e):i.reject(e)};return{promise:i.promise,handle:function(e,t){e===r?o(t):s(t)}}},a=0,r=1,o=2;return e.defer=function(){var e,s=a,l=[],c=function(t,n){s=t,e=n,l.forEach(function(t){t.handle(s,e)}),l=null},u=function(e){c(r,e)},h=function(e){c(o,e)},d=function(t,n){var r=i(t,n);return s===a?l.push(r):r.handle(s,e),r.promise},p=function(e){var n=t();try{e(n(f),n(h))}catch(i){n(h)(i)}},f=function(e){var t;try{t=n(e)}catch(i){return void h(i)}t?p(t):u(e)},m=t();return{resolve:m(f),reject:m(h),promise:{then:d,fail:function(e){return d(null,e)}}}},e})},{}],3:[function(t,n,i){(function(t){!function(a){function r(e){throw RangeError(A[e])}function o(e,t){for(var n=e.length;n--;)e[n]=t(e[n]);return e}function s(e,t){return o(e.split(j),t).join(".")}function l(e){for(var t,n,i=[],a=0,r=e.length;r>a;)t=e.charCodeAt(a++),t>=55296&&56319>=t&&r>a?(n=e.charCodeAt(a++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),a--)):i.push(t);return i}function c(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=P(e>>>10&1023|55296),e=56320|1023&e),t+=P(e)}).join("")}function u(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:S}function h(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function d(e,t,n){var i=0;for(e=n?E(e/F):e>>1,e+=E(e/t);e>I*k>>1;i+=S)e=E(e/I);return E(i+(I+1)*e/(e+T))}function p(e){var t,n,i,a,o,s,l,h,p,f,m=[],g=e.length,v=0,y=D,b=$;for(n=e.lastIndexOf(R),0>n&&(n=0),i=0;n>i;++i)e.charCodeAt(i)>=128&&r("not-basic"),m.push(e.charCodeAt(i));for(a=n>0?n+1:0;g>a;){for(o=v,s=1,l=S;a>=g&&r("invalid-input"),h=u(e.charCodeAt(a++)),(h>=S||h>E((w-v)/s))&&r("overflow"),v+=h*s,p=b>=l?C:l>=b+k?k:l-b,!(p>h);l+=S)f=S-p,s>E(w/f)&&r("overflow"),s*=f;t=m.length+1,b=d(v-o,t,0==o),E(v/t)>w-y&&r("overflow"),y+=E(v/t),v%=t,m.splice(v++,0,y)}return c(m)}function f(e){var t,n,i,a,o,s,c,u,p,f,m,g,v,y,b,x=[];for(e=l(e),g=e.length,t=D,n=0,o=$,s=0;g>s;++s)m=e[s],128>m&&x.push(P(m));for(i=a=x.length,a&&x.push(R);g>i;){for(c=w,s=0;g>s;++s)m=e[s],m>=t&&c>m&&(c=m);for(v=i+1,c-t>E((w-n)/v)&&r("overflow"),n+=(c-t)*v,t=c,s=0;g>s;++s)if(m=e[s],t>m&&++n>w&&r("overflow"),m==t){for(u=n,p=S;f=o>=p?C:p>=o+k?k:p-o,!(f>u);p+=S)b=u-f,y=S-f,x.push(P(h(f+b%y,0))),u=E(b/y);x.push(P(h(u,0))),o=d(n,v,i==a),n=0,++i}++n,++t}return x.join("")}function m(e){return s(e,function(e){return O.test(e)?p(e.slice(4).toLowerCase()):e})}function g(e){return s(e,function(e){return M.test(e)?"xn--"+f(e):e})}var v="object"==typeof i&&i,y="object"==typeof n&&n&&n.exports==v&&n,b="object"==typeof t&&t;(b.global===b||b.window===b)&&(a=b);var x,_,w=2147483647,S=36,C=1,k=26,T=38,F=700,$=72,D=128,R="-",O=/^xn--/,M=/[^ -~]/,j=/\x2E|\u3002|\uFF0E|\uFF61/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=S-C,E=Math.floor,P=String.fromCharCode;if(x={version:"1.2.4",ucs2:{decode:l,encode:c},decode:p,encode:f,toASCII:g,toUnicode:m},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return x});else if(v&&!v.nodeType)if(y)y.exports=x;else for(_ in x)x.hasOwnProperty(_)&&(v[_]=x[_]);else a.punycode=x}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,a,r){t=t||"&",a=a||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var l=1e3;r&&"number"==typeof r.maxKeys&&(l=r.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var u=0;c>u;++u){var h,d,p,f,m=e[u].replace(s,"%20"),g=m.indexOf(a);g>=0?(h=m.substr(0,g),d=m.substr(g+1)):(h=m,d=""),p=decodeURIComponent(h),f=decodeURIComponent(d),n(o,p)?i(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],5:[function(e,t){"use strict";function n(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,o,s){return t=t||"&",o=o||"=",null===e&&(e=void 0),"object"==typeof e?n(r(e),function(n){var r=encodeURIComponent(i(n))+o;return a(e[n])?e[n].map(function(e){return r+encodeURIComponent(i(e))}).join(t):r+encodeURIComponent(i(e[n]))}).join(t):s?encodeURIComponent(i(s))+o+encodeURIComponent(i(e)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],6:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":4,"./encode":5}],7:[function(e,t){t.exports=function(){function t(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function n(e,t,n,i,a,r){this.message=e,this.expected=t,this.found=n,this.offset=i,this.line=a,this.column=r,this.name="SyntaxError"}function i(t){function i(e){function n(e,n,i){var a,r;for(a=n;i>a;a++)r=t.charAt(a),"\n"===r?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return U!==e&&(U>e&&(U=0,V={line:1,column:1,seenCR:!1}),n(V,U,e),U=e),V}function a(e){J>q||(q>J&&(J=q,Y=[]),Y.push(e))}function r(e,a,r){function o(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function s(e,t){function n(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var i,a,r,o=new Array(e.length);for(r=0;r<e.length;r++)o[r]=e[r].description;return i=e.length>1?o.slice(0,-1).join(", ")+" or "+o[e.length-1]:o[0],a=t?'"'+n(t)+'"':"end of input","Expected "+i+" but "+a+" found."}var l=i(r),c=r<t.length?t.charAt(r):null;return null!==a&&o(a),new n(null!==e?e:s(a,c),a,c,r,l.line,l.column)}function o(){var e,t;return e=s(),e===v&&(e=q,t=[],t!==v&&(N=e,t=x()),e=t),e}function s(){var e,n,i,r,o,c;if(e=q,n=l(),n!==v){for(i=[],r=f();r!==v;)i.push(r),r=f();if(i!==v)if(44===t.charCodeAt(q)?(r=w,q++):(r=v,0===K&&a(S)),r!==v){for(o=[],c=f();c!==v;)o.push(c),c=f();o!==v?(c=s(),c!==v?(N=e,n=C(n,c),e=n):(q=e,e=_)):(q=e,e=_)}else q=e,e=_;else q=e,e=_}else q=e,e=_;return e===v&&(e=q,n=l(),n!==v&&(N=e,n=k(n)),e=n),e}function l(){var e;return e=c(),e===v&&(e=d()),e}function c(){var e,t,n,i;if(e=q,t=u(),t!==v){if(n=[],i=f(),i!==v)for(;i!==v;)n.push(i),i=f();else n=_;n!==v?(i=h(),i!==v?(N=e,t=T(t,i),e=t):(q=e,e=_)):(q=e,e=_)}else q=e,e=_;return e===v&&(e=q,t=u(),t!==v&&(N=e,t=F(t)),e=t),e}function u(){var e,n,i,r;return e=q,t.substr(q,4)===$?(n=$,q+=4):(n=v,0===K&&a(D)),n!==v?(i=p(),i!==v?(41===t.charCodeAt(q)?(r=R,q++):(r=v,0===K&&a(O)),r!==v?(N=e,n=M(i),e=n):(q=e,e=_)):(q=e,e=_)):(q=e,e=_),e}function h(){var e,n,i,r;return e=q,t.substr(q,7)===j?(n=j,q+=7):(n=v,0===K&&a(A)),n!==v?(i=p(),i!==v?(41===t.charCodeAt(q)?(r=R,q++):(r=v,0===K&&a(O)),r!==v?(N=e,n=M(i),e=n):(q=e,e=_)):(q=e,e=_)):(q=e,e=_),e}function d(){var e,n,i,r;return e=q,t.substr(q,6)===I?(n=I,q+=6):(n=v,0===K&&a(E)),n!==v?(i=p(),i!==v?(41===t.charCodeAt(q)?(r=R,q++):(r=v,0===K&&a(O)),r!==v?(N=e,n=P(i),e=n):(q=e,e=_)):(q=e,e=_)):(q=e,e=_),e}function p(){var e,n,i;if(e=q,n=[],W.test(t.charAt(q))?(i=t.charAt(q),q++):(i=v,0===K&&a(H)),i!==v)for(;i!==v;)n.push(i),W.test(t.charAt(q))?(i=t.charAt(q),q++):(i=v,0===K&&a(H));else n=_;return n!==v&&(N=e,n=z(n)),e=n}function f(){var e;return B.test(t.charAt(q))?(e=t.charAt(q),q++):(e=v,0===K&&a(L)),e}var m,g=arguments.length>1?arguments[1]:{},v={},y={start:o},b=o,x=function(){return[]},_=v,w=",",S={type:"literal",value:",",description:'","'},C=function(e,t){return[e].concat(t)},k=function(e){return[e]},T=function(e,t){return{url:e,format:t}},F=function(e){return{url:e}},$="url(",D={type:"literal",value:"url(",description:'"url("'},R=")",O={type:"literal",value:")",description:'")"'},M=function(e){return e},j="format(",A={type:"literal",value:"format(",description:'"format("'},I="local(",E={type:"literal",value:"local(",description:'"local("'},P=function(e){return{local:e}},W=/^[^)]/,H={type:"class",value:"[^)]",description:"[^)]"},z=function(e){return G.extractValue(e.join(""))},B=/^[ \t\r\n\f]/,L={type:"class",value:"[ \\t\\r\\n\\f]",description:"[ \\t\\r\\n\\f]"},q=0,N=0,U=0,V={line:1,column:1,seenCR:!1},J=0,Y=[],K=0;if("startRule"in g){if(!(g.startRule in y))throw new Error("Can't start parsing from rule \""+g.startRule+'".');b=y[g.startRule]}var G=e("../util");if(m=b(),m!==v&&q===t.length)return m;throw m!==v&&q<t.length&&a({type:"end",description:"end of input"}),r(null,Y,J)}return t(n,Error),{SyntaxError:n,parse:i}}()},{"../util":9}],8:[function(e,t,n){var i=e("./grammar");n.SyntaxError=function(e,t){this.message=e,this.offset=t},n.parse=function(e){try{return i.parse(e)}catch(t){throw new n.SyntaxError(t.message,t.offset)}},n.serialize=function(e){return e.map(function(e){var t;return e.url?(t='url("'+e.url+'")',e.format&&(t+=' format("'+e.format+'")')):t='local("'+e.local+'")',t}).join(", ")}},{"./grammar":7}],9:[function(e,t,n){var i=function(e){var t=/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/;return e.replace(t,"$1")},a=function(e){var t=/^"(.*)"$/,n=/^'(.*)'$/;return t.test(e)?e.replace(t,"$1"):n.test(e)?e.replace(n,"$1"):e};n.extractValue=function(e){return a(i(e))}},{}],10:[function(e,t,n){var i={CSSRule:e("./CSSRule").CSSRule,MatcherList:e("./MatcherList").MatcherList};i.CSSDocumentRule=function(){i.CSSRule.call(this),this.matcher=new i.MatcherList,this.cssRules=[]},i.CSSDocumentRule.prototype=new i.CSSRule,i.CSSDocumentRule.prototype.constructor=i.CSSDocumentRule,i.CSSDocumentRule.prototype.type=10,Object.defineProperty(i.CSSDocumentRule.prototype,"cssText",{get:function(){for(var e=[],t=0,n=this.cssRules.length;n>t;t++)e.push(this.cssRules[t].cssText);return"@-moz-document "+this.matcher.matcherText+" {"+e.join("")+"}"}}),n.CSSDocumentRule=i.CSSDocumentRule},{"./CSSRule":16,"./MatcherList":22}],11:[function(e,t,n){var i={CSSStyleDeclaration:e("./CSSStyleDeclaration").CSSStyleDeclaration,CSSRule:e("./CSSRule").CSSRule};i.CSSFontFaceRule=function(){i.CSSRule.call(this),this.style=new i.CSSStyleDeclaration,this.style.parentRule=this},i.CSSFontFaceRule.prototype=new i.CSSRule,i.CSSFontFaceRule.prototype.constructor=i.CSSFontFaceRule,i.CSSFontFaceRule.prototype.type=5,Object.defineProperty(i.CSSFontFaceRule.prototype,"cssText",{get:function(){return"@font-face {"+this.style.cssText+"}"}}),n.CSSFontFaceRule=i.CSSFontFaceRule},{"./CSSRule":16,"./CSSStyleDeclaration":17}],12:[function(e,t,n){var i={CSSRule:e("./CSSRule").CSSRule,CSSStyleSheet:e("./CSSStyleSheet").CSSStyleSheet,MediaList:e("./MediaList").MediaList};i.CSSImportRule=function(){i.CSSRule.call(this),this.href="",this.media=new i.MediaList,this.styleSheet=new i.CSSStyleSheet},i.CSSImportRule.prototype=new i.CSSRule,i.CSSImportRule.prototype.constructor=i.CSSImportRule,i.CSSImportRule.prototype.type=3,Object.defineProperty(i.CSSImportRule.prototype,"cssText",{get:function(){var e=this.media.mediaText;return"@import url("+this.href+")"+(e?" "+e:"")+";"},set:function(e){for(var t,n,i=0,a="",r="";n=e.charAt(i);i++)switch(n){case" ":case"	":case"\r":case"\n":case"\f":"after-import"===a?a="url":r+=n;break;case"@":a||e.indexOf("@import",i)!==i||(a="after-import",i+="import".length,r="");break;case"u":if("url"===a&&e.indexOf("url(",i)===i){if(t=e.indexOf(")",i+1),-1===t)throw i+': ")" not found';i+="url(".length;var o=e.slice(i,t);o[0]===o[o.length-1]&&('"'===o[0]||"'"===o[0])&&(o=o.slice(1,-1)),this.href=o,i=t,a="media"}break;case'"':if("url"===a){if(t=e.indexOf('"',i+1),!t)throw i+": '\"' not found";this.href=e.slice(i+1,t),i=t,a="media"}break;case"'":if("url"===a){if(t=e.indexOf("'",i+1),!t)throw i+': "\'" not found';this.href=e.slice(i+1,t),i=t,a="media"}break;case";":"media"===a&&r&&(this.media.mediaText=r.trim());break;default:"media"===a&&(r+=n)}}}),n.CSSImportRule=i.CSSImportRule},{"./CSSRule":16,"./CSSStyleSheet":19,"./MediaList":23}],13:[function(e,t,n){var i={CSSRule:e("./CSSRule").CSSRule,CSSStyleDeclaration:e("./CSSStyleDeclaration").CSSStyleDeclaration};i.CSSKeyframeRule=function(){i.CSSRule.call(this),this.keyText="",this.style=new i.CSSStyleDeclaration,this.style.parentRule=this},i.CSSKeyframeRule.prototype=new i.CSSRule,i.CSSKeyframeRule.prototype.constructor=i.CSSKeyframeRule,i.CSSKeyframeRule.prototype.type=9,Object.defineProperty(i.CSSKeyframeRule.prototype,"cssText",{get:function(){return this.keyText+" {"+this.style.cssText+"} "}}),n.CSSKeyframeRule=i.CSSKeyframeRule},{"./CSSRule":16,"./CSSStyleDeclaration":17}],14:[function(e,t,n){var i={CSSRule:e("./CSSRule").CSSRule};i.CSSKeyframesRule=function(){i.CSSRule.call(this),this.name="",this.cssRules=[]},i.CSSKeyframesRule.prototype=new i.CSSRule,i.CSSKeyframesRule.prototype.constructor=i.CSSKeyframesRule,i.CSSKeyframesRule.prototype.type=8,Object.defineProperty(i.CSSKeyframesRule.prototype,"cssText",{get:function(){for(var e=[],t=0,n=this.cssRules.length;n>t;t++)e.push("  "+this.cssRules[t].cssText);return"@"+(this._vendorPrefix||"")+"keyframes "+this.name+" { \n"+e.join("\n")+"\n}"}}),n.CSSKeyframesRule=i.CSSKeyframesRule},{"./CSSRule":16}],15:[function(e,t,n){var i={CSSRule:e("./CSSRule").CSSRule,MediaList:e("./MediaList").MediaList};i.CSSMediaRule=function(){i.CSSRule.call(this),this.media=new i.MediaList,this.cssRules=[]},i.CSSMediaRule.prototype=new i.CSSRule,i.CSSMediaRule.prototype.constructor=i.CSSMediaRule,i.CSSMediaRule.prototype.type=4,Object.defineProperty(i.CSSMediaRule.prototype,"cssText",{get:function(){for(var e=[],t=0,n=this.cssRules.length;n>t;t++)e.push(this.cssRules[t].cssText);return"@media "+this.media.mediaText+" {"+e.join("")+"}"}}),n.CSSMediaRule=i.CSSMediaRule},{"./CSSRule":16,"./MediaList":23}],16:[function(e,t,n){var i={};i.CSSRule=function(){this.parentRule=null,this.parentStyleSheet=null},i.CSSRule.STYLE_RULE=1,i.CSSRule.IMPORT_RULE=3,i.CSSRule.MEDIA_RULE=4,i.CSSRule.FONT_FACE_RULE=5,i.CSSRule.PAGE_RULE=6,i.CSSRule.WEBKIT_KEYFRAMES_RULE=8,i.CSSRule.WEBKIT_KEYFRAME_RULE=9,i.CSSRule.prototype={constructor:i.CSSRule},n.CSSRule=i.CSSRule},{}],17:[function(e,t,n){var i={};i.CSSStyleDeclaration=function(){this.length=0,this.parentRule=null,this._importants={}},i.CSSStyleDeclaration.prototype={constructor:i.CSSStyleDeclaration,getPropertyValue:function(e){return this[e]||""},setProperty:function(e,t,n){if(this[e]){var i=Array.prototype.indexOf.call(this,e);0>i&&(this[this.length]=e,this.length++)}else this[this.length]=e,this.length++;this[e]=t,this._importants[e]=n},removeProperty:function(e){if(!(e in this))return"";var t=Array.prototype.indexOf.call(this,e);if(0>t)return"";var n=this[e];return this[e]="",Array.prototype.splice.call(this,t,1),n},getPropertyCSSValue:function(){},getPropertyPriority:function(e){return this._importants[e]||""},getPropertyShorthand:function(){},isPropertyImplicit:function(){},get cssText(){for(var e=[],t=0,n=this.length;n>t;++t){var i=this[t],a=this.getPropertyValue(i),r=this.getPropertyPriority(i);r&&(r=" !"+r),e[t]=i+": "+a+r+";"}return e.join(" ")},set cssText(e){var t,n;for(t=this.length;t--;)n=this[t],this[n]="";Array.prototype.splice.call(this,0,this.length),this._importants={};var a=i.parse("#bogus{"+e+"}").cssRules[0].style,r=a.length;for(t=0;r>t;++t)n=a[t],this.setProperty(a[t],a.getPropertyValue(n),a.getPropertyPriority(n))}},n.CSSStyleDeclaration=i.CSSStyleDeclaration,i.parse=e("./parse").parse},{"./parse":27}],18:[function(e,t,n){var i={CSSStyleDeclaration:e("./CSSStyleDeclaration").CSSStyleDeclaration,CSSRule:e("./CSSRule").CSSRule};i.CSSStyleRule=function(){i.CSSRule.call(this),this.selectorText="",this.style=new i.CSSStyleDeclaration,this.style.parentRule=this},i.CSSStyleRule.prototype=new i.CSSRule,i.CSSStyleRule.prototype.constructor=i.CSSStyleRule,i.CSSStyleRule.prototype.type=1,Object.defineProperty(i.CSSStyleRule.prototype,"cssText",{get:function(){var e;return e=this.selectorText?this.selectorText+" {"+this.style.cssText+"}":""},set:function(e){var t=i.CSSStyleRule.parse(e);this.style=t.style,this.selectorText=t.selectorText}}),i.CSSStyleRule.parse=function(e){for(var t,n,a,r=0,o="selector",s=r,l="",c={selector:!0,value:!0},u=new i.CSSStyleRule,h="";a=e.charAt(r);r++)switch(a){case" ":case"	":case"\r":case"\n":case"\f":if(c[o])switch(e.charAt(r-1)){case" ":case"	":case"\r":case"\n":case"\f":break;default:l+=" "}break;case'"':if(s=r+1,t=e.indexOf('"',s)+1,!t)throw'" is missing';l+=e.slice(r,t),r=t-1;break;case"'":if(s=r+1,t=e.indexOf("'",s)+1,!t)throw"' is missing";l+=e.slice(r,t),r=t-1;break;case"/":if("*"===e.charAt(r+1)){if(r+=2,t=e.indexOf("*/",r),-1===t)throw new SyntaxError("Missing */");r=t+1}else l+=a;break;case"{":"selector"===o&&(u.selectorText=l.trim(),l="",o="name");break;case":":"name"===o?(n=l.trim(),l="",o="value"):l+=a;break;case"!":"value"===o&&e.indexOf("!important",r)===r?(h="important",r+="important".length):l+=a;break;case";":"value"===o?(u.style.setProperty(n,l.trim(),h),h="",l="",o="name"):l+=a;break;case"}":if("value"===o)u.style.setProperty(n,l.trim(),h),h="",l="";else{if("name"===o)break;l+=a}o="selector";break;default:l+=a}return u},n.CSSStyleRule=i.CSSStyleRule},{"./CSSRule":16,"./CSSStyleDeclaration":17}],19:[function(e,t,n){var i={StyleSheet:e("./StyleSheet").StyleSheet,CSSStyleRule:e("./CSSStyleRule").CSSStyleRule};i.CSSStyleSheet=function(){i.StyleSheet.call(this),this.cssRules=[]},i.CSSStyleSheet.prototype=new i.StyleSheet,i.CSSStyleSheet.prototype.constructor=i.CSSStyleSheet,i.CSSStyleSheet.prototype.insertRule=function(e,t){if(0>t||t>this.cssRules.length)throw new RangeError("INDEX_SIZE_ERR");var n=i.parse(e).cssRules[0];return n.parentStyleSheet=this,this.cssRules.splice(t,0,n),t},i.CSSStyleSheet.prototype.deleteRule=function(e){if(0>e||e>=this.cssRules.length)throw new RangeError("INDEX_SIZE_ERR");this.cssRules.splice(e,1)},i.CSSStyleSheet.prototype.toString=function(){for(var e="",t=this.cssRules,n=0;n<t.length;n++)e+=t[n].cssText+"\n";return e},n.CSSStyleSheet=i.CSSStyleSheet,i.parse=e("./parse").parse},{"./CSSStyleRule":18,"./StyleSheet":24,"./parse":27}],20:[function(e,t,n){var i={};i.CSSValue=function(){},i.CSSValue.prototype={constructor:i.CSSValue,set cssText(e){var t=this._getConstructorName();throw new Exception('DOMException: property "cssText" of "'+t+'" is readonly!')},get cssText(){var e=this._getConstructorName();throw new Exception('getter "cssText" of "'+e+'" is not implemented!')},_getConstructorName:function(){var e=this.constructor.toString(),t=e.match(/function\s([^\(]+)/),n=t[1];return n}},n.CSSValue=i.CSSValue},{}],21:[function(e,t,n){var i={CSSValue:e("./CSSValue").CSSValue};i.CSSValueExpression=function(e,t){this._token=e,this._idx=t},i.CSSValueExpression.prototype=new i.CSSValue,i.CSSValueExpression.prototype.constructor=i.CSSValueExpression,i.CSSValueExpression.prototype.parse=function(){for(var e,t=this._token,n=this._idx,i="",a="",r="",o=[];;++n){if(i=t.charAt(n),""==i){r="css expression error: unfinished expression!";break}switch(i){case"(":o.push(i),a+=i;break;case")":o.pop(i),a+=i;break;case"/":(e=this._parseJSComment(t,n))?e.error?r="css expression error: unfinished comment in expression!":n=e.idx:(e=this._parseJSRexExp(t,n))?(n=e.idx,a+=e.text):a+=i;break;case"'":case'"':e=this._parseJSString(t,n,i),e?(n=e.idx,a+=e.text):a+=i;break;default:a+=i}if(r)break;if(0==o.length)break}var s;return s=r?{error:r}:{idx:n,expression:a}},i.CSSValueExpression.prototype._parseJSComment=function(e,t){var n,i=e.charAt(t+1);if("/"==i||"*"==i){var a,r,o=t;return"/"==i?r="\n":"*"==i&&(r="*/"),a=e.indexOf(r,o+1+1),-1!==a?(a=a+r.length-1,n=e.substring(t,a+1),{idx:a,text:n}):(error="css expression error: unfinished comment in expression!",{error:error})}return!1},i.CSSValueExpression.prototype._parseJSString=function(e,t,n){var i,a=this._findMatchedIdx(e,t,n);return-1===a?!1:(i=e.substring(t,a+n.length),{idx:a,text:i})},i.CSSValueExpression.prototype._parseJSRexExp=function(e,t){var n=e.substring(0,t).replace(/\s+$/,""),i=[/^$/,/\($/,/\[$/,/\!$/,/\+$/,/\-$/,/\*$/,/\/\s+/,/\%$/,/\=$/,/\>$/,/\<$/,/\&$/,/\|$/,/\^$/,/\~$/,/\?$/,/\,$/,/delete$/,/in$/,/instanceof$/,/new$/,/typeof$/,/void$/],a=i.some(function(e){return e.test(n)});if(a){var r="/";return this._parseJSString(e,t,r)}return!1},i.CSSValueExpression.prototype._findMatchedIdx=function(e,t,n){for(var i,a=t,r=-1;;){if(i=e.indexOf(n,a+1),-1===i){i=r;break}var o=e.substring(t+1,i),s=o.match(/\\+$/);if(!s||s[0]%2==0)break;a=i}var l=e.indexOf("\n",t+1);return i>l&&(i=r),i},n.CSSValueExpression=i.CSSValueExpression},{"./CSSValue":20}],22:[function(e,t,n){var i={};i.MatcherList=function(){this.length=0},i.MatcherList.prototype={constructor:i.MatcherList,get matcherText(){return Array.prototype.join.call(this,", ")},set matcherText(e){for(var t=e.split(","),n=this.length=t.length,i=0;n>i;i++)this[i]=t[i].trim()},appendMatcher:function(e){-1===Array.prototype.indexOf.call(this,e)&&(this[this.length]=e,this.length++)},deleteMatcher:function(e){var t=Array.prototype.indexOf.call(this,e);-1!==t&&Array.prototype.splice.call(this,t,1)}},n.MatcherList=i.MatcherList},{}],23:[function(e,t,n){var i={};i.MediaList=function(){this.length=0},i.MediaList.prototype={constructor:i.MediaList,get mediaText(){return Array.prototype.join.call(this,", ")},set mediaText(e){for(var t=e.split(","),n=this.length=t.length,i=0;n>i;i++)this[i]=t[i].trim()},appendMedium:function(e){-1===Array.prototype.indexOf.call(this,e)&&(this[this.length]=e,this.length++)},deleteMedium:function(e){var t=Array.prototype.indexOf.call(this,e);-1!==t&&Array.prototype.splice.call(this,t,1)}},n.MediaList=i.MediaList},{}],24:[function(e,t,n){var i={};i.StyleSheet=function(){this.parentStyleSheet=null},n.StyleSheet=i.StyleSheet},{}],25:[function(e,t,n){var i={CSSStyleSheet:e("./CSSStyleSheet").CSSStyleSheet,CSSStyleRule:e("./CSSStyleRule").CSSStyleRule,CSSMediaRule:e("./CSSMediaRule").CSSMediaRule,CSSStyleDeclaration:e("./CSSStyleDeclaration").CSSStyleDeclaration,CSSKeyframeRule:e("./CSSKeyframeRule").CSSKeyframeRule,CSSKeyframesRule:e("./CSSKeyframesRule").CSSKeyframesRule};i.clone=function a(e){var t=new i.CSSStyleSheet,n=e.cssRules;if(!n)return t;for(var r={1:i.CSSStyleRule,4:i.CSSMediaRule,8:i.CSSKeyframesRule,9:i.CSSKeyframeRule},o=0,s=n.length;s>o;o++){var l=n[o],c=t.cssRules[o]=new r[l.type],u=l.style;if(u){for(var h=c.style=new i.CSSStyleDeclaration,d=0,p=u.length;p>d;d++){var f=h[d]=u[d];h[f]=u[f],h._importants[f]=u.getPropertyPriority(f)}h.length=u.length}l.hasOwnProperty("keyText")&&(c.keyText=l.keyText),l.hasOwnProperty("selectorText")&&(c.selectorText=l.selectorText),l.hasOwnProperty("mediaText")&&(c.mediaText=l.mediaText),l.hasOwnProperty("cssRules")&&(c.cssRules=a(l).cssRules)}return t},n.clone=i.clone},{"./CSSKeyframeRule":13,"./CSSKeyframesRule":14,"./CSSMediaRule":15,"./CSSStyleDeclaration":17,"./CSSStyleRule":18,"./CSSStyleSheet":19}],26:[function(e,t,n){"use strict";n.CSSStyleDeclaration=e("./CSSStyleDeclaration").CSSStyleDeclaration,n.CSSRule=e("./CSSRule").CSSRule,n.CSSStyleRule=e("./CSSStyleRule").CSSStyleRule,n.MediaList=e("./MediaList").MediaList,n.CSSMediaRule=e("./CSSMediaRule").CSSMediaRule,n.CSSImportRule=e("./CSSImportRule").CSSImportRule,n.CSSFontFaceRule=e("./CSSFontFaceRule").CSSFontFaceRule,n.StyleSheet=e("./StyleSheet").StyleSheet,n.CSSStyleSheet=e("./CSSStyleSheet").CSSStyleSheet,n.CSSKeyframesRule=e("./CSSKeyframesRule").CSSKeyframesRule,n.CSSKeyframeRule=e("./CSSKeyframeRule").CSSKeyframeRule,n.MatcherList=e("./MatcherList").MatcherList,n.CSSDocumentRule=e("./CSSDocumentRule").CSSDocumentRule,n.CSSValue=e("./CSSValue").CSSValue,n.CSSValueExpression=e("./CSSValueExpression").CSSValueExpression,n.parse=e("./parse").parse,n.clone=e("./clone").clone},{"./CSSDocumentRule":10,"./CSSFontFaceRule":11,"./CSSImportRule":12,"./CSSKeyframeRule":13,"./CSSKeyframesRule":14,"./CSSMediaRule":15,"./CSSRule":16,"./CSSStyleDeclaration":17,"./CSSStyleRule":18,"./CSSStyleSheet":19,"./CSSValue":20,"./CSSValueExpression":21,"./MatcherList":22,"./MediaList":23,"./StyleSheet":24,"./clone":25,"./parse":27}],27:[function(e,t,n){var i={};
i.parse=function(e){for(var t,n,a,r,o,s,l,c,u,h,d=0,p="before-selector",f="",m={selector:!0,value:!0,atRule:!0,"importRule-begin":!0,importRule:!0,atBlock:!0,"documentRule-begin":!0},g=new i.CSSStyleSheet,v=g,y="",b=/@(-(?:\w+-)+)?keyframes/g,x=function(t){var n=e.substring(0,d).split("\n"),i=n.length,a=n.pop().length+1,r=new Error(t+" (line "+i+", char "+a+")");throw r.line=i,r.char=a,r.styleSheet=g,r};h=e.charAt(d);d++)switch(h){case" ":case"	":case"\r":case"\n":case"\f":m[p]&&(f+=h);break;case'"':t=d+1;do t=e.indexOf('"',t)+1,t||x('Unmatched "');while("\\"===e[t-2]);switch(f+=e.slice(d,t),d=t-1,p){case"before-value":p="value";break;case"importRule-begin":p="importRule"}break;case"'":t=d+1;do t=e.indexOf("'",t)+1,t||x("Unmatched '");while("\\"===e[t-2]);switch(f+=e.slice(d,t),d=t-1,p){case"before-value":p="value";break;case"importRule-begin":p="importRule"}break;case"/":"*"===e.charAt(d+1)?(d+=2,t=e.indexOf("*/",d),-1===t?x("Missing */"):d=t+1):f+=h,"importRule-begin"===p&&(f+=" ",p="importRule");break;case"@":if(e.indexOf("@-moz-document",d)===d){p="documentRule-begin",u=new i.CSSDocumentRule,u.__starts=d,d+="-moz-document".length,f="";break}if(e.indexOf("@media",d)===d){p="atBlock",o=new i.CSSMediaRule,o.__starts=d,d+="media".length,f="";break}if(e.indexOf("@import",d)===d){p="importRule-begin",d+="import".length,f+="@import";break}if(e.indexOf("@font-face",d)===d){p="fontFaceRule-begin",d+="font-face".length,l=new i.CSSFontFaceRule,l.__starts=d,f="";break}b.lastIndex=d;var _=b.exec(e);if(_&&_.index===d){p="keyframesRule-begin",c=new i.CSSKeyframesRule,c.__starts=d,c._vendorPrefix=_[1],d+=_[0].length-1,f="";break}"selector"==p&&(p="atRule"),f+=h;break;case"{":"selector"===p||"atRule"===p?(r.selectorText=f.trim(),r.style.__starts=d,f="",p="before-name"):"atBlock"===p?(o.media.mediaText=f.trim(),v=n=o,o.parentStyleSheet=g,f="",p="before-selector"):"fontFaceRule-begin"===p?(n&&(l.parentRule=n),l.parentStyleSheet=g,r=l,f="",p="before-name"):"keyframesRule-begin"===p?(c.name=f.trim(),n&&(c.parentRule=n),c.parentStyleSheet=g,v=n=c,f="",p="keyframeRule-begin"):"keyframeRule-begin"===p?(r=new i.CSSKeyframeRule,r.keyText=f.trim(),r.__starts=d,f="",p="before-name"):"documentRule-begin"===p&&(u.matcher.matcherText=f.trim(),n&&(u.parentRule=n),v=n=u,u.parentStyleSheet=g,f="",p="before-selector");break;case":":"name"===p?(a=f.trim(),f="",p="before-value"):f+=h;break;case"(":if("value"===p)if("expression"==f.trim()){var w=new i.CSSValueExpression(e,d).parse();w.error?x(w.error):(f+=w.expression,d=w.idx)}else t=e.indexOf(")",d+1),-1===t&&x('Unmatched "("'),f+=e.slice(d,t+1),d=t;else f+=h;break;case"!":"value"===p&&e.indexOf("!important",d)===d?(y="important",d+="important".length):f+=h;break;case";":switch(p){case"value":r.style.setProperty(a,f.trim(),y),y="",f="",p="before-name";break;case"atRule":f="",p="before-selector";break;case"importRule":s=new i.CSSImportRule,s.parentStyleSheet=s.styleSheet.parentStyleSheet=g,s.cssText=f+h,g.cssRules.push(s),f="",p="before-selector";break;default:f+=h}break;case"}":switch(p){case"value":r.style.setProperty(a,f.trim(),y),y="";case"before-name":case"name":r.__ends=d+1,n&&(r.parentRule=n),r.parentStyleSheet=g,v.cssRules.push(r),f="",p=v.constructor===i.CSSKeyframesRule?"keyframeRule-begin":"before-selector";break;case"keyframeRule-begin":case"before-selector":case"selector":n||x("Unexpected }"),v.__ends=d+1,g.cssRules.push(v),v=g,n=null,f="",p="before-selector"}break;default:switch(p){case"before-selector":p="selector",r=new i.CSSStyleRule,r.__starts=d;break;case"before-name":p="name";break;case"before-value":p="value";break;case"importRule-begin":p="importRule"}f+=h}return g},n.parse=i.parse,i.CSSStyleSheet=e("./CSSStyleSheet").CSSStyleSheet,i.CSSStyleRule=e("./CSSStyleRule").CSSStyleRule,i.CSSImportRule=e("./CSSImportRule").CSSImportRule,i.CSSMediaRule=e("./CSSMediaRule").CSSMediaRule,i.CSSFontFaceRule=e("./CSSFontFaceRule").CSSFontFaceRule,i.CSSStyleDeclaration=e("./CSSStyleDeclaration").CSSStyleDeclaration,i.CSSKeyframeRule=e("./CSSKeyframeRule").CSSKeyframeRule,i.CSSKeyframesRule=e("./CSSKeyframesRule").CSSKeyframesRule,i.CSSValueExpression=e("./CSSValueExpression").CSSValueExpression,i.CSSDocumentRule=e("./CSSDocumentRule").CSSDocumentRule},{"./CSSDocumentRule":10,"./CSSFontFaceRule":11,"./CSSImportRule":12,"./CSSKeyframeRule":13,"./CSSKeyframesRule":14,"./CSSMediaRule":15,"./CSSStyleDeclaration":17,"./CSSStyleRule":18,"./CSSStyleSheet":19,"./CSSValueExpression":21}],28:[function(e,t,n){"use strict";var i=e("./cssSupport"),a=function(e){var t=/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/;return e.replace(t,"$1")};n.extractCssUrl=function(e){var t,n=/^url\(([^\)]+)\)/;if(!n.test(e))throw new Error("Invalid url");return t=n.exec(e)[1],i.unquoteString(a(t))};var r=function(e){var t,n="\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*",i="(url\\("+n+"\\)|[^,\\s]+)",a="(?:\\s*"+i+")+",r="^\\s*("+a+")(?:\\s*,\\s*("+a+"))*\\s*$",o=new RegExp(a,"g"),s=[],l=function(e){var t,n=new RegExp(i,"g"),a=[];for(t=n.exec(e);t;)a.push(t[1]),t=n.exec(e);return a};if(e.match(new RegExp(r))){for(t=o.exec(e);t;)s.push(l(t[0])),t=o.exec(e);return s}return[]},o=function(e){var t,i;for(t=0;t<e.length;t++)try{return i=n.extractCssUrl(e[t]),{url:i,idx:t}}catch(a){}};n.parse=function(e){var t=r(e);return t.map(function(e){var t=o(e);return t?{preUrl:e.slice(0,t.idx),url:t.url,postUrl:e.slice(t.idx+1)}:{preUrl:e}})},n.serialize=function(e){var t=e.map(function(e){var t=[].concat(e.preUrl);return e.url&&t.push('url("'+e.url+'")'),e.postUrl&&(t=t.concat(e.postUrl)),t.join(" ")});return t.join(", ")}},{"./cssSupport":29}],29:[function(e,t,n){"use strict";var i=e("cssom");n.unquoteString=function(e){var t=/^"(.*)"$/,n=/^'(.*)'$/;return t.test(e)?e.replace(t,"$1"):n.test(e)?e.replace(n,"$1"):e};var a=function(e){var t,n=document.implementation.createHTMLDocument(""),i=document.createElement("style");return i.textContent=e,n.body.appendChild(i),t=i.sheet.cssRules,Array.prototype.slice.call(t)},r=function(){var e=a("a{background:url(i)}");return!e.length||e[0].cssText.indexOf("url()")>=0}();n.rulesForCssText=function(e){return r&&i.parse?i.parse(e).cssRules:a(e)},n.cssRulesToText=function(e){return e.reduce(function(e,t){return e+t.cssText},"")},n.exchangeRule=function(e,t,n){var i=e.indexOf(t),a=t.parentStyleSheet;a.insertRule(n,i+1),a.deleteRule(i),e[i]=a.cssRules[i]},n.changeFontFaceRuleSrc=function(e,t,i){var a="@font-face { font-family: "+t.style.getPropertyValue("font-family")+"; ";t.style.getPropertyValue("font-style")&&(a+="font-style: "+t.style.getPropertyValue("font-style")+"; "),t.style.getPropertyValue("font-weight")&&(a+="font-weight: "+t.style.getPropertyValue("font-weight")+"; "),a+="src: "+i+"}",n.exchangeRule(e,t,a)}},{cssom:26}],30:[function(e,t,n){"use strict";var i=e("./util"),a=e("./inlineImage"),r=e("./inlineScript"),o=e("./inlineCss"),s=e("./cssSupport"),l=function(e){return i.joinUrl(e,".")},c=function(e){var t=e.map(function(t,n){return n===e.length-1&&(t={baseUrl:l(t.baseUrl)}),JSON.stringify(t)});return t},u=function(e,t){return t.cache!==!1&&"none"!==t.cache&&t.cacheBucket?i.memoize(e,c,t.cacheBucket):e},h=function(e,t,n){var i=s.rulesForCssText(e);return o.loadCSSImportsForRules(i,t,n).then(function(t){return o.loadAndInlineCSSResourcesForRules(i,n).then(function(n){var a=t.errors.concat(n.errors),r=t.hasChanges||n.hasChanges;return r&&(e=s.cssRulesToText(i)),{hasChanges:r,content:e,errors:a}})})},d=function(e,t,n){var a=e.textContent,r=u(h,t);return r(a,n,t).then(function(t){return t.hasChanges&&(e.childNodes[0].nodeValue=t.content),i.cloneArray(t.errors)})},p=function(e){var t=e.getElementsByTagName("style");return Array.prototype.filter.call(t,function(e){return!e.attributes.type||"text/css"===e.attributes.type.nodeValue})};n.loadAndInlineStyles=function(e,t){var n,a=p(e),r=[],o=[];return n=i.clone(t),n.baseUrl=n.baseUrl||i.getDocumentBaseUrl(e),i.all(a.map(function(e){return d(e,n,o).then(function(e){r=r.concat(e)})})).then(function(){return r})};var f=function(e,t){var n,i=e.parentNode;t=t.trim(),t&&(n=e.ownerDocument.createElement("style"),n.type="text/css",n.appendChild(e.ownerDocument.createTextNode(t)),i.insertBefore(n,e)),i.removeChild(e)},m=function(e,t){return i.ajax(e,t).then(function(e){var t=s.rulesForCssText(e);return{content:e,cssRules:t}}).then(function(t){var n=o.adjustPathsOfCssResources(e,t.cssRules);return{content:t.content,cssRules:t.cssRules,hasChanges:n}}).then(function(e){return o.loadCSSImportsForRules(e.cssRules,[],t).then(function(t){return{content:e.content,cssRules:e.cssRules,hasChanges:e.hasChanges||t.hasChanges,errors:t.errors}})}).then(function(e){return o.loadAndInlineCSSResourcesForRules(e.cssRules,t).then(function(t){return{content:e.content,cssRules:e.cssRules,hasChanges:e.hasChanges||t.hasChanges,errors:e.errors.concat(t.errors)}})}).then(function(e){var t=e.content;return e.hasChanges&&(t=s.cssRulesToText(e.cssRules)),{content:t,errors:e.errors}})},g=function(e,t){var n=e.attributes.href.nodeValue,a=i.getDocumentBaseUrl(e.ownerDocument),r=i.clone(t);!r.baseUrl&&a&&(r.baseUrl=a);var o=u(m,t);return o(n,r).then(function(e){return{content:e.content,errors:i.cloneArray(e.errors)}})},v=function(e){var t=e.getElementsByTagName("link");return Array.prototype.filter.call(t,function(e){return e.attributes.rel&&"stylesheet"===e.attributes.rel.nodeValue&&(!e.attributes.type||"text/css"===e.attributes.type.nodeValue)})};n.loadAndInlineCssLinks=function(e,t){var n=v(e),a=[];return i.all(n.map(function(e){return g(e,t).then(function(t){f(e,t.content+"\n"),a=a.concat(t.errors)},function(e){a.push({resourceType:"stylesheet",url:e.url,msg:"Unable to load stylesheet "+e.url})})})).then(function(){return a})},n.loadAndInlineImages=a.inline,n.loadAndInlineScript=r.inline,n.inlineReferences=function(e,t){var a=[],r=[n.loadAndInlineImages,n.loadAndInlineStyles,n.loadAndInlineCssLinks];return t.inlineScripts!==!1&&r.push(n.loadAndInlineScript),i.all(r.map(function(n){return n(e,t).then(function(e){a=a.concat(e)})})).then(function(){return a})}},{"./cssSupport":29,"./inlineCss":31,"./inlineImage":32,"./inlineScript":33,"./util":34}],31:[function(e,t,n){"use strict";var i=e("ayepromise"),a=e("./util"),r=e("./cssSupport"),o=e("./backgroundValueParser"),s=e("css-font-face-src"),l=function(e,t,n){e.style.setProperty(t,n,e.style.getPropertyPriority(t))},c=function(e){return e.filter(function(e){return e.type===window.CSSRule.STYLE_RULE&&(e.style.getPropertyValue("background-image")||e.style.getPropertyValue("background"))})},u=function(e){var t=[];return e.forEach(function(e){e.style.getPropertyValue("background-image")?t.push({property:"background-image",value:e.style.getPropertyValue("background-image"),rule:e}):e.style.getPropertyValue("background")&&t.push({property:"background",value:e.style.getPropertyValue("background"),rule:e})}),t},h=function(e){return e.filter(function(e){return e.type===window.CSSRule.FONT_FACE_RULE&&e.style.getPropertyValue("src")})},d=function(e){return e.filter(function(e){return e.type===window.CSSRule.IMPORT_RULE&&e.href})},p=function(e){var t=[];return e.forEach(function(e,n){e.url&&!a.isDataUri(e.url)&&t.push(n)}),t},f=function(e){var t=[];return e.forEach(function(e,n){e.url&&!a.isDataUri(e.url)&&t.push(n)}),t};n.adjustPathsOfCssResources=function(e,t){var n=c(t),i=u(n),m=!1;return i.forEach(function(t){var n,i=o.parse(t.value),r=p(i);r.length>0&&(r.forEach(function(t){var n=i[t].url,r=a.joinUrl(e,n);i[t].url=r}),n=o.serialize(i),l(t.rule,t.property,n),m=!0)}),h(t).forEach(function(n){var i,o,l=n.style.getPropertyValue("src");try{i=s.parse(l)}catch(c){return}o=f(i),o.length>0&&(o.forEach(function(t){var n=i[t].url,r=a.joinUrl(e,n);i[t].url=r}),r.changeFontFaceRuleSrc(t,n,s.serialize(i)),m=!0)}),d(t).forEach(function(n){var i=n.href,o=a.joinUrl(e,i);r.exchangeRule(t,n,"@import url("+o+");"),m=!0}),m};var m=function(e,t,n){var i=e.indexOf(t);e.splice(i,1),n.forEach(function(t,n){e.splice(i+n,0,t)})},g=function(e){var t=i.defer();return t.resolve(e),t.promise},v=function(e,t,i,o){var s,l=t.href;return l=r.unquoteString(l),s=a.joinUrl(o.baseUrl,l),i.indexOf(s)>=0?(m(e,t,[]),g([])):(i.push(s),a.ajax(l,o).then(function(a){var s=r.rulesForCssText(a);return n.loadCSSImportsForRules(s,i,o).then(function(i){return n.adjustPathsOfCssResources(l,s),m(e,t,s),i.errors})},function(e){throw{resourceType:"stylesheet",url:e.url,msg:"Unable to load stylesheet "+e.url}}))};n.loadCSSImportsForRules=function(e,t,n){var i=d(e),r=[],o=!1;return a.all(i.map(function(i){return v(e,i,t,n).then(function(e){r=r.concat(e),o=!0},function(e){r.push(e)})})).then(function(){return{hasChanges:o,errors:r}})};var y=function(e,t){var n=o.parse(e),i=p(n),r=!1;return a.collectAndReportErrors(i.map(function(e){var i=n[e].url;return a.getDataURIForImageURL(i,t).then(function(t){n[e].url=t,r=!0},function(e){throw{resourceType:"backgroundImage",url:e.url,msg:"Unable to load background-image "+e.url}})})).then(function(e){return{backgroundValue:o.serialize(n),hasChanges:r,errors:e}})},b=function(e,t){var n=c(e),i=u(n),r=[],o=!1;return a.all(i.map(function(e){return y(e.value,t).then(function(t){t.hasChanges&&(l(e.rule,e.property,t.backgroundValue),o=!0),r=r.concat(t.errors)})})).then(function(){return{hasChanges:o,errors:r}})},x=function(e,t){var n,i,r=!1;try{n=s.parse(e)}catch(o){n=[]}return i=f(n),a.collectAndReportErrors(i.map(function(e){var i=n[e],o=i.format||"woff";return a.binaryAjax(i.url,t).then(function(e){var t=btoa(e);i.url="data:font/"+o+";base64,"+t,r=!0},function(e){throw{resourceType:"fontFace",url:e.url,msg:"Unable to load font-face "+e.url}})})).then(function(e){return{srcDeclarationValue:s.serialize(n),hasChanges:r,errors:e}})},_=function(e,t){var n=h(e),i=[],o=!1;return a.all(n.map(function(n){var a=n.style.getPropertyValue("src");return x(a,t).then(function(t){t.hasChanges&&(r.changeFontFaceRuleSrc(e,n,t.srcDeclarationValue),o=!0),i=i.concat(t.errors)})})).then(function(){return{hasChanges:o,errors:i}})};n.loadAndInlineCSSResourcesForRules=function(e,t){var n=!1,i=[];return a.all([b,_].map(function(a){return a(e,t).then(function(e){n=n||e.hasChanges,i=i.concat(e.errors)})})).then(function(){return{hasChanges:n,errors:i}})}},{"./backgroundValueParser":28,"./cssSupport":29,"./util":34,ayepromise:2,"css-font-face-src":8}],32:[function(e,t,n){"use strict";var i=e("./util"),a=function(e,t){var n=e.attributes.src?e.attributes.src.nodeValue:null,a=i.getDocumentBaseUrl(e.ownerDocument),r=i.clone(t);return!r.baseUrl&&a&&(r.baseUrl=a),i.getDataURIForImageURL(n,r).then(function(e){return e},function(e){throw{resourceType:"image",url:e.url,msg:"Unable to load image "+e.url}})},r=function(e){return e.filter(function(e){var t=e.attributes.src?e.attributes.src.nodeValue:null;return null!==t&&!i.isDataUri(t)})},o=function(e){return Array.prototype.filter.call(e,function(e){return"image"===e.type})},s=function(e){return Array.prototype.slice.call(e)};n.inline=function(e,t){var n=s(e.getElementsByTagName("img")),l=o(e.getElementsByTagName("input")),c=r(n.concat(l));return i.collectAndReportErrors(c.map(function(e){return a(e,t).then(function(t){e.attributes.src.nodeValue=t})}))}},{"./util":34}],33:[function(e,t,n){"use strict";var i=e("./util"),a=function(e,t){var n=e.attributes.src.nodeValue,a=i.getDocumentBaseUrl(e.ownerDocument),r=i.clone(t);return!r.baseUrl&&a&&(r.baseUrl=a),i.ajax(n,r).fail(function(e){throw{resourceType:"script",url:e.url,msg:"Unable to load script "+e.url}})},r=function(e){return e.replace(/<\//g,"<\\/")},o=function(e,t){e.attributes.removeNamedItem("src"),e.textContent=r(t)},s=function(e){var t=e.getElementsByTagName("script");return Array.prototype.filter.call(t,function(e){return!!e.attributes.src})};n.inline=function(e,t){var n=s(e);return i.collectAndReportErrors(n.map(function(e){return a(e,t).then(function(t){o(e,t)})}))}},{"./util":34}],34:[function(e,t,n){"use strict";var i=e("url"),a=e("ayepromise");n.getDocumentBaseUrl=function(e){return"about:blank"!==e.baseURI?e.baseURI:null},n.clone=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},n.cloneArray=function(e){return Array.prototype.slice.apply(e,[0])},n.joinUrl=function(e,t){return e?i.resolve(e,t):t},n.isDataUri=function(e){return/^data:/.test(e)},n.all=function(e){var t=a.defer(),n=e.length,i=[];return 0===e.length?(t.resolve([]),t.promise):(e.forEach(function(e,a){e.then(function(e){n-=1,i[a]=e,0===n&&t.resolve(i)},function(e){t.reject(e)})}),t.promise)},n.collectAndReportErrors=function(e){var t=[];return n.all(e.map(function(e){return e.fail(function(e){t.push(e)})})).then(function(){return t})};var r=null,o=function(e,t){return t===!1||"none"===t||"repeated"===t?((null===r||"repeated"!==t)&&(r=Date.now()),e+"?_="+r):e};n.ajax=function(e,t){var i,r=new window.XMLHttpRequest,s=a.defer(),l=n.joinUrl(t.baseUrl,e),c=function(){s.reject({msg:"Unable to load url",url:l})};i=o(l,t.cache),r.addEventListener("load",function(){200===r.status||0===r.status?s.resolve(r.response):c()},!1),r.addEventListener("error",c,!1);try{r.open("GET",i,!0),r.overrideMimeType(t.mimeType),r.send(null)}catch(u){c()}return s.promise},n.binaryAjax=function(e,t){var i=n.clone(t);return i.mimeType="text/plain; charset=x-user-defined",n.ajax(e,i).then(function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(255&e.charCodeAt(n));return t})};var s=function(e){var t=function(e,t){return e.substring(0,t.length)===t};return t(e,"<?xml")||t(e,"<svg")?"image/svg+xml":"image/png"};n.getDataURIForImageURL=function(e,t){return n.binaryAjax(e,t).then(function(e){var t=btoa(e),n=s(e);return"data:"+n+";base64,"+t})};var l=[],c=function(e){return l.indexOf(e)<0&&l.push(e),l.indexOf(e)};n.memoize=function(e,t,n){if("object"!=typeof n)throw new Error("cacheBucket is not an object");return function(){var i,a=Array.prototype.slice.call(arguments),r=t(a),o=c(e);return n[o]&&n[o][r]?n[o][r]:(i=e.apply(null,a),n[o]=n[o]||{},n[o][r]=i,i)}}},{ayepromise:2,url:"j37I/u"}],url:[function(e,t){t.exports=e("j37I/u")},{}],"j37I/u":[function(e,t,n){function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function a(e,t,n){if(e&&c(e)&&e instanceof i)return e;var a=new i;return a.parse(e,t,n),a}function r(e){return l(e)&&(e=a(e)),e instanceof i?e.format():i.prototype.format.call(e)}function o(e,t){return a(e,!1,!0).resolve(t)}function s(e,t){return e?a(e,!1,!0).resolveObject(t):t}function l(e){return"string"==typeof e}function c(e){return"object"==typeof e&&null!==e}function u(e){return null===e}function h(e){return null==e}var d=e("punycode");n.parse=a,n.resolve=o,n.resolveObject=s,n.format=r,n.Url=i;var p=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","	"],g=["{","}","|","\\","^","`"].concat(m),v=["'"].concat(g),y=["%","/","?",";","#"].concat(v),b=["/","?","#"],x=255,_=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,S={javascript:!0,"javascript:":!0},C={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=e("querystring");i.prototype.parse=function(e,t,n){if(!l(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e;i=i.trim();var a=p.exec(i);if(a){a=a[0];var r=a.toLowerCase();this.protocol=r,i=i.substr(a.length)}if(n||a||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var o="//"===i.substr(0,2);!o||a&&C[a]||(i=i.substr(2),this.slashes=!0)}if(!C[a]&&(o||a&&!k[a])){for(var s=-1,c=0;c<b.length;c++){var u=i.indexOf(b[c]);-1!==u&&(-1===s||s>u)&&(s=u)}var h,f;f=-1===s?i.lastIndexOf("@"):i.lastIndexOf("@",s),-1!==f&&(h=i.slice(0,f),i=i.slice(f+1),this.auth=decodeURIComponent(h)),s=-1;for(var c=0;c<y.length;c++){var u=i.indexOf(y[c]);-1!==u&&(-1===s||s>u)&&(s=u)}-1===s&&(s=i.length),this.host=i.slice(0,s),i=i.slice(s),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),c=0,F=g.length;F>c;c++){var $=g[c];if($&&!$.match(_)){for(var D="",R=0,O=$.length;O>R;R++)D+=$.charCodeAt(R)>127?"x":$[R];if(!D.match(_)){var M=g.slice(0,c),j=g.slice(c+1),A=$.match(w);A&&(M.push(A[1]),j.unshift(A[2])),j.length&&(i="/"+j.join(".")+i),this.hostname=M.join(".");break}}}if(this.hostname=this.hostname.length>x?"":this.hostname.toLowerCase(),!m){for(var I=this.hostname.split("."),E=[],c=0;c<I.length;++c){var P=I[c];E.push(P.match(/[^A-Za-z0-9_-]/)?"xn--"+d.encode(P):P)}this.hostname=E.join(".")}var W=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+W,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==i[0]&&(i="/"+i))}if(!S[r])for(var c=0,F=v.length;F>c;c++){var z=v[c],B=encodeURIComponent(z);B===z&&(B=escape(z)),i=i.split(z).join(B)}var L=i.indexOf("#");-1!==L&&(this.hash=i.substr(L),i=i.slice(0,L));var q=i.indexOf("?");if(-1!==q?(this.search=i.substr(q),this.query=i.substr(q+1),t&&(this.query=T.parse(this.query)),i=i.slice(0,q)):t&&(this.search="",this.query={}),i&&(this.pathname=i),k[r]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var W=this.pathname||"",P=this.search||"";this.path=W+P}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",a=!1,r="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(r=T.stringify(this.query));var o=this.search||r&&"?"+r||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&a!==!1?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),i&&"#"!==i.charAt(0)&&(i="#"+i),o&&"?"!==o.charAt(0)&&(o="?"+o),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),o=o.replace("#","%23"),t+a+n+o+i},i.prototype.resolve=function(e){return this.resolveObject(a(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(l(e)){var t=new i;t.parse(e,!1,!0),e=t}var n=new i;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(n[t]=e[t])}),k[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!k[e.protocol])return Object.keys(e).forEach(function(t){n[t]=e[t]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||C[e.protocol])n.pathname=e.pathname;else{for(var a=(e.pathname||"").split("/");a.length&&!(e.host=a.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==a[0]&&a.unshift(""),a.length<2&&a.unshift(""),n.pathname=a.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var r=n.pathname||"",o=n.search||"";n.path=r+o}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var s=n.pathname&&"/"===n.pathname.charAt(0),c=e.host||e.pathname&&"/"===e.pathname.charAt(0),d=c||s||n.host&&e.pathname,p=d,f=n.pathname&&n.pathname.split("/")||[],a=e.pathname&&e.pathname.split("/")||[],m=n.protocol&&!k[n.protocol];if(m&&(n.hostname="",n.port=null,n.host&&(""===f[0]?f[0]=n.host:f.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===a[0]?a[0]=e.host:a.unshift(e.host)),e.host=null),d=d&&(""===a[0]||""===f[0])),c)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,f=a;else if(a.length)f||(f=[]),f.pop(),f=f.concat(a),n.search=e.search,n.query=e.query;else if(!h(e.search)){if(m){n.hostname=n.host=f.shift();var g=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return n.search=e.search,n.query=e.query,u(n.pathname)&&u(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!f.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var v=f.slice(-1)[0],y=(n.host||e.host)&&("."===v||".."===v)||""===v,b=0,x=f.length;x>=0;x--)v=f[x],"."==v?f.splice(x,1):".."===v?(f.splice(x,1),b++):b&&(f.splice(x,1),b--);if(!d&&!p)for(;b--;b)f.unshift("..");!d||""===f[0]||f[0]&&"/"===f[0].charAt(0)||f.unshift(""),y&&"/"!==f.join("/").substr(-1)&&f.push("");var _=""===f[0]||f[0]&&"/"===f[0].charAt(0);if(m){n.hostname=n.host=_?"":f.length?f.shift():"";var g=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return d=d||n.host&&f.length,d&&!_&&f.unshift(""),f.length?n.pathname=f.join("/"):(n.pathname=null,n.path=null),u(n.pathname)&&u(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:3,querystring:6}],37:[function(e,t,n){var i=function(e){return e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")},a=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},r=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},o=function(e){var t=e.value;return" "+e.name+'="'+a(t)+'"'},s=function(e){var t=e.tagName;return"http://www.w3.org/1999/xhtml"===e.namespaceURI&&(t=t.toLowerCase()),t},l=function(e){var t=Array.prototype.map.call(e.attributes||e.attrs,function(e){return e.name}).indexOf("xmlns")>=0;return"html"!==s(e)||t?"":' xmlns="'+e.namespaceURI+'"'},c=function(e){return Array.prototype.map.call(e.childNodes,function(e){return p(e)}).join("")},u=function(e){var t="<"+s(e);return t+=l(e),Array.prototype.forEach.call(e.attributes||e.attrs,function(e){t+=o(e)}),e.childNodes.length>0?(t+=">",t+=c(e),t+="</"+s(e)+">"):t+="/>",t},h=function(e){var t=e.nodeValue||e.value||"";return r(t)},d=function(e){return"<!--"+e.data.replace(/-/g,"&#45;")+"-->"},p=function(e){return"#document"===e.nodeName||"#document-fragment"===e.nodeName?c(e):e.tagName?u(e):"#text"===e.nodeName?h(e):"#comment"===e.nodeName?d(e):void 0};n.serializeToString=function(e){return i(p(e))}},{}]},{},[1])(1)}),n.exports||i}),require.define("http://uxcandy.com/~boomyjee/templater/lib/client/app.js",function(e){var t=window.require.factory(e),n={exports:!1},i={};return window.ui=teacss.ui,window.$=teacss.jQuery,window._t=function(e){return window._t.hash[e]||e},window._t.hash={},window._t.load=function(e){$.extend(window._t.hash,e)},t("./style.css"),t("./controls/component.js"),t("./controls/previewFrame.js"),t("./controls/serializeObject.js"),window.rasterizeHTML=t("./controls/rasterizeHTML.js"),$.each_deep=function(e,t){e&&e.children&&$.each(e.children,function(n){t.call(this,n,e),this&&this.children&&$.each_deep(this,t)})},window.eachComponent=function(e,t){t||(t=e,e=!1);var n=Component.app;$.each(n.settings.templates,function(){var n=this;$.each_deep(n,function(i,a){e&&this.value.type!=e||t(this,this.value.id,a==n?!1:a,this.value.type)})})},window.reloadScript=window.reloadScript||function(e,t){var n=teacss.tea.Script.list,i=n[n.length-1];if(e&&i&&i.isCode){var a=JSON.stringify(t),r=reloadScript.hash[e];if(reloadScript.hash[e]=a,r!=a){var o=Component.previewFrame.$f("#script_templater_makefile_tea").length;if(o){var s=Component.previewFrame.frame[0].contentWindow;s.eval(i.what)}}}},reloadScript.hash=reloadScript.hash||{},ui.alert=ui.alert||function(e,t){window.alertDialog||(window.alertDialog=ui.dialog({modal:!0,width:300,minHeight:50,resizable:!1,draggable:!1,dialogClass:"alert",buttons:{OK:function(){$(this).dialog("close")}}}),$(document).click(".ui-widget-overlay",function(){window.alertDialog.close()})),window.alertDialog.element.dialog("option","title",t||_t("Document alert")),window.alertDialog.element.empty().append($("<i>").addClass("ui-icon ui-icon-circle-check"),$("<p>").html(e)),window.alertDialog.open()},i=ui.Control.extend({init:function(e){var n=this;this._super($.extend({allowSkipType:!0},e)),this.styles=[],this.staticStyles=[],this.options.template=this.options.template||"default",this.options.modules=this.options.modules||["core"],Component.app=this,teacss.jQuery(function(){n.request("load",{cache:0},function(e){try{e=e||{},n.settings={},n.settings.templates=$.parseJSON(e.templates||"{}"),n.settings.theme=$.parseJSON(e.theme||"{}"),teacss.functions.settings=n.settings,n.components=e.components,n.settings.upload=e.upload;var i=e.cached;for(var a in i)teacss.files[teacss.path.absolute(a)]=i[a],window.require.cache.files[teacss.path.absolute(a)]=i[a];delete n.settings.cached}catch(r){alert(e)}var o=[];$.each(n.options.modules,function(e,t){o.push("/"!=t[0]?"../modules/"+t+"/"+t+".js":t)}),o.push(function(){window.dayside&&(dayside.editor=ui.control(),dayside.core=ui.control(),FileApi.file=function(e,t){var i=FileApi.cache[e]=n.settings.theme.extra_js||"";t({data:i})},FileApi.save=function(e,t,i){FileApi.cache[e]=t,n.settings.theme.extra_js=t,Component.previewFrame.reloadScript=!0,teacss.parsed["templater_makefile.tea"]=!1,n.reloadTeaNow(),n.trigger("change"),i({data:"ok"})}),n.initUI()}),t.apply(t,o)})}),this.bind("change",function(){n.skipSave||n.request("save",{templates:JSON.stringify(n.settings.templates),theme:JSON.stringify(n.settings.theme,void 0,2)})})},request:function(e,t,n){var i=this;i.pending_request=e,$.ajax({url:this.options.ajax_url,type:"POST",data:$.extend({},{_type:e,_modules:i.options.modules,_project:i.options.project},t),success:function(e){if(n){try{var t=$.parseJSON(e)}catch(a){alert(e)}n(t),i.pending_request&&i.pending_request.call&&i.pending_request(),i.pending_request=!1}}})},initUI:function(){var e=this,t=350,n=400,i=ui.panel();i.element.css({zIndex:2,position:"absolute",left:0,width:t,top:0,height:57}),i.element.addClass("preview-toolbar"),i.push(e.closeButton=ui.button({label:_t("Preview"),margin:"15px 0 0 15px",icons:{primary:"ui-icon-close"},click:function(){var t=e.frame.layoutModeEnabled;e.frame.layoutMode(!t),$("body").toggleClass("view-layout",t),e.closeButton.element.button("option",t?{label:_t("Editor"),icons:{primary:"ui-icon-gear"}}:{label:_t("Preview"),icons:{primary:"ui-icon-close"}})}}),e.view3dButton=ui.check({label:"3D",margin:"15px 0 0 5px",change:function(){e.frame.view3dMode(this.value)}}),e.publishButton=ui.button({label:_t("Publish"),margin:"15px 15px 0 0",icons:{primary:"ui-icon-circle-triangle-e"},click:function(){e.publish()}})),e.closeButton.element.addClass("close-button"),e.publishButton.element.css({position:"absolute",right:0,top:0});var a=ui.panel();a.element.css({position:"absolute",left:0,width:0,top:57,bottom:0,zIndex:999}).addClass("editor-sidebar"),e.templateTabs=ui.tabPanel({margin:0}),e.templateTabs.element.addClass("preview-tabs"),e.templateTabs.element.css({position:"absolute",left:t,right:0,top:0,height:57}),e.templateTabs.element.find(".ui-tabs-nav:first").sortable("destroy"),e.templateTabs.element.click(function(){Component.previewFrame.select(!1)});var r=ui.panel();r.element.css({position:"fixed",left:0,top:0,right:0,bottom:0,margin:0}).addClass("editor-panel"),r.element.appendTo(teacss.ui.layer),r.push(e.templateTabs,i,a),e.frame=ui.previewFrame(),e.frame.element.css({position:"absolute",left:n,right:0,margin:0,top:57,bottom:0}).addClass("frame-panel"),e.frame.bind("init",function(){e.templateTabs.bind("select",function(t,n){e.frameReady&&e.selectTemplate(n.template,n)}),e.initTabs(),e.frameReady=!0,e.selectTemplate(e.options.template)}),e.frame.bind("loaded",function(){e.updateUI()}),e.frame.bind("change",function(){e.settings.templates[e.currentTemplate]=this.getValue().template,e.trigger("change")
}),r.push(e.frame),e.componentPanel=ui.panel({}),e.componentPanel.element.css({position:"absolute",top:0,bottom:0,left:0,height:"",width:n,margin:0}).addClass("ui-button-tabs-content"),e.stylePanel=ui.panel({}),e.stylePanel.element.css({position:"absolute",top:0,bottom:0,left:0,right:0,margin:0}).appendTo(e.componentPanel.element),a.push(e.componentPanel),e.trigger("initUI")},initTabs:function(){var e=this;e.tabList=e.tabList||[],e.tabHash={},e.breadcrumbs=e.breadcrumbs||$("<span>"),e.breadcrumbs.detach(),$.each(e.tabList,function(){e.templateTabs.closeTab(this)});for(var t=this.options.template;t;){var n=ui.panel({label:t});n.template=t,e.tabHash[t]=n,e.templateTabs.push(n),e.tabList.push(n);var i=$("<div class='template-status'>").on("click",{tpl:t},function(t){t.preventDefault(),t.stopPropagation(),e.editParentTemplate(t.data.tpl)}).appendTo(n.element);t=this.settings.templates[t]||{value:{}},t=t.value.parentTemplate;var a=$("<a href='#'>");a.text(t?"Child template for "+t:"Standalone template"),i.append(a)}},editParentTemplate:function(e){var t=this,n=this.settings.templates[e],i=n?n.value.parentTemplate||"":"",a=prompt("Enter template name in form /some/path/name",i);null!==a&&a!==i&&(this.settings.templates[e]={value:{parentTemplate:a||void 0}},t.trigger("change"),t.initTabs())},selectTemplate:function(e){var t=this;t.currentTemplate!=e&&(t.currentTemplate=e,this.frame.setValue({template:t.settings.templates[e]||{},data:!1}),t.tabHash[e].element.find(".template-status").append(t.breadcrumbs))},publish:function(){var e=this;teacss.build("templater_makefile.tea",{callback:function(t){function n(){e.request("publish",{files:t},function(){ui.alert(_t("Your page was successfully published and now is available to your customers"),_t("Publish success"))})}if(e.options.publishScreenshot){var i=document.createElement("canvas");i.width=1920,i.height=1080,e.frame.$f("script").remove(),rasterizeHTML.drawDocument(e.frame.document,i,{width:1920,height:1080}).then(function(){var a=document.createElement("canvas"),r=a.getContext("2d");a.width=600,a.height=450;var o=parseFloat(e.settings.theme.sheet.width);o=1.05*(o||1024);var s=a.width/o,l=.5*(i.width-o)*s;r.drawImage(i,-l,0,i.width*s,i.height*s);var c=a.toDataURL();t["/screenshot.png"]=c,n()})}else n()}})},updateComponentUI:function(e,t){var n=this,i=this.form,a=teacss.ui.form.activeForm,r=teacss.ui.form.activeForm={newItems:[]};e.controls=e.controls||[],n.trigger("component-controls",{cmp:e}),teacss.ui.form.activeForm=a;for(var o=0;o<r.newItems.length;o++){var s=r.newItems[o];i.registerItem(s,t)}},reloadTeaNow:function(){clearTimeout(this.form.processTimeout),this.frame.reloadTea()},updateUI:function(){var e=this;e.stylePanel.element.empty();var t=this.form=ui.form(function(){var t=e.frame.componentsHash;for(var n in t)t[n].controls=[],t[n].overlayControls=[];e.trigger("common-controls")});t.setValue(e.settings.theme),t.bind("change",function(){teacss.functions.theme=e.settings.theme=this.value,clearTimeout(t.processTimeout),t.processTimeout=setTimeout(function(){e.frame.reloadTea()},50),clearTimeout(t.saveTimeout),t.saveTimeout=setTimeout(function(){e.trigger("change")},500)})}}),n.exports||i}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/editor_ru.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return n={"Show first title":"Заголовок блока","Show second title":"Подзаголовок блока","Grayscale logo":"Обесцветить логотипы","Background color:":"Цвет фона:","Show text under the form":"Текст под формой","Countdown color:":"Цвет таймера:","Second title color:":"Цвет второго заголовка:","Background:":"Фон:","Show list":"Список","Show name cell":"Имя ячейки","Show description cell":"Подзаголовок","Show border from image":"Рамка у изображения","Show policy":"Политика конфиденциальности","Show copyright":"Авторские права","Add placemark":"Добавить маркер",center:"центр","Show text":"Показать текст",Name:"Имя",Address:"Адрес",Color:"Цвет:","Upload file":"Загрузить файл",Video:"Видео","Video url (youtube or vimeo):":"Ссылка на видео (youtube или vimeo)","example: www.youtube.com/embed/xbK8rl9wH4Q":"пример: www.youtube.com/embed/xbK8rl9wH4Q",Image:"Изображение","Select image file":"Выбрать файл","Upload image file":"Загрузить изображение","Order form":"Форма заказа","Button text:":"Текст кнопки:","Button color:":"Цвет кнопки:","Form:":"Форма","Show form":"Показать форму","Show success window":"Показать окно благодарности","Add Item":"Добавить","Media files":"Медиа файлы","Upload image":"Загрузить изображение","Image title:":"Название картинки:","Image description:":"Описание картинки:","Exact date":"Дата окончания","Every month":"Каждый месяц","Every week":"Каждую неделю","Every day":"Каждый день","Date:":"Дата:","Day:":"День:","Day of week:":"День недели:","Time:":"Время:",Map:"Карта",Logotype:"Логотип","Image logo":"Изображение","Text name logo":"Текст","Company name:":"Название компании:","Font settings:":"Настройки шрифта:","Size:":"Размер:","Field label":"Название поля","Field description":"Описание поля","Is required?":"Обязательное поле","Option 1\\nOption 2\\nOption 3":"Опция 1\\n Опция 2\\n Опция 3\\n",Options:"Опции",Form:"Форма","Add Field":"Добавить поле","Sure to remove component?":"Удалить данный блок?",Settings:"Настройки",Icons:"Иконки","Show description and order button":"Кнопка заявки и описание","Show order button":"Кнопка заявки","Show border from icon":"Рамка у иконки","Show name benefit":"Название преимущества","Show description benefit":"Описание преимущества","Show name step":"Название шага","Show description step":"Описание шага","Show image":"Изображение","Icons color:":"Цвет иконок:",black:"черный",grey:"серый",white:"белый","Digits color:":"Цвет таймера","Show name":"Имя","Show description":"Описание","Show price":"Цена","Show text above order button":"Текст над кнопкой заказа","Show shadow":"Тень","Image size:":"Размер изображения:","middle<br>":"средний",large:"большой","Image format:":"Формат изображения:","circle<br>":"круг",square:"квадрат","Background image:":"Фоновое изображение:","Add noise":"Шум на изображении","Show text above the button":"Текст над кнопкой","Add arrow":"Стрелочка к кнопке","Show text under the form title":"Текст под заголовком формы","Show third title":"Доп. подзаголовок","Show border from media":"Рамка у изображения","Show shadow from media":"Тень у изображения","Show list box":"Список под описанием","Form align:":"Расположение формы:","Move left<br>":"слева","Move center<br>":"по центру","Move right":"справа","Background texture:":"Текстура фона","Show image name":"Заголовок изображения","Show image signature":"Описание изображения","Show image descroption":"Подзаголовок изображения","Show big image (enable fancybox)":"Увеличение при клике","Show second text title":"Дополнительный заголовок","Show border":"Рамка","Video size:":"Размер видео:","small<br>":"маленький","medium<br>":"средний","Show name company":"Название компании","Show branch company":"Отрасль","Is displayed when you hover over the photo":"Выводится при наведении на фотографию","Show order form":"Показавать форму","Go to the link":"Переходить по ссылке",Form:"Форма",Link:"Ссылка","Button behavior after click:":"Поведение кнопки заказа (после клика):",Text:"Текст","Text area":"Текстовое поле",Checkbox:"Флажок",Select:"Выпадающий список",Radio:"Переключатель",File:"Файл","Order button":"Кнопка заказа"},t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/editor.css",!0),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/block.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return window.lp={},lp.block=teacss.ui.control.extend({init:function(e){this._super(e);var t=this;this.cmp=this.options.cmp,this.element=this.cmp.element,this.variantValues={},this.variantDefault={},this.configButton=this.options.configForm?$("<div class='fa fa-gear lp-button right'>").click(function(){t.config({my:"right top",at:"right top",of:t.configButton})}):"",this.dragButton=$("<div class='fa fa-arrows lp-button right draggable'>").data("component",t.cmp),this.removeButton=$("<div class='fa fa-trash-o lp-button right'>"),this.prevButton=$("<div class='fa fa-chevron-left lp-button'>"),this.nextButton=$("<div class='fa fa-chevron-right lp-button'>"),this.dragButton.click(function(){}),this.removeButton.click(function(){t.remove()}),this.prevButton.click(function(){t.prev()}),this.nextButton.click(function(){t.next()}),t.options.init&&t.options.init.call(t)},remove:function(){confirm(_t("Sure to remove component?"))&&this.cmp.remove()},prev:function(){this.variantValues[this.current]=this.value,this.current=(this.current-2+this.variants.length)%this.variants.length+1,this.showCurrent(),this.editorChange("variant",this.current)},next:function(){this.variantValues[this.current]=this.value,this.current=this.current%this.variants.length+1,this.showCurrent(),this.editorChange("variant",this.current)},config:function(e){function t(){var e=a.form;if(e.innerForm){var t=e.getValue();$.each(e.innerForm.items,function(e,n){var i=n.options.showWhen;if(i){var a=!0;for(var r in i)$.isArray(i[r])?-1==jQuery.inArray(t[r],i[r])&&(a=!1):i[r]!=t[r]&&(a=!1);a?n.element.show():n.element.hide()}})}}var n=this,i=n.options.configForm.id||"dialog",a=n.Class[i];if(!a){var r,o=500,s=void 0;n.options.configForm.width&&(o=n.options.configForm.width,delete n.options.configForm.width),n.options.configForm.height&&(s=n.options.configForm.height,delete n.options.configForm.height),r=n.options.configForm.item?n.options.configForm.item({}):teacss.ui.composite(n.options.configForm),a=this.Class[i]=teacss.ui.dialog({width:o,height:s,modal:!1,title:n.options.configForm.title||_t("Settings"),resizable:!1,items:[r],open:function(){a.detached.appendTo(a.element),lp.configOverlay||(lp.configOverlay=$("<div>").css({position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:2e4}).click(function(){$(".ui-dialog-content:visible").dialog("close"),$(".button-select-panel:visible").hide()}),Component.previewFrame.$f("body").append(lp.configOverlay)),lp.configOverlay.show()},close:function(){lp.configOverlay.hide()}}),r.bind("change",function(){n.Class.current.value=r.getValue(),t(),n.Class.current.trigger("change")}),a.form=r}if(a.form.setValue(this.value),this.Class.current=this,t(),a.detached=a.element.children().detach(),e){e=$.extend({},e);var l=(e.of.offset(),$(Component.previewFrame.window).scrollTop()),c=Component.previewFrame.frame.offset(),u=Math.floor(c.top-l);e.at=e.at.replace("top","top+"+u+"px"),a.element.dialog("option","position",e)}$(".ui-dialog-content:visible").dialog("close"),a.open()},getDefault:function(e){return void 0===e&&(e=this.current),this.variantDefault[e]},showCurrent:function(e){var t=this,n=this.variants.hide().eq(this.current-1),i=this.getDefault();e&&(this.variantValues[this.current]=e),this.value=$.extend(i,this.variantValues[this.current]||{type:t.type,id:t.id}),n.show(),t.variant=n,$.each(t.editors,function(e,n){var i=teacss.ui.prop(t.value,n.options.name);n.setValue(i)})},bindEditors:function(e){var t=this;t.editors=[],this.variants.each(function(){var n=$(this).attr("data-variant");$(this).find("[data-editor]:not([data-dummy] *)").each(function(){var i=$(this).attr("data-editor"),a=$(this).attr("data-name"),r=$(this).data("editor-control");if(!r&&a){var o=$(this).attr("data-options");o=o?JSON.parse(o):{},$(this).removeAttr("data-options"),r=Component.classFromName(i)($.extend(o,{element:$(this)})),$(this).data("editor-control",r),r.options.name=a,r.options.block=t,r.options.variant=n,r.bind("change",function(){t.editorChange(a,r.getValue(),r)})}if(r){if(e){var s=teacss.ui.prop(t.value,r.options.name);r.setValue(s)}t.editors.push(r)}})})},setValue:function(e){this._super(e),this.id=e.id,this.type=e.type;var t=this;this.cmp.componentHandle.detach(),this.controls||(t.controls=$("<div class='cmp-controls'>").appendTo(this.cmp.element),t.variants=this.cmp.element.children("[data-variant]").each(function(){var e=$.parseJSON($(this).attr("data-default")),n=$(this).attr("data-variant");t.variantDefault[n]=$.extend(e||{},{variant:parseInt(n)}),$(this).attr("data-default",null)}),t.variants.length>1?(t.current=this.cmp.element.attr("data-current"),t.controls.append(this.prevButton,this.nextButton)):t.current=1,t.bindEditors(),t.showCurrent(e),t.controls.append(this.configButton,this.dragButton,this.removeButton))},editorChange:function(e,t,n){var i=this;this.value=this.value||{},teacss.ui.prop(this.value,e,t),n&&$.each(i.editors,function(a,r){r!=n&&e==r.options.name&&i.value.variant==r.options.variant&&(r.setValue(t),r.options.change&&r.options.change.call(r))}),this.trigger("change")}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/repeater.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.repeater=teacss.ui.control.extend({init:function(e){this._super($.extend({addItemText:_t("Add Item"),sortable:!0},e)),this.element=this.options.element,this.options.name=this.element.data("name"),this.addCovers()},itemIndex:function(e){return e=$(e),e.parent().children("[class=item_block]").index(e)},config:function(e,t){var n=this,i=n.itemIndex(t),a=n.value[i];lp.block.prototype.config.call({Class:n.Class,options:{configForm:n.options.configForm},value:a,trigger:function(e){"change"==e&&(n.value[i]=this.value,n.options.itemChange&&n.options.itemChange.call(n,this.value,t),n.trigger("change"))}},e)},addAfter:function(e){var t=this.options.block,n=teacss.ui.prop(t.getDefault(),this.options.name),i=$.extend(!0,{},n[0]),a=e?this.itemIndex(e):-1;a==this.items.length-1||-1==a?this.value.push(i):this.value.splice(a+1,0,i);var r=this.element.find("> [data-dummy]"),o=r.clone().removeAttr("data-dummy");e?o.insertAfter(e):o.insertBefore(r),this.addCovers(),this.bindEditors(),this.trigger("change")},remove:function(e){var t=this.itemIndex(e);e.remove(),this.value.splice(t,1),this.bindEditors(),this.trigger("change")},addCovers:function(){var e=this;e.items=this.element.children(".item_block:not([data-dummy])"),e.items.each(function(){var t=$(this);0==t.find("> .cmp-repeater-cover").length&&(t.append(t.cover=$("<div class='cmp-repeater-cover'>"),t.removeCover=$("<div class='cmp-cover fa fa-trash-o'>").css({opacity:1}).hide(),t.dragCover=$("<div class='cmp-cover cmp-drag-cover fa fa-arrows'>").css({opacity:1}).hide(),t.addCover=$("<div class='cmp-cover cmp-add-cover'>").css({opacity:1}).hide()),e.options.configForm&&t.cover.append($("<div class='fa fa-gear lp-button'>").click(function(){e.config({my:"left top",at:"right top",of:$(this)},t)})),e.options.inline?(t.cover.addClass("cmp-repeater-cover-inline"),e.options.sortable&&t.cover.append($("<div class='fa fa-arrows lp-button lp-drag-handle'>").mouseover(function(){t.dragCover.show()}).mouseout(function(){t.dragCover.hide()}))):t.cover.append($("<div class='fa fa-plus lp-button'>").mouseover(function(){t.addCover.show()}).mouseout(function(){t.addCover.hide()}).click(function(){e.addAfter(t)})),t.cover.append($("<div class='fa fa-trash-o lp-button'>").mouseover(function(){t.removeCover.show()}).mouseout(function(){t.removeCover.hide()}).click(function(){e.remove(t)})))}),!e.addButton&&e.options.inline&&e.element.append(e.addButtonWrap=$("<div class='lp-button-repeater-add-wrap'>").append(e.addButton=$("<div class='fa fa-plus lp-button lp-button-repeater-add'>").text(e.options.addItemText).click(function(){e.addAfter()}))),e.options.inline&&e.initSorting()},initSorting:function(){var e=this,t=!1,n=null,i=!1,a=0;e.items.find(".lp-drag-handle").unbind("mousedown mouseup").mousedown(function(){t=!0}).mouseup(function(){t=!1}),e.items.unbind("dragstart dragover dragenter drop dragend").attr("draggable","true").bind("dragstart",function(i){if(!t)return!1;t=!1;var r=i.originalEvent.dataTransfer;r.effectAllowed="move",r.setData("Text","dummy"),n=this,e.element.addClass("dragging"),a=e.itemIndex(n)}).bind("dragend",function(){var t=e.itemIndex(n);n=null,e.element.find(".cmp-drag-cover").hide(),e.element.removeClass("dragging"),a!=t&&(e.value.splice(t,0,e.value.splice(a,1)[0]),e.trigger("change"))}).bind("dragover",function(t){return t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="none",this==n||i?void 0:(e.itemIndex(n)<e.itemIndex(this)?$(n).insertAfter(this):$(n).insertBefore(this),i=!0,setTimeout(function(){i=!1},100),!1)})},bindEditors:function(){var e=this;e.items.each(function(t){$(this).find("[data-editor]").each(function(){var n=$(this).data("name"),i=n.substring((e.options.name+".").length),a=i.split(".");a[0]=t;var r=e.options.name+"."+a.join(".");if(r!=n){$(this).attr("data-name",r);var o=$(this).data("editor-control");o&&(o.options.name=r)}})}),this.options.block.bindEditors(!0)}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/lib/spacedText/spacedText.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return function(e){"undefined"==typeof $document&&($document=e(document)),e.fn.spacedClickOut=function(t,n){var i=".spacedClickOut_"+Math.floor(9e3*Math.random()+1e3);return setTimeout(e.proxy(function(){$document.on("click"+i,e.proxy(function(a){e(a.target).is(this)||0!==this.has(a.target).length||($document.off("click"+i),a.delegateTarget=this.get(),void 0===n?t.call(this,a):n.call(this,a))},this))},this),50),"click"+i}}(jQuery),function(e){"undefined"==typeof $document&&($document=e(document));var t=function(t,n){return this.$item=e(t),this.is_inner="undefined"!=typeof n.append_to,this.opts=e.extend({value:"#FFFFFF",gradient_value:!1,type:"fill",show:!1,append_to:!1,change:function(){},on_done:function(){},on_cancel:function(){}},n),this.data={},this.event_scope=".spacedColors_"+Math.floor(9e3*Math.random()+1e3),this.init(),this};t.prototype={is_inner:!1,gradient_scale:1.75,colorname_table:{black:"#000000",gray:"#808080",grey:"#808080",silver:"#C0C0C0",lightgray:"#D3D3D3",white:"#FFFFFF",red:"#FF0000",pink:"#FFC0CB",orange:"#FFA500",yellow:"#FFFF00",violet:"#EE82EE",purple:"#800080",magenta:"#FF00FF",brown:"#A52A2A",maroon:"#800000",olive:"#808000",lime:"#00FF00",green:"#008000",aqua:"#00FFFF",blue:"#0000FF",navy:"#000080"},init:function(){this.data.value="object"==typeof this.opts.value?this.opts.value.value:this.opts.value?this.opts.value:"#FFFFFF","transparent"==this.data.value&&(this.data.value="#FFFFFF"),this.data.hex=this.is_hex(this.data.value)?this.expandHex(this.data.value):this.color2hex(this.data.value),this.data.hsb=this.hex2hsb(this.data.hex),this.data.opacity=this.color2opacity(this.data.value),this.data.opacity>1?this.data.opacity=1:this.data.opacity<0&&(this.data.opacity=0),(this.is_inner||this.opts.show)&&this.show()},destroy:function(){this.$selector&&this.$selector.remove(),e(document).off(this.event_scope)},show:function(){if(this.$selector=e('<div class="spacedColors spacedColors-selector"></div>'),this.$selector.append('<div class="spacedColors-hues"><div class="spacedColors-huePicker"></div></div>').append('<div class="spacedColors-colors" style="background-color: #FFF;"><div class="spacedColors-colorPicker"><div class="spacedColors-colorPicker-inner"></div></div>').hide(),this.is_inner)this.$selector.addClass("is_inner");else{var t=e('<div class="spacedColors-buttons"><a class="spacedColors-buttons_done" data-value="done"><span>Готово</span></a><a class="spacedColors-buttons_cancel" data-value="cancel"><span>Отмена</span></a></div>');this.$selector.append(t),t.on("click","a",e.proxy(function(t){var n=e(t.currentTarget).attr("data-value");"done"==n&&"function"==typeof this.opts.on_done?this.opts.on_done(this.data):"cancel"==n&&"function"==typeof this.opts.on_cancel&&this.opts.on_cancel(this.data),this.destroy()},this)),this.$selector.spacedClickOut(e.proxy(function(){this.opts.on_done(this.data),this.destroy()},this))}this.$color_picker=this.$selector.find(".spacedColors-colorPicker"),this.$hue_picker=this.$selector.find(".spacedColors-huePicker"),this.show_opacity(),this.show_input(),this.show_gradient();var n=this.data.hsb;this.$selector.find(".spacedColors-colors").css("backgroundColor","#"+this.hsb2hex({h:n.h,s:100,b:100})).end().find(".spacedColors-opacity").css("backgroundColor","#"+this.hsb2hex({h:n.h,s:n.s,b:n.b})).end(),this.colorPosition=this.getColorPositionFromHSB(this.data.hsb),this.huePosition=this.getHuePositionFromHSB(this.data.hsb),this.opacityPosition=this.getOpacityPositionFromAlpha(this.data.opacity),this.$color_picker.css("top",this.colorPosition.y+"px").css("left",this.colorPosition.x+"px"),this.$hue_picker.css("top",this.huePosition+"px"),this.$opacity_picker&&this.$opacity_picker.css("left",this.opacityPosition+"px"),this.mousebutton=0;var i=this.is_inner?this.opts.append_to:"body";if(e(i).append(this.$selector),!this.is_inner){var a=300,r=600;if(this.opts.element){var o=e(this.opts.element).offset(),s=e(this.opts.element).closest("body").scrollTop();a=o.top-s,r=o.left,this.opts.element_offset&&(a+=this.opts.element_offset.top||0,r+=this.opts.element_offset.left||0),a=a-this.$selector.height()+8,50>a&&(a=50)}this.$selector.css({top:a,left:r})}this.$selector.fadeIn(100),this.$selector.on("selectstart",function(){return!1}),this.$selector.on("mousedown"+this.event_scope+" touchstart"+this.event_scope,e.proxy(function(t){if(e(t.target).is('input[type="text"]'))return!0;this.mousebutton=1;var n=e(t.target).parents().andSelf();if(n.hasClass("spacedColors-colors")&&(t.preventDefault(),this.moving="colors",this.move_color(t)),n.hasClass("spacedColors-hues")&&(t.preventDefault(),this.moving="hues",this.move_hue(t)),n.hasClass("spacedColors-opacity")&&(t.preventDefault(),this.moving="opacity",this.move_opacity(t)),n.hasClass("color_gradient_pick_line")&&"gradient"==this.opts.type){var i=e(t.target);i.is(".color_gradient_pick_line")?(t.preventDefault(),this.addGadientPointEvent(t)):(i.is(".color_gradient_pick_value")&&(i=e(t.target).parent()),i.is(".color_gradient_pick")&&(t.preventDefault(),this.$moving_gradient_pick=i,this.moving="gradient",this.setGradientPointActive(i),this.move_gradient(t)))}return n.hasClass("spacedColors-selector")?void t.preventDefault():void(n.hasClass("spacedColors")||this.is_inner||this.hide())},this)),e(document).on("mouseup"+this.event_scope+" touchend"+this.event_scope,e.proxy(function(){this.mousebutton=0,this.moving=void 0},this)),e(document).on("mousemove"+this.event_scope+" touchmove"+this.event_scope,e.proxy(function(t){return e(t.target).is('input[type="text"]')?!0:void(1===this.mousebutton&&(t.preventDefault(),"colors"===this.moving&&this.move_color(t),"hues"===this.moving&&this.move_hue(t),"opacity"===this.moving&&this.move_opacity(t),"gradient"===this.moving&&this.move_gradient(t)))},this))},show_input:function(){this.$input_text=e('<input type="text">').val(this.data.value),this.$selector.append(this.$input_text),this.$selector.addClass("is_show_input"),this.$input_text.on("keyup",e.proxy(function(t){var n=e(t.currentTarget).val(),i=this.color2hex(n),a=this.color2opacity(n);if(i===!1)return this.$input_text.addClass("is_invalid"),!0;this.$input_text.is(".is_invalid")&&this.$input_text.removeClass("is_invalid"),this.data.value=n,this.data.opacity=a,this.opts.opacity&&(this.opacityPosition=this.getOpacityPositionFromAlpha(this.data.opacity),this.$opacity_picker.css("left",this.opacityPosition+"px")),this.inputTextlock=!0;var r=this.hex2hsb(i);this.set_color(r)},this)),this.$input_text.wrap('<div class="spacedColors-input"></div>')},show_opacity:function(){return this.opts.opacity?(this.$selector.addClass("is_show_opacity"),this.$selector.prepend('<div class="spacedColors-opacity"><div class="spacedColors-opacityPicker"></div></div><div class="spacedColors-opacityText">Прозрачность</div>'),this.$opacity_picker=this.$selector.find(".spacedColors-opacityPicker"),!0):!1},show_gradient:function(){if("gradient"!=this.opts.type)return!1;this.$selector.addClass("is_show_gradient");var t=e('<div class="spacedColors-gradient"></div>');this.$gradient_line=e('<div class="color_gradient_line"></div>'),this.$gradient_pick_list=e('<div class="color_gradient_pick_line"></div>'),this.$gradient_btn=e('<div class="color_gradient_btn"></div>');var n=e('<a class="color_gradient_pick_remove" title="Удалить активную точку градиента"></a>');t.append('<div class="spacedColors-gradientText">Направление градиента</div>'),this.$gradient_btn.append('<a class="edit_btn" data-value="top" title="Вниз"></a>'),this.$gradient_btn.append('<a class="edit_btn" data-value="top_left" title="В правый нижний угол"></a>'),this.$gradient_btn.append('<a class="edit_btn" data-value="top_right" title="В правый верхний угол"></a>'),this.$gradient_btn.append('<a class="edit_btn" data-value="left" title="Вправо"></a>'),this.$gradient_btn.append('<a class="edit_btn" data-value="radial" title="Радиальный"></a>'),this.gradient_type=this.opts.gradient_value.type,this.gradient_values=this.opts.gradient_value.values,"object"!=typeof this.gradient_values&&(this.gradient_values={0:this.data.value,100:this.data.value}),e.each(this.gradient_values,e.proxy(function(e,t){this.addGadientPoint(e,t)},this)),n.on("click touchstart",e.proxy(function(e){return e.preventDefault(),this.$gradient_current_point.siblings().length<2?void alert("Нельзя удалить основные точки"):void this.removeGadientPoint(this.$gradient_current_point)},this)),this.$gradient_btn.on("click touchstart","a.edit_btn",e.proxy(function(t){t.preventDefault(),this.setGradientType(e(t.target).attr("data-value"))},this));var i=this.$gradient_pick_list.find("div.color_gradient_pick:eq(0)");return this.setGradientPointActive(i),this.$gradient_btn.append(n),"string"!=typeof this.gradient_type&&(this.gradient_type="top"),this.setGradientType(this.gradient_type),t.append(this.$gradient_btn).append(this.$gradient_line).append(this.$gradient_pick_list),this.$selector.append(t),this.updateGradient(),!0},hide:function(){this.$selector.fadeOut(100,e.proxy(function(){this.$selector.remove()},this)),e(document).off(this.event_scope)},move_color:function(e){this.$color_picker.hide();var t={x:e.pageX,y:e.pageY};e.originalEvent.changedTouches&&(t.x=e.originalEvent.changedTouches[0].pageX,t.y=e.originalEvent.changedTouches[0].pageY),t.x=t.x-this.$selector.find(".spacedColors-colors").offset().left-6,t.y=t.y-this.$selector.find(".spacedColors-colors").offset().top-6,t.x<=-5&&(t.x=-5),t.x>=144&&(t.x=144),t.y<=-5&&(t.y=-5),t.y>=144&&(t.y=144),this.colorPosition=t,this.$color_picker.css("left",t.x).css("top",t.y).show();var n=Math.round(.67*(t.x+5));0>n&&(n=0),n>100&&(n=100);var i=100-Math.round(.67*(t.y+5));0>i&&(i=0),i>100&&(i=100);var a=this.data.hsb;a.s=n,a.b=i,this.set_color(a)},move_hue:function(e){this.$hue_picker.hide();var t=e.pageY;e.originalEvent.changedTouches&&(t=e.originalEvent.changedTouches[0].pageY),t=t-this.$selector.find(".spacedColors-colors").offset().top-1,-1>=t&&(t=-1),t>=149&&(t=149),this.huePosition=t,this.$hue_picker.css("top",t).show();var n=Math.round(2.4*(150-t-1));0>n&&(n=0),n>360&&(n=360);var i=this.data.hsb;i.h=n,this.set_color(i)},move_opacity:function(e){this.$opacity_picker.hide();var t=e.pageX;e.originalEvent.changedTouches&&(t=e.originalEvent.changedTouches[0].pageX),t=t-this.$selector.find(".spacedColors-colors").offset().left-1;var n=175;-1>=t&&(t=-1),t>=n-1&&(t=n-1),this.opacityPosition=t,this.$opacity_picker.css("left",t).show(),this.data.opacity=parseFloat((n-t-1)/n).toFixed(2),this.data.opacity<0&&(this.data.opacity=0),this.data.opacity>1&&(this.data.opacity=1),this.set_color(this.data.hsb)},move_gradient:function(e){if(this.$moving_gradient_pick&&this.$moving_gradient_pick.is(".color_gradient_pick")){if(e.offsetY>70&&this.$moving_gradient_pick.parent().children().length>2)return void this.removeGadientPoint(this.$moving_gradient_pick);var t=e.pageX;e.originalEvent.changedTouches&&(t=e.originalEvent.changedTouches[0].pageX),t=t-this.$selector.find(".spacedColors-colors").offset().left-1;var n=175;-1>=t&&(t=-1),t>=n-1&&(t=n-1),this.$moving_gradient_pick.css("left",t),this.last_change=Math.random(),this.change()}},addGadientPointEvent:function(e){var t=e.pageX;e.originalEvent.changedTouches&&(t=e.originalEvent.changedTouches[0].pageX),t=t-this.$selector.find(".spacedColors-colors").offset().left-1;var n=175;-1>=t&&(t=-1),t>=n-1&&(t=n-1);var i=parseInt(t/this.gradient_scale),a="#FFFFFF",r=this.addGadientPoint(i,a);this.setGradientPointActive(r)},addGadientPoint:function(t,n){var i=parseInt(t*this.gradient_scale),a=e('<div class="color_gradient_pick" style="left:'+i+'px"><div class="color_gradient_pick_value" style="background-color: '+n+';"></div></div>');return this.$gradient_pick_list.append(a),a.data("value",n),a},setGradientPointActive:function(e){e.siblings().removeClass("is_active"),e.addClass("is_active"),this.$gradient_current_point=e,this.last_change=Math.random();var t=this.hex2hsb(this.$gradient_current_point.data("value"));this.set_color(t),this.colorPosition=this.getColorPositionFromHSB(this.data.hsb),this.huePosition=this.getHuePositionFromHSB(this.data.hsb),this.opacityPosition=this.getOpacityPositionFromAlpha(this.data.opacity),this.$color_picker.css("top",this.colorPosition.y+"px").css("left",this.colorPosition.x+"px"),this.$hue_picker.css("top",this.huePosition+"px"),this.$opacity_picker&&this.$opacity_picker.css("left",this.opacityPosition+"px")},setGradientType:function(e){this.gradient_type=e,this.$gradient_btn.find(".edit_btn").removeClass("is_active"),this.$gradient_btn.find('.edit_btn[data-value="'+e+'"]').addClass("is_active"),this.last_change=Math.random(),this.change()},removeGadientPoint:function(e){e.remove();var t=this.$gradient_pick_list.find("div.color_gradient_pick").eq(0);this.setGradientPointActive(t)},set_color:function(e){this.data.hsb=e;var t=this.hsb2rgb(e),n=this.hsb2hex(e);this.data.value=this.opts.opacity&&1!=this.data.opacity?"rgba("+t.r+","+t.g+","+t.b+","+parseFloat(this.data.opacity)+")":"#"+n,this.$selector&&this.$selector.find(".spacedColors-colors").css("backgroundColor","#"+this.hsb2hex({h:e.h,s:100,b:100})).end().find(".spacedColors-opacity").css("backgroundColor","#"+n).end(),this.change()},change:function(){"gradient"==this.opts.type&&"undefined"!=typeof this.$gradient_current_point&&(this.$gradient_current_point.find("div").css("background-color",this.data.value),this.$gradient_current_point.data("value",this.data.value),this.updateGradient()),this.inputTextlock?this.inputTextlock=!1:this.$input_text&&this.$input_text.val(this.data.value),this.last_change=this.data.value,this.$item&&this.$item.val(this.data.value),"function"==typeof this.opts.change&&this.opts.change(this.data,this.data.gradient_code)},updateGradient:function(){var t={};e.each(this.$gradient_pick_list.find("div.color_gradient_pick"),e.proxy(function(n,i){var a=e(i),r=parseInt(parseInt(a.css("left"))/this.gradient_scale);t[r]=a.data("value")},this)),this.gradient_data=t,this.data.gradient_code=this.getGradientCode();var n=this.getGradientCode(!0),i="";e.each(n.preview,function(e,t){i+="background: "+t+"; "}),this.$gradient_line.attr("style",i)},getGradient:function(){return this.gradient_data},getGradientCode:function(t){"undefined"==typeof t&&(t=!1);var n=this.gradient_type;t&&(n="left");var i="radial"==n?"radial":"linear",a="",r="";e.each(this.getGradient(),e.proxy(function(e,t){"top"==n?e=10*e+"px":e+="%",a=t;var i=","+t+" "+e;r+=i},this));var o="-webkit-"+i+"-gradient("+this.getGradientCodeType("webkit",n)+r+") no-repeat",s="-moz-"+i+"-gradient("+this.getGradientCodeType("moz",n)+r+") no-repeat",l="-o-"+i+"-gradient("+this.getGradientCodeType("o",n)+r+") no-repeat",c="-ms-"+i+"-gradient("+this.getGradientCodeType("ms",n)+r+") no-repeat",u=i+"-gradient("+this.getGradientCodeType("main",n)+r+") no-repeat",h=[a,o,s,l,c,u];return t?{type:n,value:a,values:r,preview:h}:{type:n,value:a,values:r}},getGradientCodeType:function(e,t){if("webkit_old"==e)switch(t){case"left":return"linear, left top, right top";case"top":return"linear, left top, left bottom";
case"top_left":return"linear, left top, right bottom";case"top_right":return"linear, left bottom, right top";case"radial":return"radial, center center, 0px, center center, 100%"}else if("main"==e)switch(t){case"left":return"to right";case"top":return"to bottom";case"top_left":return"135deg";case"top_right":return"225deg";case"radial":return"circle at top"}else switch(t){case"left":return"left";case"top":return"top";case"top_left":return"-45deg";case"top_right":return"225deg";case"radial":return"center top, circle cover"}},getColorPositionFromHSB:function(e){var t=Math.ceil(e.s/.67);0>t&&(t=0),t>150&&(t=150);var n=150-Math.ceil(e.b/.67);return 0>n&&(n=0),n>150&&(n=150),{x:t-5,y:n-5}},getHuePositionFromHSB:function(e){var t=150-e.h/2.4;return 0>t&&(h=0),t>150&&(h=150),t},getOpacityPositionFromAlpha:function(e){var t=175*e;return 0>t&&(t=0),t>175&&(t=175),175-t},cleanHex:function(e){return"string"!=typeof e?!1:e.replace(/[^A-F0-9]/gi,"")},expandHex:function(e){return(e=this.cleanHex(e))?(3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),6===e.length?e:null):null},hsb2rgb:function(e){var t={},n=Math.round(e.h),i=Math.round(255*e.s/100),a=Math.round(255*e.b/100);if(0===i)t.r=t.g=t.b=a;else{var r=a,o=(255-i)*a/255,s=(r-o)*(n%60)/60;360===n&&(n=0),60>n?(t.r=r,t.b=o,t.g=o+s):120>n?(t.g=r,t.b=o,t.r=r-s):180>n?(t.g=r,t.r=o,t.b=o+s):240>n?(t.b=r,t.r=o,t.g=r-s):300>n?(t.b=r,t.g=o,t.r=o+s):360>n?(t.r=r,t.g=o,t.b=r-s):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},rgb2hex:function(t){var n=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return e.each(n,function(e,t){1===t.length&&(n[e]="0"+t)}),n.join("")},hex2rgb:function(e){return e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16),{r:e>>16,g:(65280&e)>>8,b:255&e}},rgb2hsb:function(e){var t={h:0,s:0,b:0},n=Math.min(e.r,e.g,e.b),i=Math.max(e.r,e.g,e.b),a=i-n;return t.b=i,t.s=0!==i?255*a/i:0,t.h=0!==t.s?e.r===i?(e.g-e.b)/a:e.g===i?2+(e.b-e.r)/a:4+(e.r-e.g)/a:-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t},hex2hsb:function(e){var t=this.rgb2hsb(this.hex2rgb(e));return 0===t.s&&(t.h=360),t},hsb2hex:function(e){return this.rgb2hex(this.hsb2rgb(e))},is_hex:function(t){return"undefined"==typeof t?!1:(t=e.trim(t),t=t.toLowerCase(),t.length<3||t.length>7?!1:(t.indexOf("#")>-1&&(t=t.substring(t.indexOf("#")+1)),/^([0-9a-f]{1,2}){3}$/i.test(t)))},is_rgb:function(t){return"undefined"==typeof t?!1:(t=e.trim(t),t=t.toLowerCase(),/\(([0-9]*)\,\s{0,1}([0-9]*)\,\s{0,1}([0-9]*)\,{0,1}\s{0,1}(.*){0,1}\)$/.test(t))},color2hex:function(t){if(t=t.toLowerCase(),t=e.trim(t),t.indexOf("#")>-1)return t.length>7?!1:t.substring(t.indexOf("#")+1);if(t.indexOf("rgb")>-1){var n=/\(([0-9]*)\,\s{0,1}([0-9]*)\,\s{0,1}([0-9]*)\,{0,1}\s{0,1}(.*){0,1}\)$/,i=n.exec(t);if(null!==i&&i.hasOwnProperty("1")&&i.hasOwnProperty("2")&&i.hasOwnProperty("3")){var a={};return a.r=parseInt(i[1]),a.g=parseInt(i[2]),a.b=parseInt(i[3]),a.r>255&&(a.r=255),a.g>255&&(a.g=255),a.b>255&&(a.b=255),a.r<0&&(a.r=0),a.g<0&&(a.g=0),a.b<0&&(a.b=0),this.rgb2hex(a)}return!1}return this.colorname_table.hasOwnProperty(t)?this.color2hex(this.colorname_table[t]):3==t.length||6==t.length?t:!1},color2opacity:function(t){if(t=t.toLowerCase(),t=e.trim(t),t.indexOf("#")>-1)return 1;if(t.indexOf("rgb")>-1){var n=/\(([0-9]*)\,\s{0,1}([0-9]*)\,\s{0,1}([0-9]*)\,{0,1}\s{0,1}(.*){0,1}\)$/,i=n.exec(t);if(null!==i&&i.hasOwnProperty("4")&&!isNaN(i[4])){var a=parseFloat(i[4]);return a>1?a=1:0>a&&(a=0),a}return 1}return 1}},e.fn.spacedColors=function(n){if(!(this.length<1))return this.each(function(){var i=e(this),a=i.data("spacedColors");a||(a=new t(i,n),i.data("spacedColors",a))});var i=e("<div></div>"),a=i.data("spacedColors");a||(a=new t(i,n),i.data("spacedColors",a))},e.fn.spacedColorsDestroy=function(){this.data("spacedColors")&&(this.data("spacedColors").destroy(),this.removeData("spacedColors"))},e.fn.spacedColorsSetColor=function(e){if(this.data("spacedColors")){var t=this.data("spacedColors"),n=t.hex2hsb(e);t.set_color(n)}},e.fn.spacedColorsGetColor=function(){return this.data("spacedColors")?this.data("spacedColors").data:void 0}}(jQuery),function(e){"undefined"==typeof $document&&($document=e(document));var t=function(t,n){this.$editor=e(t),this.opts=e.extend({callback:!1,on_change:function(){},focus:!0,hotkeys:!0,convertLinks:!0,convertDivs:!1,toolbarExternal:!1,oneline:!1,htmlExternal:!1,allowedTags:["code","span","div","a","br","p","b","i","del","strike","u","img","blockquote","mark","cite","small","ul","ol","li","hr","dl","dt","dd","sup","sub","big","code","figure","figcaption","strong","em","table","tr","td","th","tbody","thead","tfoot","h1","h2","h3","h4","h5","h6"],allowedTagsPaste:["img","span","div","label","a","br","p","b","i","del","strike","u","small","ul","ol","li","hr","sup","sub","big","code","strong","em","h1","h2","h3","h4","h5","h6"],buttons:["bold","italic","underline","deleted","size","fontcolor","link","removeformat"],buttons_extra:["backcolor","alignleft","aligncenter","alignright","alignall","unorderedlist","orderedlist","outdent","indent","html"],activeButtons:["deleted","italic","bold","underline","unorderedlist","orderedlist","alignleft","aligncenter","alignright","alignall"],activeButtonsStates:{b:"bold",strong:"bold",i:"italic",em:"italic",del:"deleted",strike:"deleted",ul:"unorderedlist",ol:"orderedlist",u:"underline"},emptyHtml:"<p><br></p>",buffer:!1,visual:!0,toolbar:{html:{title:"Редактор HTML",func:"toggle"},bold:{title:"Жирный",exec:"bold"},italic:{title:"Курсив",exec:"italic"},deleted:{title:"Зачеркнутый",exec:"strikethrough"},underline:{title:"Подчеркнутый",exec:"underline"},size:{title:"Размер",func:"show_size"},link:{title:"Вставить ссылку",func:"show_link"},fontcolor:{title:"Цвет текста",func:"show_color_font"},backcolor:{title:"Цвет фона",func:"show_color_back"},removeformat:{title:"Очистить форматирование",exec:"removeFormat"},unorderedlist:{title:"&bull; Ненумерованный список",exec:"insertunorderedlist"},orderedlist:{title:"1. Нумерованный список",exec:"insertorderedlist"},outdent:{title:"&lt; Сдвиг влево",exec:"outdent"},indent:{title:"&gt; Сдвиг вправо",exec:"indent"},alignleft:{title:"Выравнивание по левому краю",exec:"JustifyLeft"},aligncenter:{title:"Выравнивание по центру",exec:"JustifyCenter"},alignright:{title:"Выравнивание по правому краю",exec:"JustifyRight"},alignall:{title:"Выравнивание по ширине",exec:"JustifyFull"}}},n,this.$editor.data()),this.init()};t.prototype={init:function(){this.document=this.opts.document?this.opts.document:document,this.window=this.opts.window?this.opts.window:window,this.$html=e('<textarea class="spacedText_html" name="'+this.$editor.attr("id")+'"></textarea>'),this.$html.addClass("spacedText_html").hide(),e(this.opts.htmlExternal).html(this.$html),this.$editor.addClass("spacedText").attr("contenteditable",!0);var t=this.$editor.html();if(t=this.to_p(t),this.$editor.html(t),this.update(!0),this.build_toolbar(),this.opts.activeButtons!==!1&&this.opts.toolbar!==!1){var n=e.proxy(function(){this.watch()},this);this.$editor.click(n).keyup(n)}if(this.is_mobile()===!1&&this.is_old_safari()===!1&&this.$editor.bind("paste",e.proxy(function(){this.pasteRunning=!0,this.set_buff(),this.saveScroll=this.document.body.scrollTop;var t=this.extract_content();setTimeout(e.proxy(function(){var e=this.extract_content();this.$editor.append(t),this.restore_selection();var n=this.get_html_fragment(e);this.paste_clean_up(n),this.pasteRunning=!1},this),1)},this)),this.bind_keyup(),this.bind_keydown(),this.browser("mozilla")){this.$editor.click(e.proxy(function(){this.save_selection()},this));try{this.document.execCommand("enableObjectResizing",!1,!1),this.document.execCommand("enableInlineTableEditing",!1,!1)}catch(i){}}this.opts.focus&&setTimeout(e.proxy(function(){this.$editor.focus()},this),1),"function"==typeof this.opts.callback&&this.opts.callback(this),this.$toolbar.find("a").attr("tabindex","-1"),this.$editor.on("click","a",e.proxy(function(e){this.show_link_menu(e)},this))},bind_keydown:function(){this.$editor.keydown(e.proxy(function(t){var n=t.keyCode||t.which,i=t.ctrlKey||t.metaKey;return this.opts.oneline&&13===n?(t.preventDefault(),!1):(i&&this.opts.hotkeys&&(90===n?this.opts.buffer!==!1?(t.preventDefault(),this.get_buff()):t.shiftKey?this.hotkey(t,"redo"):this.hotkey(t,"undo"):77===n?this.hotkey(t,"removeFormat"):66===n?this.hotkey(t,"bold"):73===n&&this.hotkey(t,"italic")),i||90===n||(this.opts.buffer=!1),this.opts.hotkeys&&!t.shiftKey&&9===n?this.hotkey(t,"indent"):this.opts.hotkeys&&t.shiftKey&&9===n&&this.hotkey(t,"outdent"),this.browser("webkit")&&-1===navigator.userAgent.indexOf("Chrome")?t.shiftKey&&13===n?(t.preventDefault(),this.insert_node_at_caret(e("<span><br /></span>").get(0)),this.update(),!1):!0:void 0)},this))},bind_keyup:function(){this.$editor.keyup(e.proxy(function(e){var t=e.keyCode||e.which;return this.browser("mozilla")&&!this.pasteRunning&&this.save_selection(),8===t||46===t?this.format_empty(e):(13!==t||e.shiftKey||e.ctrlKey||e.metaKey||(this.browser("webkit")&&this.format_new_line(e),this.opts.convertLinks&&this.$editor.linkfinder()),void this.update())},this))},build_toolbar:function(){if(this.opts.toolbar===!1)return!1;if(this.$toolbar=e("<ul>").addClass("spacedText_toolbar"),e(this.opts.toolbarExternal).html(this.$toolbar),e.each(this.opts.buttons,e.proxy(function(t,n){if("undefined"!=typeof this.opts.toolbar[n]){var i=this.opts.toolbar[n];if(this.$toolbar.append(e("<li>").append(this.build_btn(n,i))),"size"==n){var a=e('<ul class="size"><li><a href="javascript:void(0);" data-size="-3"></a></li><li><a href="javascript:void(0);" data-size="-2"></a></li><li><a href="javascript:void(0);" data-size="-1"></a></li><li><a href="javascript:void(0);" data-size="0"></a></li><li><a href="javascript:void(0);" data-size="+1"></a></li><li><a href="javascript:void(0);" data-size="+2"></a></li><li><a href="javascript:void(0);" data-size="+3"></a></li></ul>');a.on("mousedown","a",e.proxy(function(e){this.show_size_value(e)},this)),this.$toolbar.find(".spacedText_btn_size").parent().addClass("size").append(a)}}},this)),this.opts.buttons_extra.length>0){e.each(this.opts.buttons_extra,e.proxy(function(t,n){if("undefined"!=typeof this.opts.toolbar[n]){var i=this.opts.toolbar[n];this.$toolbar.append(e('<li class="spacedText_extra_only">').append(this.build_btn(n,i)))}},this));var t=e('<li><a class="spacedText_extra_btn"></a></li>');this.$toolbar.append(t),t.find("a").on("mousedown",e.proxy(function(e){return this.$toolbar.toggleClass("is_extra"),e.preventDefault(),!1},this))}},build_btn:function(t,n){var i=e('<a href="javascript:void(0);" title="'+n.title+'" class="spacedText_btn_'+t+'"></a>');return"undefined"==typeof n.func?i.mousedown(e.proxy(function(){return this.opts.visual?(-1!=e.inArray(t,this.opts.activeButtons)&&(this.all_btn_inactive(),this.set_btn_active(t)),this.browser("mozilla")&&this.$editor.focus(),void this.execCommand(n.exec,t)):void alertify.log("Функция недоступна в режиме HTML")},this)):"show"!==n.func&&i.mousedown(e.proxy(function(e){return this.opts.visual||"toggle"===n.func?void this[n.func](e):void alertify.log("Функция недоступна в режиме HTML")},this)),"undefined"!=typeof n.callback&&n.callback!==!1&&i.mousedown(e.proxy(function(e){return this.opts.visual?void n.callback(this,e,t):void alertify.log("Функция недоступна в режиме HTML")},this)),i},get_btn:function(t){return this.opts.toolbar===!1?!1:e(this.$toolbar.find("a.spacedText_btn_"+t))},set_btn_active:function(e){this.get_btn(e).parent().addClass("spacedText_act")},set_btn_inactive:function(e){this.get_btn(e).parent().removeClass("spacedText_act")},all_btn_inactive:function(){e.each(this.opts.activeButtons,e.proxy(function(e,t){this.set_btn_inactive(t)},this))},hotkey:function(e,t){e.preventDefault(),this.execCommand(t,!1)},change:function(){var e=this.get_code();"function"==typeof this.opts.on_change&&this.opts.on_change(e,this.$editor)},update:function(e){this.$html.val(this.$editor.html()),e||this.change()},set_code:function(e){e=this.strip_tags(e),this.$editor.html(e).focus(),this.update()},get_code:function(){var e="";return e=this.opts.visual?this.$editor.html():this.$html.val(),this.strip_tags(e)},paste_html_at_caret:function(e){var t,n;if(this.document.getSelection){if(t=this.window.getSelection(),t.getRangeAt&&t.rangeCount){n=t.getRangeAt(0),n.deleteContents();var i=this.document.createElement("div");i.innerHTML=e;for(var a,r,o=this.document.createDocumentFragment();a=i.firstChild;)r=o.appendChild(a);n.insertNode(o),r&&(n=n.cloneRange(),n.setStartAfter(r),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}else this.document.selection&&"Control"!=this.document.selection.type&&this.document.selection.createRange().pasteHTML(e)},destroy:function(){var t=this.get_code();this.$editor.removeClass("spacedText").removeAttr("contenteditable").html(t).show(),e(this.opts.toolbarExternal).empty(),this.modal_link&&this.modal_link.close(),this.modal_link_edit&&this.modal_link_edit.close()},watch:function(){var t=this.get_current_node();this.wait_size_change&&this.show_size_value(),this.all_btn_inactive(),e.each(this.opts.activeButtonsStates,e.proxy(function(n,i){0!=e(t).closest(n,this.$editor.get()[0]).length&&this.set_btn_active(i)},this));var n=e(t).closest(["p","div","h1","h2","h3","h4","h5","h6","blockquote","td"]);if("undefined"!=typeof n[0]&&"undefined"!=typeof n[0].elem&&0!=e(n[0].elem).size()){var i=e(n[0].elem).css("text-align");switch(i){case"right":this.set_btn_active("alignright");break;case"center":this.set_btn_active("aligncenter");break;case"justify":this.set_btn_active("alignall");break;default:this.set_btn_active("alignleft")}}},set_buff:function(){this.save_selection(),this.opts.buffer=this.$editor.html()},get_buff:function(){return this.opts.buffer===!1?!1:(this.$editor.html(this.opts.buffer),this.browser("msie")||this.restore_selection(),void(this.opts.buffer=!1))},execCommand:function(t,n){if(0==this.opts.visual)return this.$html.focus(),!1;try{var i;if("inserthtml"===t)this.browser("msie")?(this.$editor.focus(),this.document.selection.createRange().pasteHTML(n)):this.paste_html_at_caret(n);else if("unlink"===t)i=this.get_parent_node(),"A"===e(i).get(0).tagName?e(i).replaceWith(e(i).text()):this.exec(t,n);else if("JustifyLeft"===t||"JustifyCenter"===t||"JustifyRight"===t||"JustifyFull"===t){i=this.get_current_node();var a=this.get_selection(),r=[];if(0==e(i).parents(".spacedText").size()){var o=e(a.anchorNode),s=e(a.focusNode);if("P"!=o.get(0).tagName&&(o=o.closest("p")),s="P"!=s.get(0).tagName?s.closest("p"):s.prev(),o.length<1&&s.length<1){var l=e(a.anchorNode).parent();if(l.is(".spacedText")&&l.find("p").length<1){var c=e("<p></p>").html(l.html());l.html(c),o=s=c}}var u=o.parent();if(1!=o.length||1!=s.length||!u.is(".spacedText"))return!1;if(o.get(0).offsetTop>s.get(0).offsetTop){var h=o;o=s,s=h}if(o.get(0)==s.get(0))r.push(o);else{var d=!1;if(u.children("p").each(function(t,n){var i=e(n);n==o.get(0)?(d=!0,r.push(i)):n==s.get(0)?(d=!1,r.push(i)):d&&r.push(i)}),r.length<1)return log("ERR: не смогли определить нужные элементы P для выравнивания"),!1}}else{if(-1!=e.inArray(e(i).get(0).tagName,["P","DIV","H1","H2","H3","H4","H5","H6","BLOCKQUOTE","TD"]))return this.exec(t,n),void this.update();r.push(e(i))}e.each(r,e.proxy(function(e,n){var i="left";"JustifyCenter"===t?i="center":"JustifyRight"===t?i="right":"JustifyFull"===t&&(i="justify"),i===!1?n.attr("align",""):n.attr("align",i)},this))}else if("formatblock"===t&&"blockquote"===n)if(i=this.get_current_node(),"BLOCKQUOTE"===e(i).get(0).tagName)if(this.browser("msie")){var p=e("<p>"+e(i).html()+"</p>");e(i).replaceWith(p)}else this.exec(t,"p");else if("P"===e(i).get(0).tagName){var f=e(i).parent();if("BLOCKQUOTE"===e(f).get(0).tagName){var p=e("<p>"+e(i).html()+"</p>");e(f).replaceWith(p),this.set_selection(p[0],0,p[0],0)}else if(this.browser("msie")){var p=e("<blockquote>"+e(i).html()+"</blockquote>");e(i).replaceWith(p)}else this.exec(t,n)}else this.exec(t,n);else"formatblock"!==t||"pre"!==n&&"p"!==n?("formatblock"===t&&this.browser("mozilla")&&this.$editor.focus(),this.exec(t,n)):this.exec(t,n);this.update(),this.old_ie()&&this.$editor.focus()}catch(m){}},exec:function(e,t){"formatblock"===e&&this.browser("msie")&&(t="<"+t+">"),this.document.execCommand(e,!1,t)},format_new_line:function(){var t=this.get_parent_node();if("DIV"===t.nodeName&&"spacedText"===t.className){var n=e(this.get_current_node());if("DIV"===n.get(0).tagName&&(""===n.html()||"<br>"===n.html())){var i=e("<p>").append(n.clone().get(0).childNodes);n.replaceWith(i),i.html("<br>"),this.set_selection(i[0],0,i[0],0)}}},format_empty:function(t){var n=e.trim(this.$editor.html());n=n.replace(/<br\s?\/?>/i,"");var i=n.replace(/<p>\s?<\/p>/gi,"");if(""===n||""===i){t.preventDefault();var a=e(this.opts.emptyHtml).get(0);return this.$editor.html(a),this.set_selection(a,0,a,0),this.update(),!1}this.update()},to_p:function(t){if(t=e.trim(t),""===t||"<p></p>"===t)return this.opts.emptyHtml;this.opts.convertDivs&&(t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p>$2</p>"));var n=function(e,t,n){return e.replace(new RegExp(t,"g"),n)},i=function(e,i){return n(t,e,i)},a="(table|thead|tfoot|caption|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|select|form|blockquote|address|math|style|script|object|input|param|p|h[1-6])";return t+="\n",i("<br />\\s*<br />","\n\n"),i("(<"+a+"[^>]*>)","\n$1"),i("(</"+a+">)","$1\n\n"),i("\r\n|\r","\n"),i("\n\n+","\n\n"),i("\n?((.|\n)+?)$","<p>$1</p>\n"),i("<p>\\s*?</p>",""),i("<p>(<div[^>]*>\\s*)","$1<p>"),i("<p>([^<]+)\\s*?(</(div|address|form)[^>]*>)","<p>$1</p>$2"),i("<p>\\s*(</?"+a+"[^>]*>)\\s*</p>","$1"),i("<p>(<li.+?)</p>","$1"),i("<p>\\s*(</?"+a+"[^>]*>)","$1"),i("(</?"+a+"[^>]*>)\\s*</p>","$1"),i("(</?"+a+"[^>]*>)\\s*<br />","$1"),i("<br />(\\s*</?(p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)","$1"),-1!=t.indexOf("<pre")&&i("(<pre(.|\n)*?>)((.|\n)*?)</pre>",function(e,t,i,a){return n(t,"\\\\(['\"\\\\])","$1")+n(n(n(a,"<p>","\n"),"</p>|<br />",""),"\\\\(['\"\\\\])","$1")+"</pre>"}),i("\n</p>$","</p>")},strip_tags:function(t){var n=this.opts.allowedTags,i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return t.replace(i,function(t,i){return e.inArray(i.toLowerCase(),n)>"-1"?t:""})},paste_strip_tags:function(t){var n=this.opts.allowedTagsPaste,i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;return t.replace(i,function(t,i){return e.inArray(i.toLowerCase(),n)>"-1"?t:""})},paste_clean_up:function(t){t=t.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,""),t=t.replace(/(&nbsp;){2,}/gi,"&nbsp;"),t=t.replace(/<b\sid="internal-source-marker(.*?)">([\w\W]*?)<\/b>/gi,"$2"),t=this.paste_strip_tags(t),t=t.replace(/<td><\/td>/gi,"[td]"),t=t.replace(/<td>&nbsp;<\/td>/gi,"[td]"),t=t.replace(/<td><br><\/td>/gi,"[td]"),t=t.replace(/<a(.*?)href="(.*?)"(.*?)>([\w\W]*?)<\/a>/gi,'[a href="$2"]$4[/a]'),t=t.replace(/<img(.*?) src="(.*?)"(.*?)>/gi,'[img src="$2"]'),t=t.replace(/<(\w+)([\w\W]*?)>/gi,"<$1>"),t=t.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),t=t.replace(/<[^\/>][^>]*>(\s*|\t*|\n*|&nbsp;|<br>)<\/[^>]+>/gi,""),t=t.replace(/\[td\]/gi,"<td>&nbsp;</td>"),t=t.replace(/\[a href="(.*?)"\]([\w\W]*?)\[\/a\]/gi,'<a href="$1">$2</a>'),t=t.replace(/\[img(.*?)\]/gi,"<img$1>"),this.opts.convertDivs&&(t=t.replace(/<div(.*?)>([\w\W]*?)<\/div>/gi,"<p>$2</p>")),t=t.replace(/<span>([\w\W]*?)<\/span>/gi,"$1"),t=t.replace(/\n{3,}/gi,"\n"),t=t.replace(/<p><p>/gi,"<p>"),t=t.replace(/<\/p><\/p>/gi,"</p>"),this.browser("mozilla")&&(t=t.replace(/<br>$/gi,"")),this.execCommand("inserthtml",t),e(this.document.body).scrollTop(this.saveScroll)},format_remove:function(t){var n=[],i=t.match(/<pre(.*?)>([\w\W]*?)<\/pre>/gi);return null!==i&&e.each(i,function(e,i){t=t.replace(i,"prebuffer_"+e),n.push(i)}),t=t.replace(/\s{2,}/g," "),t=t.replace(/\n/g," "),t=t.replace(/[\t]*/g,""),t=t.replace(/\n\s*\n/g,"\n"),t=t.replace(/^[\s\n]*/g,""),t=t.replace(/[\s\n]*$/g,""),t=t.replace(/>\s+</g,"><"),n&&(e.each(n,function(e,n){t=t.replace("prebuffer_"+e,n)}),n=[]),t},toggle:function(){var e;if(this.opts.visual){var t=this.$editor.innerHeight();this.$editor.hide(),e=this.$editor.html(),this.$html.height(t).val(e).show().focus(),this.set_btn_active("html"),this.opts.visual=!1}else this.$html.hide(),e=this.$html.val(),this.$editor.html(e).show(),""===this.$editor.html()&&this.set_code(this.opts.emptyHtml),this.$editor.focus(),this.set_btn_inactive("html"),this.opts.visual=!0,this.update()},get_html_fragment:function(e){var t=e.cloneNode(!0),n=this.document.createElement("div");return n.appendChild(t),n.innerHTML},extract_content:function(){for(var e,t=this.$editor.get(0),n=this.document.createDocumentFragment();e=t.firstChild;)n.appendChild(e);return n},save_selection:function(){this.$editor.focus(),this.savedSel=this.get_origin(),this.savedSelObj=this.get_focus()},restore_selection:function(){"undefined"!=typeof this.savedSel&&null!==this.savedSel&&null!==this.savedSelObj&&"BODY"!==this.savedSel[0].tagName?0==e(this.savedSel[0]).closest(".spacedText").size()?this.$editor.focus():(this.browser("opera")&&this.$editor.focus(),this.set_selection(this.savedSel[0],this.savedSel[1],this.savedSelObj[0],this.savedSelObj[1]),this.browser("mozilla")&&this.$editor.focus()):this.$editor.focus()},get_selection:function(){var e=this.document;return this.window.getSelection?this.window.getSelection():e.getSelection?e.getSelection():e.selection.createRange()},has_selection:function(){if(this.old_ie()){var e,t=this.$editor.get(0);return t.focus(),t.document.selection?(e=t.document.selection.createRange(),e&&e.parentElement().document===t.document):!1}var n;return(n=this.get_selection())&&null!=n.focusNode&&null!=n.anchorNode},get_origin:function(){if(this.old_ie()){var e,t=this.$editor.get(0);return t.focus(),this.has_selection()?(e=t.document.selection.createRange(),this._get_boundary(t.document,e,!0)):null}var n;return(n=this.get_selection())&&null!=n.anchorNode?[n.anchorNode,n.anchorOffset]:null},get_focus:function(){if(this.old_ie()){var e,t=this.$editor.get(0);return t.focus(),this.has_selection()?(e=t.document.selection.createRange(),this._get_boundary(t.document,e,!1)):null}var n;return(n=this.get_selection())&&null!=n.focusNode?[n.focusNode,n.focusOffset]:null},set_selection:function(e,t,n,i){if(null==n&&(n=e),null==i&&(i=t),this.old_ie()){var a=this.$editor.get(0),o=a.document.body.createTextRange();return this._move_boundary(a.document,o,!1,n,i),this._move_boundary(a.document,o,!0,e,t),o.select()}var s=this.get_selection();if(s)if(s.collapse&&s.extend)s.collapse(e,t),s.extend(n,i);else{r=this.document.createRange(),r.setStart(e,t),r.setEnd(n,i);try{s.removeAllRanges()}catch(l){}s.addRange(r)}},get_current_node:function(){return"undefined"!=typeof this.window.getSelection?this.get_selected_node().parentNode:"undefined"!=typeof this.document.selection?this.get_selection().parentElement():void 0},get_parent_node:function(){return e(this.get_current_node()).parent()[0]},get_selected_node:function(){if(this.old_ie())return this.get_selection().parentElement();if("undefined"!=typeof this.window.getSelection){var e=this.window.getSelection();return e.rangeCount>0?this.get_selection().getRangeAt(0).commonAncestorContainer:!1}return"undefined"!=typeof this.document.selection?this.get_selection():void 0},_get_boundary:function(e,t,n){var i,a,r,o,s;for(a=e.createElement("a"),i=t.duplicate(),i.collapse(n),s=i.parentElement();;)if(s.insertBefore(a,a.previousSibling),i.moveToElementText(a),!(i.compareEndPoints(n?"StartToStart":"StartToEnd",t)>0&&null!=a.previousSibling))break;return-1===i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&a.nextSibling?(i.setEndPoint(n?"EndToStart":"EndToEnd",t),r=a.nextSibling,o=i.text.length):(r=a.parentNode,o=this._get_child_index(a)),a.parentNode.removeChild(a),[r,o]},_move_boundary:function(e,t,n,i,a){var r,o,s,l,c;return c=0,r=this._is_text(i)?i:i.childNodes[a],o=this._is_text(i)?i.parentNode:i,this._is_text(i)&&(c=a),l=e.createElement("a"),o.insertBefore(l,r||null),s=e.body.createTextRange(),s.moveToElementText(l),l.parentNode.removeChild(l),t.setEndPoint(n?"StartToStart":"EndToEnd",s),t[n?"moveStart":"moveEnd"]("character",c)},_is_text:function(e){return null!=e?3==e.nodeType:!1},_get_child_index:function(e){for(var t=0;e=e.previousSibling;)t++;return t},insert_node_at_caret:function(e){if(this.window.getSelection){var t=this.get_selection();if(t.rangeCount){var n=t.getRangeAt(0);n.collapse(!1),n.insertNode(e),n=n.cloneRange(),n.selectNodeContents(e),n.collapse(!1),t.removeAllRanges(),t.addRange(n)}}else if(this.document.selection){var i=1===e.nodeType?e.outerHTML:e.data,a="marker_"+(""+Math.random()).slice(2);i+='<span id="'+a+'"></span>';var r=this.get_selection();r.collapse(!1),r.pasteHTML(i);var o=this.document.getElementById(a);r.moveToElementText(o),r.select(),o.parentNode.removeChild(o)}},show_size:function(){return!1},show_size_value:function(t){if(this.execCommand("FontSize",2),this.$editor.find('font[size="2"]').length>0){if(this.wait_size_change){var n=this.wait_size_change_btn;this.wait_size_change=!1}else var n=e(t.currentTarget);var i=parseInt(n.attr("data-size"))+parseInt(this.$editor.css("font-size"))+"px";this.$editor.find('font[size="2"]').replaceWith(function(){var t=e(this);return t.find('[style*="font-size"]').each(function(){var t=e(this),n=t.attr("style");n=n.replace(/font-size:\s{0,3}([0-9]*){1,3}(px|pt|%|em);{0,1}/gi,""),t.attr("style",n)}),e('<span style="font-size: '+i+';">'+t.html()+"</span>")}),this.update()}else this.wait_size_change=!0,this.wait_size_change_btn=e(t.currentTarget)},show_color_font:function(t){var n,i=e(t.currentTarget),a=e(this.get_current_node()).eq(0).css("color");e.fn.spacedColors({value:a,element:i,element_offset:{top:50,left:257},opacity:!1,show:!0,change:e.proxy(function(e){n?(n.css("color",e.value),this.update()):n=this.set_color("font",e.value)},this),on_done:e.proxy(function(){},this),on_cancel:e.proxy(function(){n?(n.css("color",a),this.update()):n=this.set_color("font",a)},this)})},show_color_back:function(t){var n,i=e(t.currentTarget),a=e(this.get_current_node()).eq(0).css("background-color");e.fn.spacedColors({value:a,element:i,element_offset:{top:50,left:257},opacity:!1,show:!0,change:e.proxy(function(e){n?(n.css("background-color",e.value),this.update()):n=this.set_color("back",e.value)},this),on_done:e.proxy(function(){},this),on_cancel:e.proxy(function(){n?(n.css("background-color",a),this.update()):n=this.set_color("back",a)},this)})},set_color:function(t,n){var i;i="back"===t?this.browser("msie")?"BackColor":"hilitecolor":"forecolor",this.execCommand(i,n);var a=!1;return"forecolor"===i?(this.$editor.find("font").replaceWith(function(){var t=e('<span style="color: '+e(this).attr("color")+';">'+e(this).html()+"</span>");return a=a?a.add(t):t,t}),this.update(),a):this.browser("msie")&&"BackColor"===i?(this.$editor.find("font").replaceWith(function(){var t=e('<span style="color: '+e(this).attr("style")+';">'+e(this).html()+"</span>");return a=a?a.add(t):t,t}),this.update(),a):void 0},show_link_menu:function(t){var n=e(t.currentTarget),i="blank"==n.attr("target")?'target="_blank"':"",a=e("<div></div>"),r=e('<a style="margin-left: 15px">Редактировать</a>'),o=e("<a>удалить</a>");a.append('<a href="'+n.attr("href")+'" '+i+' title="Перейти по ссылке" class="is_link">'+n.attr("href")+"</a>").append(r).append("&nbsp;или&nbsp;").append(o);var s=spaced.modal.create({name:"spacedText_link",light:!0,width:"auto",data:a});this.modal_link=s,r.on("click",e.proxy(function(){s.close(),this.show_link(void 0,!0)},this)),o.on("click",e.proxy(function(){var t=this.get_selection();t.anchorNode&&"A"===e(t.anchorNode.parentNode).get(0).tagName?e(t.anchorNode.parentNode).replaceWith(e(t.anchorNode.parentNode).text()):this.exec("unlink",!1),s.close(),this.change()},this)),t.stopImmediatePropagation()},show_link:function(t,n){this.save_selection(),this.insert_link_node=!1;var i=this.get_selection(),a="",r="",o="";if(this.browser("msie")){var s=this.get_parent_node();"A"===s.nodeName?(this.insert_link_node=e(s),r=this.insert_link_node.text(),a=this.insert_link_node.attr("href"),o=this.insert_link_node.attr("target")):r=this.old_ie()?i.text:i.toString()}else i&&i.anchorNode&&"A"===i.anchorNode.parentNode.tagName?(a=i.anchorNode.parentNode.href,r=i.anchorNode.parentNode.text,o=i.anchorNode.parentNode.target,""===i.toString()&&(this.insert_link_node=i.anchorNode.parentNode)):r=i.toString();n&&(a=spaced.regex.link.get_link(a));var l=spaced.modal.create({name:"spacedText_link_edit",light:!0,width:270,options:{url:{type:"text",title:"URL",focus:!0,value:a,autocomplete:{source:"/admin/edit/link_search",minLength:1}},text:{type:"text",title:"Текст",value:r},is_blank:{type:"checkbox",title:"Открывать в новой вкладке",value:"_blank"==o}},buttons:{create:{title:n?"Изменить":"Создать",style:"light",click:e.proxy(function(e){if(e.url&&e.url.length){var t=spaced.regex.link.get_link(e.url);e.text.length<1&&(e.text=t),this.insert_link({url:t,is_blank:e.is_blank,text:e.text}),l.close()}},this)},cancel:{title:"Отмена",style:"cancel",width:104,align:"right",click:e.proxy(function(){},this)}},cancel:e.proxy(function(){},this)});this.modal_link_edit=l},insert_link:function(t){var n="",i="";t.is_blank&&(n=' target="_blank"',i="_blank");var a='<a href="'+t.url+'"'+n+">"+t.text+"</a>";this.$editor.focus(),this.restore_selection(),""!==t.text&&(this.insert_link_node?(e(this.insert_link_node).text(t.text),e(this.insert_link_node).attr("href",t.url),""!==i?e(this.insert_link_node).attr("target",i):e(this.insert_link_node).removeAttr("target"),this.update()):this.execCommand("inserthtml",a))},browser:function(e){var t=navigator.userAgent.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||/(trident) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return"version"==e?n[2]:"webkit"==e?"chrome"==n[1]||"webkit"==n[1]:n[1]==e},old_ie:function(){return this.browser("msie")&&parseInt(this.browser("version"),10)<9?!0:!1},is_mobile:function(){return/(iPhone|iPod|iPad|BlackBerry|Android)/.test(navigator.userAgent)?!0:/(iPhone|iPod|BlackBerry|Android)/.test(navigator.userAgent)?!0:!1},is_old_safari:function(){var e=!1;if(this.browser("webkit")&&-1===navigator.userAgent.indexOf("Chrome")){var t=this.browser("version").split(".");t[0]<536&&(e=!0)}return e}},e.fn.spacedText=function(n){return this.each(function(){var i=e(this),a=i.data("spacedText");a||i.data("spacedText",a=new t(this,n))})},e.fn.spacedTextDestroy=function(){this.each(function(){"undefined"!=typeof e(this).data("spacedText")&&(e(this).data("spacedText").destroy(),e(this).removeData("spacedText"))})},e.fn.spacedTextGetCode=function(){return e.trim(this.data("spacedText").get_code())},e.fn.spacedTextSetCode=function(e){this.data("spacedText").set_code(e)},e.fn.spacedTextSetFocus=function(){this.data("spacedText").$editor.focus()}}(jQuery),function(e){var t="http://",n=/(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,i=/(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g,a=function(){for(var r=this.childNodes,o=r.length;o--;){var s=r[o];if(3===s.nodeType){var l=s.nodeValue;l&&(l=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(n,'$1<a href="'+t+'$2">$2</a>$3').replace(i,'$1<a href="$2">$2</a>$5'),e(s).after(l).remove())}else 1!==s.nodeType||/^(a|button|textarea)$/i.test(s.tagName)||a.call(s)}};e.fn.linkfinder=function(){this.each(a)}}(jQuery),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/lib/spacedText/spacedText.css",!0),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/text.js",function(e){var t=window.require.factory(e),n={exports:!1},i={};return t("../../lib/spacedText/spacedText.js"),t("../../lib/spacedText/spacedText.css"),lp.text=teacss.ui.control.extend({init:function(e){var t=this;this._super($.extend({buttons:["bold","italic","removeformat"],oneline:!1},e)),this.element=this.options.element,this.element.wrapInner('<div class="editor_text"></div>');
var n=this.element.find("> .editor_text"),i=$('<div class="text_toolbar">').hide();this.element.append(i),n.spacedText({document:Component.previewFrame.frame[0].contentWindow.document,window:Component.previewFrame.frame[0].contentWindow,toolbarExternal:i,focus:!1,convertLinks:!1,buttons:this.options.buttons,buttons_extra:[],oneline:this.options.oneline,on_change:$.proxy(function(e){t.value!=e&&(t.value=e,t.trigger("change"))},this)}),i.find("ul li").length<1&&i.css("visibility","hidden"),n.on("focus",$.proxy(function(){i.show()},this)).on("blur",$.proxy(function(e){$(e.relatedTarget).closest("ul.spacedText_toolbar").length<1&&i.hide()},this))}}),n.exports||i}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/color.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.color=teacss.ui.select.extendOptions({inline:!0,panelClass:"only-icons",iconSize:30,itemTpl:function(e){return $("<div class='font-set-item combo-item'>").append($("<div>").css({background:e.color||e.value,width:this.options.iconSize,height:this.options.iconSize,border:"1px solid #ccc"}))}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/cover.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.cover=teacss.ui.control.extend({showForm:function(){this.current&&($(".ui-dialog-content:visible").dialog("close"),Component.previewFrame.window.alertify.genericDialog(this.current.form[0]))},showFormSuccess:function(){this.current&&($(".ui-dialog-content:visible").dialog("close"),Component.previewFrame.window.alertify.genericDialog(this.current.formSuccess[0]))}},{init:function(e){var t=this;this._super(e),this.element=this.options.element,t.cover=$("<div class='cmp-cover fa fa-gear'>").click(function(){t.config({my:"left top",at:"right+5px top",of:t.cover,collision:"flipfit"})}).appendTo(this.element),t.form=this.element.find(".form"),t.formSuccess=this.element.find(".form_done"),t.options.init&&t.options.init.call(t)},config:lp.block.prototype.config}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/logo.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.logo=lp.cover.extendOptions({change:function(){var e=this,t=e.element.find(".logo");t.empty(t),t.append("image"==e.value.type?$("<img>").attr({src:base_url+"/"+e.value.url,width:e.value.size+"%"}):$('<div class="company_name">').text(e.value.text).css({fontStyle:e.value.italic?"italic":"",fontWeight:e.value.bold?"bold":"",fontFamily:e.value.font||"",color:e.value.color||"",fontSize:e.value.fontSize?e.value.fontSize+"px":""}))},configForm:{title:_t("Logotype"),items:[{name:"type",type:"radio",margin:"15px 0 20px",items:[{label:_t("Image logo"),value:"image"},{label:_t("Text name logo"),value:"text"}]},{name:"url",type:"uploadButton",label:_t("Upload file"),showWhen:{type:"image"}},{type:"label",value:_t("Company name:"),margin:"10px 0 5px",showWhen:{type:"text"}},{name:"text",type:"text",showWhen:{type:"text"}},{type:"label",value:_t("Font settings:"),margin:"10px 0 5px",showWhen:{type:"text"}},{name:"font",type:"fontCombo",width:"50%",showWhen:{type:"text"}},{name:"bold",label:"<b>B</b>",type:"check",width:27,height:27,margin:"0 0 10px 5px",showCheckbox:!1,showWhen:{type:"text"}},{name:"italic",label:"<i>I</i>",type:"check",width:27,height:27,margin:"0 0 10px 5px",showCheckbox:!1,showWhen:{type:"text"}},{name:"color",type:"colorPicker",width:27,height:27,margin:"0 0 10px 5px",showWhen:{type:"text"}},_t("Size:"),{margin:"5px 0",name:"size",type:"slider",min:0,max:100,showWhen:{type:"image"}},{margin:"5px 0",name:"fontSize",type:"slider",min:14,max:30,showWhen:{type:"text"}}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/icon.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.iconCombo=ui.combo.extendOptions({panelClass:"only-icons lp-icon-panel",inline:!0,height:"100%",margin:0,name:"",items:function(){for(var e=[],t=1;841>=t;t++)t>=285&&289>=t||t>=365&&716>=t||t>=743&&766>=t||e.push({value:"view/editor/assets/ico/"+t+".png"});return e},itemTpl:function(e){return $("<div class='combo-item'>").css({backgroundImage:"url("+base_url+"/"+e.value+")"})}}),lp.iconComboWhite=lp.iconCombo.extendOptions({items:function(){var e=[];this.element.css({background:"transparent"}),this.element.parent().css({background:"#555"});for(var t=365;716>=t;t++)e.push({value:"view/editor/assets/ico/"+t+".png"});return e}}),lp.icon=lp.cover.extendOptions({init:function(){this.cover.appendTo(this.element.find(".ico"))},change:function(){this.element.find(".ico").css({backgroundImage:"url("+base_url+"/"+this.value+")"})}}).extend({init:function(e){e.configForm={title:_t("Icons"),width:550,height:500,item:"white"==e.iconType?lp.iconComboWhite:lp.iconCombo},e.iconType&&(e.configForm.id="dialog_"+e.iconType),this._super(e)}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/formOrder.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.formControls={},lp.formControls.text=teacss.ui.composite.extendOptions({selectLabel:_t("Text"),selectIcon:"fa fa-font",tpl:function(e){var t,n;return e.required&&(t="<i>*</i>"),n=e.desc?$('<div class="desc">').text(e.desc):"",$('<div class="form_field">').append($("<label>").append($('<div class="field_title">').text(e.label).append(t),n,$('<input class="form_field_text" type="text">'),$('<div class="error">')))}},{items:[_t("Field label"),{type:"text",name:"label"},_t("Field description"),{type:"text",name:"desc"},{type:"check",name:"required",label:_t("Is required?"),margin:"0"}]}),lp.formControls.textarea=lp.formControls.text.extend({selectLabel:_t("Text area"),selectIcon:"fa fa-bars",tpl:function(e){var t,n;return e.required&&(t="<i>*</i>"),n=e.desc?$('<div class="desc">').text(e.desc):"",$('<div class="form_field">').append($("<label>").append($('<div class="field_title">').text(e.label).append(t),n,$('<textarea class="form_field_textarea" rows="3">'),$('<div class="error">')))}},{items:[_t("Field label"),{type:"text",name:"label"},_t("Field description"),{type:"text",name:"desc"},{type:"check",name:"required",label:_t("Is required?"),margin:"0"}]}),lp.formControls.checkbox=teacss.ui.composite.extendOptions({selectLabel:_t("Checkbox"),selectIcon:"fa fa-check-square-o",tpl:function(e){return $("<div class='form_field'>").append($("<label>").text(e.label).prepend('<input class="form_field_checkbox" type="checkbox" value="'+e.label+'">'))}},{items:[_t("Field label"),{type:"text",name:"label"}]}),lp.formControls.select=teacss.ui.composite.extendOptions({selectLabel:_t("Select"),selectIcon:"fa fa-toggle-down","default":{options:_t("Вариант 1\nВариант 2\nВариант 3")},tpl:function(e){var t,n;t=e.desc?$('<div class="desc">').text(e.desc):"";var i=$('<div class="form_field">').append($("<label>").append($('<div class="field_title">').text(e.label),t,n=$('<select class="form_field_select">')));return $.each(e.options.split("\n"),function(){n.append($("<option>").text(this))}),$(".form_field_select>").wrap('<div class="form_field_select_wrap"></div>'),i}},{items:[_t("Field label"),{type:"text",name:"label"},_t("Field description"),{type:"text",name:"desc"},_t("Options"),{type:"textarea",name:"options",height:55,width:448}]}),lp.formControls.radio=teacss.ui.composite.extendOptions({selectLabel:_t("Radio"),selectIcon:"fa fa-dot-circle-o","default":{options:_t("Вариант 1\nВариант 2\nВариант 3")},tpl:function(e,t){var n,i;n=e.desc?$('<div class="desc">').text(e.desc):"";var a=$('<div class="form_field">').append($("<label>").append($('<div class="field_title">').text(e.label),n,i=$('<div class="form_field_radio_values">')));return $.each(e.options.split("\n"),function(){i.append($('<div class="form_field_radio_value">').append($("<label>").text(this).prepend('<input name="'+t+'" class="form_field_radio" type="radio" value="'+this+'"/>')))}),$(i.find("input")[0]).prop("checked",!0),e.field=t,a}},{items:[_t("Field label"),{type:"text",name:"label"},_t("Field description"),{type:"text",name:"desc"},_t("Options"),{type:"textarea",name:"options",height:55,width:448}]}),lp.formControls.file=teacss.ui.composite.extendOptions({selectLabel:_t("File"),selectIcon:"fa fa-paperclip",tpl:function(e){var t,n;return e.required&&(t="<i>*</i>"),n=e.desc?$('<div class="desc">').text(e.desc):"",$('<div class="form_field">').append($("<label>").append($('<div class="field_title">').text(e.label).append(t),n,$('<input class="form_field_file" multiple="" type="file">'),$('<div class="error">')))}},{items:[_t("Field label"),{type:"text",name:"label"},_t("Field description"),{type:"text",name:"desc"},{type:"check",name:"required",label:_t("Is required?"),margin:"0"}]}),lp.formOrder=lp.cover.extendOptions({},{change:function(){var e=this.getValue(),t=this.element.find(".form_fields").empty();$.each(e.fields,function(e,n){var i=lp.formControls[n.type];t.append(i.tpl(n,"field_"+e))}),this.element.find(".form_submit .form_field_submit").attr("class","form_field_submit "+e.button.color).find("span").text(e.button.label)},configForm:{title:_t("Form"),items:[{name:"fields",repeaterClass:"lp-field-repeater",type:teacss.ui.repeater.extend({init:function(e){this._super(e);var t=this;this.addCombo=teacss.ui.combo({label:_t("Add Field"),comboWidth:300,itemTpl:function(e){return $("<div>").addClass("lp-add-field "+e.sub.selectIcon).text(e.sub.selectLabel).mousedown(function(){t.addElement($.extend(e.sub.default||{},{type:e.type,label:e.sub.selectLabel})),t.trigger("change")})},items:function(){var e=[];return $.each(lp.formControls,function(t,n){n&&n.selectLabel&&e.push({value:t,sub:n,type:t})}),e}}),this.addButton.replaceWith(this.addCombo.element)},itemTemplate:function(e){var t=this._super(e),n=t.find(".ui-repeater-item-content").hide();return t.find(".ui-repeater-item-title").css({cursor:"pointer"}).prepend($("<span>")).click(function(){var e=n.is(":visible");t.parent().find(".ui-repeater-item-content").hide(),n.toggle(!e)}),t},updateLabel:function(e){var t=e.getValue(),n=e.itemContainer.find(".ui-repeater-item-title").addClass(lp.formControls[t.type].selectIcon);n.children("span").eq(0).text(t.label)},addElement:function(e){e=e||{};var t=lp.formControls[e.type]();t.setValue(e);var n=this;return t.bind("change",function(){n.updateLabel(t),n.trigger("change")}),this.push(t),this.updateLabel(t),t}})},{type:"label",value:_t("Button text:"),width:"53%",margin:"0 0 5px"},{type:"label",value:_t("Button color:"),width:"47%",margin:"0 0 5px"},{type:"text",name:"button.label",width:"50%",margin:"0 3% 12px 0"},{type:lp.color,name:"button.color",width:"47%",iconSize:15,items:[{value:"blue",color:"#0187BC"},{value:"green",color:"#3E9802"},{value:"orange",color:"#FD6F00"},{value:"purple",color:"#8C33D2"},{value:"purple_light",color:"#9581BF"},{value:"rose",color:"#F372A4"},{value:"red",color:"#CE0707"},{value:"yellow",color:"#FFC415"}]},{type:"button",label:_t("Show success window"),width:"auto",margin:"0 0 10px 0px",click:function(){lp.formOrder.showFormSuccess()}}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/image.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.image=lp.cover.extendOptions({init:function(){this.cover.appendTo(this.element.find(".img"))},change:function(){this.element.find(".img").css({backgroundImage:"url('"+base_url+"/"+this.value+"')"})},configForm:{title:_t("Image"),items:[{type:"label",value:_t("Select image file"),margin:"10px 0 5px"},{name:"",type:"uploadButton",label:_t("Upload image file")}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/imageSrc.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.imageSrc=lp.cover.extendOptions({change:function(){this.element.find("img").attr({src:base_url+"/"+this.value})},configForm:{title:_t("Image"),items:[{type:"label",value:_t("Select image file"),margin:"10px 0 5px"},{name:"",type:"uploadButton",label:_t("Upload image file")}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/formButton.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.formButton=lp.cover.extendOptions({change:function(){var e=(Component.previewFrame.window.$,this),t=e.element.find(".btn_form");t.attr("href","link"==e.value.type?e.value.a_href:""),t.text(e.value.text).prop("class","btn_form "+e.value.color||"btn_form")},configForm:{title:_t("Order button"),items:[{type:"label",value:_t("Button behavior after click:"),width:"100%",margin:"2px 0"},{name:"type",type:"radio",margin:"5px 0 15px",items:[{label:_t("Show order form"),value:"form"},{label:_t("Go to the link"),value:"link"}]},{type:"label",value:_t("Button text:"),width:"53%",margin:"5px 0 2px 0"},{type:"label",value:_t("Button color:"),width:"47%",margin:"5px 0 2px 0"},{type:"text",name:"text",width:"50%",margin:"0 3% 10px 0"},{type:lp.color,name:"color",width:"47%",iconSize:15,margin:"0 0 8px",items:[{value:"blue",color:"#0187BC"},{value:"green",color:"#3E9802"},{value:"orange",color:"#FD6F00"},{value:"purple",color:"#8C33D2"},{value:"purple_light",color:"#9581BF"},{value:"rose",color:"#F372A4"},{value:"red",color:"#CE0707"},{value:"yellow",color:"#FFC415"}]},{type:"label",value:_t("Form"),width:"100%",margin:"5px 0",showWhen:{type:"form"}},{type:"label",value:_t("Link"),width:"100%",margin:"5px 0",showWhen:{type:"link"}},{type:"button",label:_t("Show form"),width:"auto",margin:"0 0 10px",showWhen:{type:"form"},click:function(){lp.formButton.showForm()}},{type:"button",label:_t("Show success window"),width:"auto",margin:"0 0 10px 8px",showWhen:{type:"form"},click:function(){lp.formButton.showFormSuccess()}},{type:"text",name:"a_href",width:"100%",margin:"0 3% 10px 0",showWhen:{type:"link"}}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/uploadButton.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return teacss.ui.uploadButton=teacss.ui.button.extend({iconWidth:64,iconHeight:52},{init:function(e){var t=this;this._super($.extend({label:_t("Upload file"),uploadDir:"files"},e));var n=$("<input type='file'>").css({position:"fixed",top:0,left:0,zIndex:1e4,width:0}).hide().appendTo("body");n.change(function(){var e=new FormData;$.each(n[0].files,function(t,n){e.append("file-"+t,n)}),e.append("_type","upload"),e.append("name",t.options.uploadDir),e.append("iconWidth",t.Class.iconWidth),e.append("iconHeight",t.Class.iconHeight),$.ajax({url:Component.app.options.ajax_url,data:e,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(e){e=$.parseJSON(e);var n=e[0].url.substring(base_url.length);"/"==n[0]&&(n=n.substring(1)),t.value=n,t.trigger("change")}})}),this.element.click(function(e){e.preventDefault(),n.show(),n.click(),n.hide()})}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/fontCombo.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return ui.fontCombo=ui.combo.extendOptions({itemTpl:function(e){var t=$("<div class='font-set-item combo-item'>");return t.append(e.value?"<div style='font-family:${value};font-size:11.6px;'>"+e.value+"</div>":"<div style='font-weight:bold;font-size:11.6px;'>auto</div>"),t},buttonClass:"icon-button",selectedIndex:0,preview:!0,falseItem:!0,items:function(){var e=this.options.falseItem?[{value:!1}]:[];return e=e.concat([{value:"Verdana"},{value:"Lucida Grande"},{value:"Arial"},{value:"Georgia"},{value:"Impact"},{value:"Times New Roman"},{value:"Trebuchet MS"},{value:"Palatino Linotype"},{value:"Comic Sans MS"},{value:"Century Gothic"},{value:"Open Sans"},{value:"TeXGyreAdventor"}])}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/media.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.media=lp.cover.extendOptions({change:function(){var e=this.element.find(".media");if("image_background"==this.value.type)e.empty(e),e.append($('<div class="img">').css({backgroundImage:"url('"+base_url+"/"+this.value.image_url+"')"}));else if("video"==this.value.type){var t=this.value.video_url,n=/youtu/,i=/vimeo/;if(n.test(t)){var a=/^.*((youtu.*be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,r=t.match(a);r&&r[7]&&(e.empty(e),e.append($('<iframe frameborder="0"></iframe>').attr({src:"//www.youtube.com/embed/"+r[7]})))}else if(i.test(t)){var o=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/,r=t.match(o);r&&r[5]&&(e.empty(e),e.append($('<iframe frameborder="0"></iframe>').attr({src:"//player.vimeo.com/video/"+r[5]})))}else e.empty(e),e.append($('<iframe frameborder="0"></iframe>').attr({src:base_url+"/view/editor/assets/video_404.html"}))}},configForm:{title:_t("Media files"),items:[{name:"type",type:"radio",margin:"15px 0 20px",items:[{label:_t("Image"),value:"image_background"},{label:_t("Video"),value:"video"}]},{name:"image_url",type:"uploadButton",label:_t("Upload file"),showWhen:{type:"image_background"}},{type:"label",value:_t("Video url (youtube or vimeo):"),margin:"5px 0 0",showWhen:{type:"video"}},{name:"video_url",type:"text",margin:"5px 0 0",showWhen:{type:"video"}},{type:"label",value:_t("example: www.youtube.com/embed/xbK8rl9wH4Q"),margin:"0 0 5px 2px",showWhen:{type:"video"}}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/videoStream.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.videoStream=lp.cover.extendOptions({change:function(){var e=this.element.find("iframe"),t=this.value.video_url,n=/youtu/,i=/vimeo/;if(n.test(t)){var a=/^.*((youtu.*be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,r=t.match(a);r&&r[7]&&e.attr({src:"//www.youtube.com/embed/"+r[7]})}else if(i.test(t)){var o=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/,r=t.match(o);r&&r[5]&&e.attr({src:"//player.vimeo.com/video/"+r[5]})}else e.attr({src:base_url+"/view/editor/assets/video_404.html"})},configForm:{title:_t("Video"),items:[{type:"label",value:_t("Video url (youtube or vimeo):"),margin:"20px 0 5px"},{name:"video_url",type:"text",margin:"5px 0 0"},{type:"label",value:_t("example: www.youtube.com/embed/xbK8rl9wH4Q"),height:5,margin:"0 0 5px 2px"}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/lib/datetimePicker/jquery.datetimepicker.css",!0),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/lib/datetimePicker/jquery.datetimepicker.js",function(path){var require=window.require.factory(path),module={exports:!1},exports={};return function(e){"use strict";var t={i18n:{ar:{months:["كانون الثاني","شباط","آذار","نيسان","مايو","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],dayOfWeek:["ن","ث","ع","خ","ج","س","ح"]},ro:{months:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],dayOfWeek:["l","ma","mi","j","v","s","d"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeek:["Sen","Sel","Rab","Kam","Jum","Sab","Min"]},bg:{months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],dayOfWeek:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"]},fa:{months:["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],dayOfWeek:["یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"]},ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeek:["Вск","Пн","Вт","Ср","Чт","Пт","Сб"]},uk:{months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dayOfWeek:["Ндл","Пнд","Втр","Срд","Чтв","Птн","Сбт"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},el:{months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],dayOfWeek:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeek:["Paz","Pts","Sal","Çar","Per","Cum","Cts"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeek:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeek:["nd","pn","wt","śr","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},da:{months:["January","Februar","Marts","April","Maj","Juni","July","August","September","Oktober","November","December"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},ja:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["日","月","火","水","木","金","土"]},vi:{months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayOfWeek:["CN","T2","T3","T4","T5","T6","T7"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeek:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"]},cs:{months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dayOfWeek:["Ne","Po","Út","St","Čt","Pá","So"]},hu:{months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dayOfWeek:["Va","Hé","Ke","Sze","Cs","Pé","Szo"]},az:{months:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dayOfWeek:["B","Be","Ça","Ç","Ca","C","Ş"]},bs:{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ca:{months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dayOfWeek:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"]},"en-GB":{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},et:{months:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayOfWeek:["P","E","T","K","N","R","L"]},eu:{months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],dayOfWeek:["Ig.","Al.","Ar.","Az.","Og.","Or.","La."]},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayOfWeek:["Su","Ma","Ti","Ke","To","Pe","La"]},gl:{months:["Xan","Feb","Maz","Abr","Mai","Xun","Xul","Ago","Set","Out","Nov","Dec"],dayOfWeek:["Dom","Lun","Mar","Mer","Xov","Ven","Sab"]},hr:{months:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ko:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},lt:{months:["Sausio","Vasario","Kovo","Balandžio","Gegužės","Birželio","Liepos","Rugpjūčio","Rugsėjo","Spalio","Lapkričio","Gruodžio"],dayOfWeek:["Sek","Pir","Ant","Tre","Ket","Pen","Šeš"]},lv:{months:["Janvāris","Februāris","Marts","Aprīlis ","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],dayOfWeek:["Sv","Pr","Ot","Tr","Ct","Pk","St"]},mk:{months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],dayOfWeek:["нед","пон","вто","сре","чет","пет","саб"]},mn:{months:["1-р сар","2-р сар","3-р сар","4-р сар","5-р сар","6-р сар","7-р сар","8-р сар","9-р сар","10-р сар","11-р сар","12-р сар"],dayOfWeek:["Дав","Мяг","Лха","Пүр","Бсн","Бям","Ням"]},"pt-BR":{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"]},sk:{months:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],dayOfWeek:["Ne","Po","Ut","St","Št","Pi","So"]},sq:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},"sr-YU":{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sre","čet","Pet","Sub"]},sr:{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],dayOfWeek:["нед","пон","уто","сре","чет","пет","суб"]},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},"zh-TW":{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},zh:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},he:{months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],dayOfWeek:["א'","ב'","ג'","ד'","ה'","ו'","שבת"]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],disabledDates:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0};Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n,i;for(n=t||0,i=this.length;i>n;n+=1)if(this[n]===e)return n;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},e.fn.xdsoftScroller=function(t){return this.each(function(){var n,i,a,r,o,s=e(this),l=function(e){var t,n={x:0,y:0};return"touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type?(t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],n.x=t.clientX,n.y=t.clientY):("mousedown"===e.type||"mouseup"===e.type||"mousemove"===e.type||"mouseover"===e.type||"mouseout"===e.type||"mouseenter"===e.type||"mouseleave"===e.type)&&(n.x=e.clientX,n.y=e.clientY),n},c=100,u=!1,h=0,d=0,p=0,f=!1,m=0,g=function(){};return"hide"===t?void s.find(".xdsoft_scrollbar").hide():(e(this).hasClass("xdsoft_scroller_box")||(n=s.children().eq(0),i=s[0].clientHeight,a=n[0].offsetHeight,r=e('<div class="xdsoft_scrollbar"></div>'),o=e('<div class="xdsoft_scroller"></div>'),r.append(o),s.addClass("xdsoft_scroller_box").append(r),g=function(e){var t=l(e).y-h+m;0>t&&(t=0),t+o[0].offsetHeight>p&&(t=p-o[0].offsetHeight),s.trigger("scroll_element.xdsoft_scroller",[c?t/c:0])},o.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(n){i||s.trigger("resize_scroll.xdsoft_scroller",[t]),h=l(n).y,m=parseInt(o.css("margin-top"),10),p=r[0].offsetHeight,"mousedown"===n.type?(document&&e(document.body).addClass("xdsoft_noselect"),e([document.body,window]).on("mouseup.xdsoft_scroller",function a(){e([document.body,window]).off("mouseup.xdsoft_scroller",a).off("mousemove.xdsoft_scroller",g).removeClass("xdsoft_noselect")}),e(document.body).on("mousemove.xdsoft_scroller",g)):(f=!0,n.stopPropagation(),n.preventDefault())}).on("touchmove",function(e){f&&(e.preventDefault(),g(e))}).on("touchend touchcancel",function(){f=!1,m=0}),s.on("scroll_element.xdsoft_scroller",function(e,t){i||s.trigger("resize_scroll.xdsoft_scroller",[t,!0]),t=t>1?1:0>t||isNaN(t)?0:t,o.css("margin-top",c*t),setTimeout(function(){n.css("marginTop",-parseInt((n[0].offsetHeight-i)*t,10))},10)}).on("resize_scroll.xdsoft_scroller",function(e,t,l){var u,h;i=s[0].clientHeight,a=n[0].offsetHeight,u=i/a,h=u*r[0].offsetHeight,u>1?o.hide():(o.show(),o.css("height",parseInt(h>10?h:10,10)),c=r[0].offsetHeight-o[0].offsetHeight,l!==!0&&s.trigger("scroll_element.xdsoft_scroller",[t||Math.abs(parseInt(n.css("marginTop"),10))/(a-i)]))}),s.on("mousewheel",function(e){var t=Math.abs(parseInt(n.css("marginTop"),10));return t-=20*e.deltaY,0>t&&(t=0),s.trigger("scroll_element.xdsoft_scroller",[t/(a-i)]),e.stopPropagation(),!1}),s.on("touchstart",function(e){u=l(e),d=Math.abs(parseInt(n.css("marginTop"),10))}),s.on("touchmove",function(e){if(u){e.preventDefault();var t=l(e);s.trigger("scroll_element.xdsoft_scroller",[(d-(t.y-u.y))/(a-i)])}}),s.on("touchend touchcancel",function(){u=!1,d=0})),void s.trigger("resize_scroll.xdsoft_scroller",[t]))})},e.fn.datetimepicker=function(n){var i,a,r,o=48,s=57,l=96,c=105,u=17,h=46,d=13,p=27,f=8,m=37,g=38,v=39,y=40,b=9,x=116,_=65,w=67,S=86,C=90,k=89,T=!1,F=e.isPlainObject(n)||!n?e.extend(!0,{},t,n):e.extend(!0,{},t),$=0,D=function(e){e.on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function t(){e.is(":disabled")||e.is(":hidden")||!e.is(":visible")||e.data("xdsoft_datetimepicker")||(clearTimeout($),$=setTimeout(function(){e.data("xdsoft_datetimepicker")||i(e),e.off("open.xdsoft focusin.xdsoft mousedown.xdsoft",t).trigger("open.xdsoft")
},100))})};return i=function(t){function i(){var e,n=!1;return F.startDate?n=r.strToDate(F.startDate):(n=F.value||(t&&t.val&&t.val()?t.val():""),n?n=r.strToDateTime(n):F.defaultDate&&(n=r.strToDate(F.defaultDate),F.defaultTime&&(e=r.strtotime(F.defaultTime),n.setHours(e.getHours()),n.setMinutes(e.getMinutes())))),n&&r.isValidDate(n)?M.data("changed",!0):n="",n||0}var a,$,D,R,O,M=e("<div "+(F.id?'id="'+F.id+'"':"")+" "+(F.style?'style="'+F.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_'+F.theme+" xdsoft_noselect "+(F.weeks?" xdsoft_showweeks":"")+F.className+'"></div>'),j=e('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),A=e('<div class="xdsoft_datepicker active"></div>'),I=e('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),E=e('<div class="xdsoft_calendar"></div>'),P=e('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),W=P.find(".xdsoft_time_box").eq(0),H=e('<div class="xdsoft_time_variant"></div>'),z=e('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),B=e('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),L=!1,q=0,N=0;I.find(".xdsoft_month span").after(z),I.find(".xdsoft_year span").after(B),I.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(t){var n,i,a=e(this).find(".xdsoft_select").eq(0),o=0,s=0,l=a.is(":visible");for(I.find(".xdsoft_select").hide(),r.currentTime&&(o=r.currentTime[e(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),a[l?"hide":"show"](),n=a.find("div.xdsoft_option"),i=0;i<n.length&&n.eq(i).data("value")!==o;i+=1)s+=n[0].offsetHeight;return a.xdsoftScroller(s/(a.children()[0].offsetHeight-a[0].clientHeight)),t.stopPropagation(),!1}),I.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(e){e.stopPropagation(),e.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(){var t=r.currentTime.getFullYear();r&&r.currentTime&&r.currentTime[e(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](e(this).data("value")),e(this).parent().parent().hide(),M.trigger("xchange.xdsoft"),F.onChangeMonth&&e.isFunction(F.onChangeMonth)&&F.onChangeMonth.call(M,r.currentTime,M.data("input")),t!==r.currentTime.getFullYear()&&e.isFunction(F.onChangeYear)&&F.onChangeYear.call(M,r.currentTime,M.data("input"))}),M.setOptions=function(n){if(F=e.extend(!0,{},F,n),n.allowTimes&&e.isArray(n.allowTimes)&&n.allowTimes.length&&(F.allowTimes=e.extend(!0,[],n.allowTimes)),n.weekends&&e.isArray(n.weekends)&&n.weekends.length&&(F.weekends=e.extend(!0,[],n.weekends)),n.disabledDates&&e.isArray(n.disabledDates)&&n.disabledDates.length&&(F.disabledDates=e.extend(!0,[],n.disabledDates)),!F.open&&!F.opened||F.inline||t.trigger("open.xdsoft"),F.inline&&(L=!0,M.addClass("xdsoft_inline"),t.after(M).hide()),F.inverseButton&&(F.next="xdsoft_prev",F.prev="xdsoft_next"),F.datepicker?A.addClass("active"):A.removeClass("active"),F.timepicker?P.addClass("active"):P.removeClass("active"),F.value&&(t&&t.val&&t.val(F.value),r.setCurrentTime(F.value)),F.dayOfWeekStart=isNaN(F.dayOfWeekStart)?0:parseInt(F.dayOfWeekStart,10)%7,F.timepickerScrollbar||W.xdsoftScroller("hide"),F.minDate&&/^-(.*)$/.test(F.minDate)&&(F.minDate=r.strToDateTime(F.minDate).dateFormat(F.formatDate)),F.maxDate&&/^\+(.*)$/.test(F.maxDate)&&(F.maxDate=r.strToDateTime(F.maxDate).dateFormat(F.formatDate)),I.find(".xdsoft_today_button").css("visibility",F.todayButton?"visible":"hidden"),F.mask){var i=function(e){try{if(document.selection&&document.selection.createRange){var t=document.selection.createRange();return t.getBookmark().charCodeAt(2)-2}if(e.setSelectionRange)return e.selectionStart}catch(n){return 0}},a=function(e,t){if(e="string"==typeof e||e instanceof String?document.getElementById(e):e,!e)return!1;if(e.createTextRange){var n=e.createTextRange();return n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select(),!0}return e.setSelectionRange?(e.setSelectionRange(t,t),!0):!1},$=function(e,t){var n=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(n).test(t)};t.off("keydown.xdsoft"),F.mask===!0&&(F.mask=F.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"===e.type(F.mask)&&($(F.mask,t.val())||t.val(F.mask.replace(/[0-9]/g,"_")),t.on("keydown.xdsoft",function(n){var r,D,R=this.value,O=n.which;if(O>=o&&s>=O||O>=l&&c>=O||O===f||O===h){for(r=i(this),D=O!==f&&O!==h?String.fromCharCode(O>=l&&c>=O?O-o:O):"_",O!==f&&O!==h||!r||(r-=1,D="_");/[^0-9_]/.test(F.mask.substr(r,1))&&r<F.mask.length&&r>0;)r+=O===f||O===h?-1:1;if(R=R.substr(0,r)+D+R.substr(r+1),""===e.trim(R))R=F.mask.replace(/[0-9]/g,"_");else if(r===F.mask.length)return n.preventDefault(),!1;for(r+=O===f||O===h?0:1;/[^0-9_]/.test(F.mask.substr(r,1))&&r<F.mask.length&&r>0;)r+=O===f||O===h?-1:1;$(F.mask,R)?(this.value=R,a(this,r)):""===e.trim(R)?this.value=F.mask.replace(/[0-9]/g,"_"):t.trigger("error_input.xdsoft")}else if(-1!==[_,w,S,C,k].indexOf(O)&&T||-1!==[p,g,y,m,v,x,u,b,d].indexOf(O))return!0;return n.preventDefault(),!1}))}F.validateOnBlur&&t.off("blur.xdsoft").on("blur.xdsoft",function(){F.allowBlank&&!e.trim(e(this).val()).length?(e(this).val(null),M.data("xdsoft_datetime").empty()):Date.parseDate(e(this).val(),F.format)?M.data("xdsoft_datetime").setCurrentTime(e(this).val()):(e(this).val(r.now().dateFormat(F.format)),M.data("xdsoft_datetime").setCurrentTime(e(this).val())),M.trigger("changedatetime.xdsoft")}),F.dayOfWeekStartPrev=0===F.dayOfWeekStart?6:F.dayOfWeekStart-1,M.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},M.data("options",F).on("mousedown.xdsoft",function(e){return e.stopPropagation(),e.preventDefault(),B.hide(),z.hide(),!1}),W.append(H),W.xdsoftScroller(),M.on("afterOpen.xdsoft",function(){W.xdsoftScroller()}),M.append(A).append(P),F.withoutCopyright!==!0&&M.append(j),A.append(I).append(E),e(F.parentID).append(M),a=function(){var t=this;t.now=function(e){var n,i,a=new Date;return!e&&F.defaultDate&&(n=t.strToDate(F.defaultDate),a.setFullYear(n.getFullYear()),a.setMonth(n.getMonth()),a.setDate(n.getDate())),F.yearOffset&&a.setFullYear(a.getFullYear()+F.yearOffset),!e&&F.defaultTime&&(i=t.strtotime(F.defaultTime),a.setHours(i.getHours()),a.setMinutes(i.getMinutes())),a},t.isValidDate=function(e){return"[object Date]"!==Object.prototype.toString.call(e)?!1:!isNaN(e.getTime())},t.setCurrentTime=function(e){t.currentTime="string"==typeof e?t.strToDateTime(e):t.isValidDate(e)?e:t.now(),M.trigger("xchange.xdsoft")},t.empty=function(){t.currentTime=null},t.getCurrentTime=function(){return t.currentTime},t.nextMonth=function(){var n,i=t.currentTime.getMonth()+1;return 12===i&&(t.currentTime.setFullYear(t.currentTime.getFullYear()+1),i=0),n=t.currentTime.getFullYear(),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),i+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(i),F.onChangeMonth&&e.isFunction(F.onChangeMonth)&&F.onChangeMonth.call(M,r.currentTime,M.data("input")),n!==t.currentTime.getFullYear()&&e.isFunction(F.onChangeYear)&&F.onChangeYear.call(M,r.currentTime,M.data("input")),M.trigger("xchange.xdsoft"),i},t.prevMonth=function(){var n=t.currentTime.getMonth()-1;return-1===n&&(t.currentTime.setFullYear(t.currentTime.getFullYear()-1),n=11),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),n+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(n),F.onChangeMonth&&e.isFunction(F.onChangeMonth)&&F.onChangeMonth.call(M,r.currentTime,M.data("input")),M.trigger("xchange.xdsoft"),n},t.getWeekOfYear=function(e){var t=new Date(e.getFullYear(),0,1);return Math.ceil(((e-t)/864e5+t.getDay()+1)/7)},t.strToDateTime=function(e){var n,i,a=[];return e&&e instanceof Date&&t.isValidDate(e)?e:(a=/^(\+|\-)(.*)$/.exec(e),a&&(a[2]=Date.parseDate(a[2],F.formatDate)),a&&a[2]?(n=a[2].getTime()-6e4*a[2].getTimezoneOffset(),i=new Date(r.now().getTime()+parseInt(a[1]+"1",10)*n)):i=e?Date.parseDate(e,F.format):t.now(),t.isValidDate(i)||(i=t.now()),i)},t.strToDate=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var n=e?Date.parseDate(e,F.formatDate):t.now(!0);return t.isValidDate(n)||(n=t.now(!0)),n},t.strtotime=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var n=e?Date.parseDate(e,F.formatTime):t.now(!0);return t.isValidDate(n)||(n=t.now(!0)),n},t.str=function(){return t.currentTime.dateFormat(F.format)},t.currentTime=this.now()},r=new a,I.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){M.data("changed",!0),r.setCurrentTime(0),M.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){t.val(r.str()),M.trigger("close.xdsoft")}),I.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,i=!1;!function a(e){r.currentTime.getMonth();t.hasClass(F.next)?r.nextMonth():t.hasClass(F.prev)&&r.prevMonth(),F.monthChangeSpinner&&(i||(n=setTimeout(a,e||100)))}(500),e([document.body,window]).on("mouseup.xdsoft",function o(){clearTimeout(n),i=!0,e([document.body,window]).off("mouseup.xdsoft",o)})}),P.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=e(this),n=0,i=!1,a=110;!function r(e){var o=W[0].clientHeight,s=H[0].offsetHeight,l=Math.abs(parseInt(H.css("marginTop"),10));t.hasClass(F.next)&&s-o-F.timeHeightInTimePicker>=l?H.css("marginTop","-"+(l+F.timeHeightInTimePicker)+"px"):t.hasClass(F.prev)&&l-F.timeHeightInTimePicker>=0&&H.css("marginTop","-"+(l-F.timeHeightInTimePicker)+"px"),W.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(H.css("marginTop"),10)/(s-o))]),a=a>10?10:a-10,i||(n=setTimeout(r,e||a))}(500),e([document.body,window]).on("mouseup.xdsoft",function o(){clearTimeout(n),i=!0,e([document.body,window]).off("mouseup.xdsoft",o)})}),$=0,M.on("xchange.xdsoft",function(t){clearTimeout($),$=setTimeout(function(){for(var t,i,a,o,s,l,c,u="",h=new Date(r.currentTime.getFullYear(),r.currentTime.getMonth(),1,12,0,0),d=0,p=r.now(),f=!1,m=!1,g=[],v=!0,y="",b="";h.getDay()!==F.dayOfWeekStart;)h.setDate(h.getDate()-1);for(u+="<table><thead><tr>",F.weeks&&(u+="<th></th>"),t=0;7>t;t+=1)u+="<th>"+F.i18n[F.lang].dayOfWeek[(t+F.dayOfWeekStart)%7]+"</th>";for(u+="</tr></thead>",u+="<tbody>",F.maxDate!==!1&&(f=r.strToDate(F.maxDate),f=new Date(f.getFullYear(),f.getMonth(),f.getDate(),23,59,59,999)),F.minDate!==!1&&(m=r.strToDate(F.minDate),m=new Date(m.getFullYear(),m.getMonth(),m.getDate()));d<r.currentTime.countDaysInMonth()||h.getDay()!==F.dayOfWeekStart||r.currentTime.getMonth()===h.getMonth();)g=[],d+=1,i=h.getDate(),a=h.getFullYear(),o=h.getMonth(),s=r.getWeekOfYear(h),g.push("xdsoft_date"),l=F.beforeShowDay&&e.isFunction(F.beforeShowDay.call)?F.beforeShowDay.call(M,h):null,f!==!1&&h>f||m!==!1&&m>h||l&&l[0]===!1?g.push("xdsoft_disabled"):-1!==F.disabledDates.indexOf(h.dateFormat(F.formatDate))&&g.push("xdsoft_disabled"),l&&""!==l[1]&&g.push(l[1]),r.currentTime.getMonth()!==o&&g.push("xdsoft_other_month"),(F.defaultSelect||M.data("changed"))&&r.currentTime.dateFormat(F.formatDate)===h.dateFormat(F.formatDate)&&g.push("xdsoft_current"),p.dateFormat(F.formatDate)===h.dateFormat(F.formatDate)&&g.push("xdsoft_today"),(0===h.getDay()||6===h.getDay()||-1===F.weekends.indexOf(h.dateFormat(F.formatDate)))&&g.push("xdsoft_weekend"),F.beforeShowDay&&e.isFunction(F.beforeShowDay)&&g.push(F.beforeShowDay(h)),v&&(u+="<tr>",v=!1,F.weeks&&(u+="<th>"+s+"</th>")),u+='<td data-date="'+i+'" data-month="'+o+'" data-year="'+a+'" class="xdsoft_date xdsoft_day_of_week'+h.getDay()+" "+g.join(" ")+'"><div>'+i+"</div></td>",h.getDay()===F.dayOfWeekStartPrev&&(u+="</tr>",v=!0),h.setDate(i+1);if(u+="</tbody></table>",E.html(u),I.find(".xdsoft_label span").eq(0).text(F.i18n[F.lang].months[r.currentTime.getMonth()]),I.find(".xdsoft_label span").eq(1).text(r.currentTime.getFullYear()),y="",b="",o="",c=function(e,t){var n=r.now();n.setHours(e),e=parseInt(n.getHours(),10),n.setMinutes(t),t=parseInt(n.getMinutes(),10),g=[],(F.maxTime!==!1&&r.strtotime(F.maxTime).getTime()<n.getTime()||F.minTime!==!1&&r.strtotime(F.minTime).getTime()>n.getTime())&&g.push("xdsoft_disabled"),(F.initTime||F.defaultSelect||M.data("changed"))&&parseInt(r.currentTime.getHours(),10)===parseInt(e,10)&&(F.step>59||Math[F.roundTime](r.currentTime.getMinutes()/F.step)*F.step===parseInt(t,10))&&(F.defaultSelect||M.data("changed")?g.push("xdsoft_current"):F.initTime&&g.push("xdsoft_init_time")),parseInt(p.getHours(),10)===parseInt(e,10)&&parseInt(p.getMinutes(),10)===parseInt(t,10)&&g.push("xdsoft_today"),y+='<div class="xdsoft_time '+g.join(" ")+'" data-hour="'+e+'" data-minute="'+t+'">'+n.dateFormat(F.formatTime)+"</div>"},F.allowTimes&&e.isArray(F.allowTimes)&&F.allowTimes.length)for(d=0;d<F.allowTimes.length;d+=1)b=r.strtotime(F.allowTimes[d]).getHours(),o=r.strtotime(F.allowTimes[d]).getMinutes(),c(b,o);else for(d=0,t=0;d<(F.hours12?12:24);d+=1)for(t=0;60>t;t+=F.step)b=(10>d?"0":"")+d,o=(10>t?"0":"")+t,c(b,o);for(H.html(y),n="",d=0,d=parseInt(F.yearStart,10)+F.yearOffset;d<=parseInt(F.yearEnd,10)+F.yearOffset;d+=1)n+='<div class="xdsoft_option '+(r.currentTime.getFullYear()===d?"xdsoft_current":"")+'" data-value="'+d+'">'+d+"</div>";for(B.children().eq(0).html(n),d=0,n="";11>=d;d+=1)n+='<div class="xdsoft_option '+(r.currentTime.getMonth()===d?"xdsoft_current":"")+'" data-value="'+d+'">'+F.i18n[F.lang].months[d]+"</div>";z.children().eq(0).html(n),e(M).trigger("generate.xdsoft")},10),t.stopPropagation()}).on("afterOpen.xdsoft",function(){if(F.timepicker){var e,t,n,i;H.find(".xdsoft_current").length?e=".xdsoft_current":H.find(".xdsoft_init_time").length&&(e=".xdsoft_init_time"),e?(t=W[0].clientHeight,n=H[0].offsetHeight,i=H.find(e).index()*F.timeHeightInTimePicker+1,i>n-t&&(i=n-t),W.trigger("scroll_element.xdsoft_scroller",[parseInt(i,10)/(n-t)])):W.trigger("scroll_element.xdsoft_scroller",[0])}}),D=0,E.on("click.xdsoft","td",function(n){n.stopPropagation(),D+=1;var i=e(this),a=r.currentTime;return(void 0===a||null===a)&&(r.currentTime=r.now(),a=r.currentTime),i.hasClass("xdsoft_disabled")?!1:(a.setDate(1),a.setFullYear(i.data("year")),a.setMonth(i.data("month")),a.setDate(i.data("date")),M.trigger("select.xdsoft",[a]),t.val(r.str()),(D>1||F.closeOnDateSelect===!0||0===F.closeOnDateSelect&&!F.timepicker)&&!F.inline&&M.trigger("close.xdsoft"),F.onSelectDate&&e.isFunction(F.onSelectDate)&&F.onSelectDate.call(M,r.currentTime,M.data("input"),n),M.data("changed",!0),M.trigger("xchange.xdsoft"),M.trigger("changedatetime.xdsoft"),void setTimeout(function(){D=0},200))}),H.on("click.xdsoft","div",function(t){t.stopPropagation();var n=e(this),i=r.currentTime;return(void 0===i||null===i)&&(r.currentTime=r.now(),i=r.currentTime),n.hasClass("xdsoft_disabled")?!1:(i.setHours(n.data("hour")),i.setMinutes(n.data("minute")),M.trigger("select.xdsoft",[i]),M.data("input").val(r.str()),F.inline||M.trigger("close.xdsoft"),F.onSelectTime&&e.isFunction(F.onSelectTime)&&F.onSelectTime.call(M,r.currentTime,M.data("input"),t),M.data("changed",!0),M.trigger("xchange.xdsoft"),void M.trigger("changedatetime.xdsoft"))}),A.on("mousewheel.xdsoft",function(e){return F.scrollMonth?(e.deltaY<0?r.nextMonth():r.prevMonth(),!1):!0}),t.on("mousewheel.xdsoft",function(e){return F.scrollInput?!F.datepicker&&F.timepicker?(R=H.find(".xdsoft_current").length?H.find(".xdsoft_current").eq(0).index():0,R+e.deltaY>=0&&R+e.deltaY<H.children().length&&(R+=e.deltaY),H.children().eq(R).length&&H.children().eq(R).trigger("mousedown"),!1):F.datepicker&&!F.timepicker?(A.trigger(e,[e.deltaY,e.deltaX,e.deltaY]),t.val&&t.val(r.str()),M.trigger("changedatetime.xdsoft"),!1):void 0:!0}),M.on("changedatetime.xdsoft",function(t){if(F.onChangeDateTime&&e.isFunction(F.onChangeDateTime)){var n=M.data("input");F.onChangeDateTime.call(M,r.currentTime,n,t),delete F.value,n.trigger("change")}}).on("generate.xdsoft",function(){F.onGenerate&&e.isFunction(F.onGenerate)&&F.onGenerate.call(M,r.currentTime,M.data("input")),L&&(M.trigger("afterOpen.xdsoft"),L=!1)}).on("click.xdsoft",function(e){e.stopPropagation()}),R=0,O=function(){var t=M.data("input").offset(),n=t.top+M.data("input")[0].offsetHeight-1,i=t.left,a="absolute";F.fixed?(n-=e(window).scrollTop(),i-=e(window).scrollLeft(),a="fixed"):(n+M[0].offsetHeight>e(window).height()+e(window).scrollTop()&&(n=t.top-M[0].offsetHeight+1),0>n&&(n=0),i+M[0].offsetWidth>e(window).width()&&(i=e(window).width()-M[0].offsetWidth)),M.css({left:i,top:n,position:a})},M.on("open.xdsoft",function(t){var n=!0;F.onShow&&e.isFunction(F.onShow)&&(n=F.onShow.call(M,r.currentTime,M.data("input"),t)),n!==!1&&(M.show(),O(),e(window).off("resize.xdsoft",O).on("resize.xdsoft",O),F.closeOnWithoutClick&&e([document.body,window]).on("mousedown.xdsoft",function i(){M.trigger("close.xdsoft"),e([document.body,window]).off("mousedown.xdsoft",i)}))}).on("close.xdsoft",function(t){var n=!0;I.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),F.onClose&&e.isFunction(F.onClose)&&(n=F.onClose.call(M,r.currentTime,M.data("input"),t)),n===!1||F.opened||F.inline||M.hide(),t.stopPropagation()}).on("toggle.xdsoft",function(){M.trigger(M.is(":visible")?"close.xdsoft":"open.xdsoft")}).data("input",t),q=0,N=0,M.data("xdsoft_datetime",r),M.setOptions(F),r.setCurrentTime(i()),t.data("xdsoft_datetimepicker",M).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(){t.is(":disabled")||t.is(":hidden")||!t.is(":visible")||t.data("xdsoft_datetimepicker").is(":visible")&&F.closeOnInputClick||(clearTimeout(q),q=setTimeout(function(){t.is(":disabled")||t.is(":hidden")||!t.is(":visible")||(L=!0,r.setCurrentTime(i()),M.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(t){var n,i=(this.value,t.which);return-1!==[d].indexOf(i)&&F.enterLikeTab?(n=e("input:visible,textarea:visible"),M.trigger("close.xdsoft"),n.eq(n.index(this)+1).focus(),!1):-1!==[b].indexOf(i)?(M.trigger("close.xdsoft"),!0):void 0})},a=function(t){var n=t.data("xdsoft_datetimepicker");n&&(n.data("xdsoft_datetime",null),n.remove(),t.data("xdsoft_datetimepicker",null).off(".xdsoft"),e(window).off("resize.xdsoft"),e([window,document.body]).off("mousedown.xdsoft"),t.unmousewheel&&t.unmousewheel())},e(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){e.keyCode===u&&(T=!0)}).on("keyup.xdsoftctrl",function(e){e.keyCode===u&&(T=!1)}),this.each(function(){var t=e(this).data("xdsoft_datetimepicker");if(t){if("string"===e.type(n))switch(n){case"show":e(this).select().focus(),t.trigger("open.xdsoft");break;case"hide":t.trigger("close.xdsoft");break;case"toggle":t.trigger("toggle.xdsoft");break;case"destroy":a(e(this));break;case"reset":this.value=this.defaultValue,this.value&&t.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,F.format))||t.data("changed",!1),t.data("xdsoft_datetime").setCurrentTime(this.value)}else t.setOptions(n);return 0}"string"!==e.type(n)&&(!F.lazyInit||F.open||F.inline?i(e(this)):D(e(this)))})},e.fn.datetimepicker.defaults=t}(jQuery),function(){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?exports=e:e(jQuery)}(function(e){function t(t){var o=t||window.event,s=l.call(arguments,1),c=0,h=0,d=0,p=0,f=0,m=0;if(t=e.event.fix(o),t.type="mousewheel","detail"in o&&(d=-1*o.detail),"wheelDelta"in o&&(d=o.wheelDelta),"wheelDeltaY"in o&&(d=o.wheelDeltaY),"wheelDeltaX"in o&&(h=-1*o.wheelDeltaX),"axis"in o&&o.axis===o.HORIZONTAL_AXIS&&(h=-1*d,d=0),c=0===d?h:d,"deltaY"in o&&(d=-1*o.deltaY,c=d),"deltaX"in o&&(h=o.deltaX,0===d&&(c=-1*h)),0!==d||0!==h){if(1===o.deltaMode){var g=e.data(this,"mousewheel-line-height");c*=g,d*=g,h*=g}else if(2===o.deltaMode){var v=e.data(this,"mousewheel-page-height");c*=v,d*=v,h*=v}if(p=Math.max(Math.abs(d),Math.abs(h)),(!r||r>p)&&(r=p,i(o,p)&&(r/=40)),i(o,p)&&(c/=40,h/=40,d/=40),c=Math[c>=1?"floor":"ceil"](c/r),h=Math[h>=1?"floor":"ceil"](h/r),d=Math[d>=1?"floor":"ceil"](d/r),u.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();f=t.clientX-y.left,m=t.clientY-y.top}return t.deltaX=h,t.deltaY=d,t.deltaFactor=r,t.offsetX=f,t.offsetY=m,t.deltaMode=0,s.unshift(t,c,h,d),a&&clearTimeout(a),a=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function n(){r=null}function i(e,t){return u.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var a,r,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var c=o.length;c;)e.event.fixHooks[o[--c]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",u.getLineHeight(this)),e.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),i=n["offsetParent"in e.fn?"offsetParent":"parent"]();return i.length||(i=e("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(e){if("unixtime"==e)return parseInt(this.getTime()/1e3);null==Date.formatFunctions[e]&&Date.createNewFormat(e);var t=Date.formatFunctions[e];return this[t]()},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;for(var code="Date.prototype."+funcName+" = function() {return ",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;eval(code.substring(0,code.length-3)+";}")},Date.getFormatCode=function(e){switch(e){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(e)+"' + "}},Date.parseDate=function(e,t){if("unixtime"==t)return new Date(isNaN(parseInt(e))?0:1e3*parseInt(e));null==Date.parseFunctions[t]&&Date.createParser(t);var n=Date.parseFunctions[t];return Date[n](e)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,regex+=String.escape(ch)):(obj=Date.formatCodeToRegex(ch,currentGroup),currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)):special=!0;code+="if (y > 0 && z > 0){\nvar doyDate = new Date(y,0);\ndoyDate.setDate(z);\nm = doyDate.getMonth();\nd = doyDate.getDate();\n}",code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$"),eval(code)},Date.formatCodeToRegex=function(e,t){switch(e){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:1,c:"z = parseInt(results["+t+"], 10);\n",s:"(\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+t+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+t+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+t+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+t+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+t+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+t+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+t+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+t+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(e)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var e=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var t=0;t<this.getMonth();++t)e+=Date.daysInMonth[t];return e+this.getDate()},Date.prototype.getWeekOfYear=function(){var e=this.getDayOfYear()+(4-this.getDay()),t=new Date(this.getFullYear(),0,1),n=7-t.getDay()+4;return String.leftPad(Math.ceil((e-n)/7)+1,2,"0")},Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100||e%400==0&&e)},Date.prototype.getFirstDayOfMonth=function(){var e=(this.getDay()-(this.getDate()-1))%7;return 0>e?e+7:e},Date.prototype.getLastDayOfMonth=function(){var e=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return 0>e?e+7:e},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(e){return e.replace(/('|\\)/g,"\\$1")},String.leftPad=function(e,t,n){var i=new String(e);for(null==n&&(n=" ");i.length<t;)i=n+i;return i},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"}}(),module.exports||exports}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/countdown.js",function(e){function t(){var e=[];for(i=1;31>=i;i++)e.push({label:i,value:i});return e}function n(){var e=[],t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];for(i=0;7>i;++i)e.push({label:t[i],value:i});return e}var a=window.require.factory(e),r={exports:!1},o={};return a("../../lib/datetimePicker/jquery.datetimepicker.css"),a("../../lib/datetimePicker/jquery.datetimepicker.js"),lp.dateText=ui.text.extend({init:function(e){this._super(e);$(this).attr("data-datetime");this.input.css({lineHeight:1.8,textAlign:"center"}),this.input.datetimepicker({animation:!1,days:!0,timepicker:!1,format:"Y/m/d",closeOnDateSelect:!0,mask:!0,minDate:new Date})}}),lp.timeText=ui.text.extend({init:function(e){this._super(e),this.input.css({lineHeight:1.8,textAlign:"center"}),this.input.datetimepicker({animation:!1,days:!0,datepicker:!1,format:"H:i",step:30,mask:!0})}}),lp.countdown=lp.cover.extendOptions({change:function(){var e=this.element.find(".countdown");e.removeAttr("data-datetime"),e.attr("data-datetime",'{"type":"'+this.value.type+'","date":"'+this.value.date+'","day":"'+this.value.day+'","dayOfWeek":"'+this.value.dayOfWeek+'","time":"'+this.value.time+'"}'),Component.previewFrame.window.$(e).lpCounty()},configForm:{title:"Countdown settings",items:[{name:"type",type:"radio",margin:"5px 0 5px",items:[{label:_t("Exact date"),value:"datetime"},{label:_t("Every month"),value:"monthly"},{label:_t("Every week"),value:"weekly"},{label:_t("Every day"),value:"daily"}]},"<hr>",{type:"label",value:_t("Date:"),width:"14%",margin:"5px 36% 5px 0",showWhen:{type:"datetime"}},{type:"label",value:_t("Day:"),width:"12%",margin:"5px 38% 5px 0",showWhen:{type:"monthly"}},{type:"label",value:_t("Day of week:"),width:"15%",margin:"5px 35% 5px 0",showWhen:{type:"weekly"}},{type:"label",value:_t("Time:"),width:"8%",margin:"5px 42% 5px 0",showWhen:{type:["datetime","monthly","weekly"]}},{type:"label",value:_t("Time:"),width:"50%",margin:"5px 42% 5px 0",showWhen:{type:"daily"}},{name:"date",type:lp.dateText,width:"14%",margin:"5px 36% 5px 0",showWhen:{type:"datetime"}},{name:"day",type:teacss.ui.select,items:t(),width:"12%",margin:"5px 38% 5px 0",showWhen:{type:"monthly"}},{name:"dayOfWeek",type:teacss.ui.select,items:n(),width:"20%",margin:"5px 30% 5px 0",showWhen:{type:"weekly"}},{name:"time",type:lp.timeText,width:"8%",margin:"5px 42% 5px 0"}]}}),r.exports||o
}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/galleryRepeater.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.galleryRepeater=lp.repeater.extendOptions({inline:!0,itemChange:function(e,t){t.find(".img_title").text(e.title),t.find(".img_desc").text(e.desc),t.find(".preview_img").css({backgroundImage:"url('"+base_url+"/"+e.image+"')"}),t.find(".big_img").attr("href",base_url+"/"+e.image),t.find(".big_img").attr("title",e.title)},configForm:{title:_t("Image"),items:[{type:"label",value:_t("Upload image file"),margin:"10px 0 5px"},{name:"image",type:"uploadButton",label:_t("Select image file")},{type:"label",value:_t("Image title:"),margin:"10px 0 5px"},{name:"title",type:"text"},{type:"label",value:_t("Image description:"),margin:"10px 0 5px"},{name:"desc",type:"text"}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/galleryRepeaterImg.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.galleryRepeaterImg=lp.repeater.extendOptions({inline:!0,sortable:!1,itemChange:function(e,t){t.find(".img_title").text(e.title),t.find(".img_desc").text(e.desc),t.find(".preview_img img").attr({src:base_url+"/"+e.image}),t.find(".big_img").attr("href",base_url+"/"+e.image),t.find(".big_img").attr("title",e.title)},configForm:{title:_t("Upload image"),items:[{type:"label",value:_t("Upload image file"),margin:"10px 0 5px"},{name:"image",type:"uploadButton",label:_t("Select image file")},{type:"label",value:_t("Image title:"),margin:"10px 0 5px"},{name:"title",type:"text"},{type:"label",value:_t("Image description:"),margin:"10px 0 5px"},{name:"desc",type:"text"}]}}).extend({init:function(e){this._super(e),this.addButtonWrap&&this.element.parents(".item_list").eq(0).append(this.addButtonWrap.css({marginTop:-90}))}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/imageFancyboxWithSignature.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.imageFancyboxWithSignature=lp.cover.extendOptions({init:function(){this.cover.addClass("lp-button")},change:function(){this.element.find(".img_title").text(this.value.title),this.element.find(".img_desc").text(this.value.desc),this.value.url_image_preview&&(this.element.find(".big_img").attr("title",this.value.title),this.element.find(".preview_img").css({backgroundImage:"url('"+base_url+"/"+this.value.url_image_preview+"')"}),this.value.url_image=this.value.url_image_preview,this.element.find(".big_img").attr("href",base_url+"/"+this.value.url_image))},configForm:{title:_t("Image"),items:[{type:"label",value:_t("Select image file"),margin:"10px 0 5px"},{name:"url_image_preview",type:"uploadButton",label:_t("Upload image file")},{type:"label",value:_t("Image title:"),margin:"10px 0 5px"},{name:"title",type:"text"},{type:"label",value:_t("Image description:"),margin:"10px 0 5px"},{name:"desc",type:"text"}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/internal/imageFancyboxWithoutSignature.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.imageFancyboxWithoutSignature=lp.cover.extendOptions({init:function(){this.cover.addClass("lp-button")},change:function(){this.value.url_image_preview&&(this.element.find(".preview_img").css({backgroundImage:"url('"+base_url+"/"+this.value.url_image_preview+"')"}),this.value.url_image=this.value.url_image_preview,this.element.find(".big_img").attr("href",base_url+"/"+this.value.url_image))},configForm:{title:_t("Image"),items:[{type:"label",value:_t("Select image file"),margin:"10px 0 5px"},{name:"url_image_preview",type:"uploadButton",label:_t("Upload image file")}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/lib/ymaps.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return $.fn.mapYandex=function(e,t){$(this).each(function(){function n(){var e,n=s.data("ymap");n?n.setCenter(a,Number(o)):(n=new ymaps.Map(s[0],{center:a,zoom:o,controls:["geolocationControl","fullscreenControl","zoomControl"]}),s.data("ymap",n),t&&t(n)),n.behaviors.disable("scrollZoom"),n.geoObjects.removeAll();var l;for(i=0;i<r.length;i++){var c=r[i],l=[c.lat,c.lng];e=new ymaps.Placemark(l,{hintContent:c.title,balloonContentHeader:c.title,balloonContentBody:c.address},{balloonCloseButton:!0,balloonPanelMaxMapArea:"Infinity",balloonPane:"outerBalloon",preset:"islands#"+c.color+"DotIcon"}),n.geoObjects.add(e)}}e=e||JSON.parse($(this).attr("data-map-settings"));var a=e.map_center,r=e.map_places,o=(e.map_type,e.map_zoom),s=$(this);ymaps.ready(function(){n()})})},t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/header.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.header=lp.block.extendOptions({change:function(){if(this.cmp.element.find(".header").css({background:this.value.background||""}),2==this.value.variant){var e=this.value.show_order_button;this.variant.find(".span_btn").toggle(e),this.variant.find(".phone").toggleClass("no_btn",!e)}if(3==this.value.variant){var e=this.value.show_desc_and_order_button;this.variant.find(".span_btn").toggle(e),this.variant.find(".desc_2").toggle(e),this.variant.find(".desc_1").toggleClass("no_btn",!e),this.variant.find(".phone").toggleClass("no_btn",!e)}if(4==this.value.variant){var e=this.value.show_order_button;this.variant.find(".span_btn").toggle(e),this.variant.find(".phone").toggleClass("no_btn",!e),this.variant.find(".desc").toggle("image"!=this.value.logo.type)}},configForm:{items:[{name:"show_desc_and_order_button",label:_t("Show description and order button"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[3]}},{name:"show_order_button",label:_t("Show order button"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[2,4]}},{type:"label",value:_t("Background color:"),margin:"5px 0"},{type:lp.color,name:"background",items:[{value:"#FFFFFF"},{value:"#F7F7F7"}]}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/order.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.order=lp.block.extendOptions({change:function(){this.value.background&&this.element.find(".order_"+this.value.variant).css({backgroundImage:"url("+base_url+"/"+this.value.background+")"}),this.value.background_color&&this.element.find(".order_"+this.value.variant).css({background:this.value.background_color||""}),1==this.value.variant&&(this.variant.find(".form_title_2").toggle(this.value.show_form_title_2),this.variant.find(".form_bottom").toggle(this.value.show_form_bottom_text)),2==this.value.variant&&(this.variant.find(".btn_note").toggle(this.value.show_text_above_button),this.variant.find(".btn_wrap").toggleClass("no_btn_note",!this.value.show_text_above_button),this.variant.find(".btn_wrap").toggleClass("no_arrow",!this.value.add_arrow),this.value.add_background_noise?this.element.find(".background_toggle_noise").addClass("with_noise").removeClass("dark"):this.element.find(".background_toggle_noise").removeClass("with_noise").addClass("dark")),3==this.value.variant&&(this.variant.find(".title_2").toggle(this.value.show_title_2),this.variant.find(".img_wrap").toggleClass("hide_border",!this.value.show_border_media),this.variant.find(".list").toggle(this.value.show_list_box)),4==this.value.variant&&(this.variant.find(".title_2").toggle(this.value.show_title_2),this.variant.find(".img_wrap").toggleClass("hide_box_shadow",!this.value.show_box_shadow_media),this.variant.find(".form_bottom").toggle(this.value.show_form_bottom_text)),5==this.value.variant&&(this.variant.find(".title_2").toggle(this.value.show_title_2),this.variant.find(".form_bottom").toggle(this.value.show_form_bottom_text)),6==this.value.variant&&(this.variant.find(".title_2").toggle(this.value.show_title_2),this.variant.find(".title_3").toggle(this.value.show_title_3),this.variant.find(".content_wrap").prop("class","content_wrap "+this.value.move_form),this.variant.find(".form_bottom").toggle(this.value.show_form_bottom_text))},configForm:{items:[{type:"label",value:_t("Background image:"),margin:"5px 0",showWhen:{variant:[1,2,6]}},{name:"background",width:245,type:ui.combo.extendOptions({panelClass:"only-icons",comboWidth:660,comboHeight:600,closeOnSelect:!1,icons:{secondary:"ui-icon-triangle-1-s"},items:function(){for(var e=[],t=1;221>=t;t++)e.push({value:"view/editor/assets/background/"+t+".jpg",thumb:"view/editor/assets/background/thumbs/"+t+".jpg"});return e},itemTpl:function(e){return $("<div class='combo-item'>").append($("<div>").css({width:200,height:50,backgroundSize:"cover",backgroundPosition:"50% 50%",backgroundImage:"url("+base_url+"/"+(e.thumb||e.value)+")"}))}}),showWhen:{variant:[1,2,6]}},{name:"add_background_noise",label:_t("Add noise"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[2]}},{name:"show_text_above_button",label:_t("Show text above the button"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[2]}},{name:"add_arrow",label:_t("Add arrow"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[2]}},{name:"show_form_title_2",label:_t("Show text under the form title"),type:"check",width:"auto",height:27,value:1,margin:"5px 49% 5px 0px",showWhen:{variant:[1]}},{name:"show_title_2",label:_t("Show second title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[3,4,5,6]}},{name:"show_title_3",label:_t("Show third title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[6]}},{name:"show_form_bottom_text",label:_t("Show text under the form"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1,4,5,6]}},{name:"show_border_media",label:_t("Show border from media"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[3]}},{name:"show_box_shadow_media",label:_t("Show border from media"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[4]}},{name:"show_list_box",label:_t("Show list box"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[3]}},{type:"label",value:_t("Form align:"),margin:"10px 0 0 0",showWhen:{variant:[6]}},{name:"move_form",items:[{label:_t("Move left<br>"),value:"align_left"},{label:_t("Move center<br>"),value:"align_center"},{label:_t("Move right"),value:"align_right"}],type:"radio",width:"auto",height:27,margin:"0px 0px 5px 0px",showWhen:{variant:[6]}},{type:"label",value:_t("Background color:"),margin:"5px 0",showWhen:{variant:[4,5]}},{type:lp.color,name:"background_color",items:[{value:"#313138"},{value:"#143A4F"},{value:"#19678B"},{value:"#4E6D8D"},{value:"#607FA4"},{value:"#0E93B3"},{value:"#1E4147"},{value:"#198B82"},{value:"#0C884A"},{value:"#393458"},{value:"#583458"},{value:"#614C8A"},{value:"#8C0C24"},{value:"#593D36"}],showWhen:{variant:[4,5]}},{type:"label",value:_t("Background texture:"),margin:"5px 0",showWhen:{variant:[3]}},{name:"background",width:"95px",type:ui.combo.extendOptions({panelClass:"only-icons",comboWidth:480,comboHeight:600,closeOnSelect:!1,icons:{secondary:"ui-icon-triangle-1-s"},items:function(){for(var e=[],t=1;24>=t;t++)e.push({value:"view/editor/assets/texture/"+t+".png"});return e},itemTpl:function(e){return $("<div class='combo-item'>").append($("<div>").css({width:50,height:50,backgroundSize:"cover",backgroundPosition:"auto 100%",backgroundImage:"url("+base_url+"/"+e.value+")"}))}}),showWhen:{variant:[3]}}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/benefits.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.benefits=lp.block.extendOptions({change:function(){var e=this;e.value.background_color&&e.element.find(".benefits_"+this.value.variant).css({background:e.value.background_color||""}),this.variant.find(".title").toggle(this.value.show_title),this.variant.find(".title_2").toggle(this.value.show_title_2),1==this.value.variant&&(this.variant.find(".name").toggle(this.value.show_benefits_name),this.variant.find(".desc").toggle(this.value.show_benefits_desc),this.variant.find(".item_list").toggleClass("hide_ico_border",!this.value.show_icon_border)),2==this.value.variant&&(this.variant.find(".name").toggle(this.value.show_benefits_name),this.variant.find(".desc").toggle(this.value.show_benefits_desc)),3==this.value.variant&&(this.variant.find(".name").toggle(this.value.show_benefits_name),this.variant.find(".item_list").toggleClass("hide_name",!this.value.show_benefits_name)),4==this.value.variant&&this.variant.find(".item_list").toggleClass("hide_border",!this.value.show_border_image),5==this.value.variant&&(this.variant.find(".name").toggle(this.value.show_benefits_name),this.variant.find(".desc").toggle(this.value.show_benefits_desc),this.variant.find(".item_list").toggleClass("hide_border",!this.value.show_border_image))},configForm:{items:[{name:"show_title",label:_t("Show first title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{name:"show_title_2",label:_t("Show second title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{name:"show_icon_border",label:_t("Show border from icon"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1]}},{name:"show_benefits_name",label:_t("Show name benefit"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1,2,3,5]}},{name:"show_benefits_desc",label:_t("Show description benefit"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1,2,5]}},{name:"show_border_image",label:_t("Show border from image"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[4,5]}},{type:"label",value:_t("Background color:"),margin:"5px 0"},{type:lp.color,name:"background_color",items:[{value:"#FFFFFF"},{value:"#F7F7F7"}]}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/services.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.services=lp.block.extendOptions({init:function(){var e=Component.previewFrame.window.$;e&&e("form .form_field_submit").click(function(t){e("form").formValidateSubmit(t),t.preventDefault()})},change:function(){var e=Component.previewFrame.window.$;e&&e("form .form_field_submit").click(function(t){e("form").formValidateSubmit(t),t.preventDefault()}),this.cmp.element.find(".services").css({background:this.value.background||""}),this.variant.find(".title").toggle(this.value.show_title),this.variant.find(".title_2").toggle(this.value.show_title_2),1==this.value.variant&&(this.variant.find(".img_wrap").toggle(this.value.show_image),this.variant.find(".desc").toggle(this.value.show_desc),this.variant.find(".price").toggle(this.value.show_price),this.variant.find(".btn_wrap").toggle(this.value.show_order_button)),2==this.value.variant&&(this.variant.find(".desc").toggle(this.value.show_desc),this.variant.find(".price").toggle(this.value.show_price),this.variant.find(".btn_wrap").toggle(this.value.show_order_button),this.variant.find(".item").toggleClass("hide_shadow",!this.value.show_shadow_image),this.variant.find(".item_list").prop("class","item_list "+this.value.image_format)),3==this.value.variant&&(this.variant.find(".desc").toggle(this.value.show_desc),this.variant.find(".price").toggle(this.value.show_price),this.variant.find(".btn_note").toggle(this.value.show_text_above_button),this.variant.find(".btn_wrap").toggle(this.value.show_order_button),this.variant.find(".item").toggleClass("hide_shadow",!this.value.show_shadow_image),this.variant.find(".img_data").prop("class","img_data "+this.value.image_size)),4==this.value.variant&&(this.variant.find(".img_wrap").toggle(this.value.show_image),this.variant.find(".desc").toggle(this.value.show_desc),this.variant.find(".price").toggle(this.value.show_price),this.variant.find(".btn_wrap").toggle(this.value.show_order_button)),5==this.value.variant&&(this.variant.find(".img_wrap").toggle(this.value.show_image),this.variant.find(".desc").toggle(this.value.show_desc),this.variant.find(".price").toggle(this.value.show_price),this.variant.find(".btn_wrap").toggle(this.value.show_order_button),this.variant.find(".item_list").prop("class","item_list "+this.value.image_format))},configForm:{items:[{name:"show_title",label:_t("Show first title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{name:"show_title_2",label:_t("Show second title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{name:"show_image",label:_t("Show image"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1,4,5]}},{name:"show_name",label:_t("Show name"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[]}},{name:"show_desc",label:_t("Show description"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1,2,3,4,5]}},{name:"show_price",label:_t("Show price"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1,2,3,4,5]}},{name:"show_text_above_button",label:_t("Show text above order button"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[3]}},{name:"show_order_button",label:_t("Show order button"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1,2,3,4,5]}},{name:"show_shadow_image",label:_t("Show shadow"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[2,3]}},{type:"label",value:_t("Image size:"),margin:"5px 49% 0px 0px",showWhen:{variant:[3]}},{name:"image_size",items:[{label:_t("middle<br>"),value:"image_middle"},{label:_t("large"),value:"image_large"}],type:"radio",width:"auto",margin:"0px 49% 10px 0px",showWhen:{variant:[3]}},{type:"label",value:_t("Image format:"),margin:"5px 49% 0px 0px",showWhen:{variant:[2,5]}},{name:"image_format",items:[{label:_t("circle<br>"),value:"circle"},{label:_t("square"),value:"square"}],type:"radio",width:"auto",margin:"0px 49% 10px 0px",showWhen:{variant:[2,5]}},{type:"label",value:_t("Background color:"),margin:"5px 0"},{type:lp.color,name:"background",items:[{value:"#FFFFFF"},{value:"#F7F7F7"}]}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/reasons.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.reasons=lp.block.extendOptions({change:function(){this.cmp.element.find(".reasons").css({background:this.value.background||""}),1==this.value.variant&&(this.variant.find(".title").toggle(this.value.show_title),this.variant.find(".title_2").toggle(this.value.show_title_2))},configForm:{items:[{name:"show_title",label:_t("Show first title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1]}},{name:"show_title_2",label:_t("Show second title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1]}},{type:"label",value:_t("Background color:"),margin:"5px 0"},{type:lp.color,name:"background",items:[{value:"#FFFFFF"},{value:"#F7F7F7"}]}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/gallery.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.gallery=lp.block.extendOptions({init:function(){},change:function(){var e=Component.previewFrame.window.$;if(this.element.find(".gallery").css({background:this.value.background||""}),this.element.find(".title").toggle(this.value.show_title),this.element.find(".title_2").toggle(this.value.show_title_2),(1==this.value.variant||5==this.value.variant||6==this.value.variant||7==this.value.variant||8==this.value.variant||9==this.value.variant||10==this.value.variant)&&(this.variant.find(".img_title").toggle(this.value.show_image_title),this.variant.find(".img_desc").toggle(this.value.show_image_desc)),2==this.value.variant){this.variant.find(".img_text").unbind("keyup").on("keyup",function(){var t=e(this).parent(".overlay"),n=t.children(),i=0;n.each(function(t,n){i=e(n).outerHeight(!0)+i}),t.height(i-(t.outerHeight()-t.innerHeight()))}),this.variant.find(".img_desc").toggle(this.value.show_image_desc),this.variant.find(".item_list").toggleClass("hide_desc",!this.value.show_image_desc),this.variant.find(".item_list").toggleClass("hide_overlay",!this.value.show_image_overlay);var t=this.element.find(".gallery_2 .item_list .item_block .item");e(t).textBlockHeight()}if((3==this.value.variant||4==this.value.variant)&&(this.variant.find(".img_desc").toggle(this.value.show_image_desc),this.variant.find(".overlay").toggle(this.value.show_image_overlay)),(3==this.value.variant||4==this.value.variant)&&(this.variant.find(".fancybox_whithout_title").toggle(this.value.enable_fancybox),e&&this.value.enable_fancybox&&e(".fancybox_whithout_title").lpFancyboxWhithoutTitle()),(5==this.value.variant||6==this.value.variant||7==this.value.variant||8==this.value.variant||9==this.value.variant||10==this.value.variant)&&(this.variant.find(".big_img").toggleClass("fancybox",this.value.enable_fancybox),e&&!this.value.enable_fancybox&&e(".fancybox").lpFancybox()),5==this.value.variant){var n=this.element.find(".slider [data-name=items]");e(n).lpBxSlider()}if(6==this.value.variant){var i=this.element.find(".masonry");e(i).lpMasonry()}},configForm:{items:[{name:"show_title",label:_t("Show first title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{name:"show_title_2",label:_t("Show second title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{name:"show_image_title",label:_t("Show image name"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1,5,6,7,8,9,10]}},{name:"show_image_overlay",label:_t("Show image signature"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[2,3,4]}},{name:"show_image_desc",label:_t("Show image descroption"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1,2,3,4,5,6,7,8,9,10]}},{name:"enable_fancybox",label:_t("Show big image (enable fancybox)"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[3,4,5,6,7,8,9,10]}},{type:"label",value:_t("Background color:"),margin:"5px 0"},{type:lp.color,name:"background",items:[{value:"#FFFFFF"},{value:"#F7F7F7"}]}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/logos.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.logos=lp.block.extendOptions({change:function(){this.element.find(".clientsLogos").css({background:this.value.background||""}),1==this.value.variant&&(this.variant.find(".title").toggle(this.value.show_title),this.variant.find(".title_2").toggle(this.value.show_title_2),this.variant.find(".item_list").toggleClass("gray",this.value.grayscale_logo))},configForm:{items:[{name:"show_title",label:_t("Show first title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{name:"show_title_2",label:_t("Show second title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{name:"grayscale_logo",label:_t("Grayscale logo"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{type:"label",value:_t("Background color:"),margin:"5px 0"},{type:lp.color,name:"background",items:[{value:"#FFFFFF"},{value:"#F7F7F7"}]}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/cases.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.cases=lp.block.extendOptions({change:function(){this.cmp.element.find(".cases").css({background:this.value.background_color||""}),1==this.value.variant&&(this.variant.find(".title").toggle(this.value.show_title),this.variant.find(".title_2").toggle(this.value.show_title_2),this.variant.find(".name").toggle(this.value.show_name),this.variant.find(".desc").toggle(this.value.show_desc))},configForm:{items:[{name:"show_title",label:_t("Show first title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{name:"show_title_2",label:_t("Show second title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{name:"show_name",label:_t("Show name company"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{name:"show_desc",label:_t("Show branch company"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{type:"label",value:_t("Background color:"),margin:"5px 0"},{type:lp.color,name:"background_color",items:[{value:"#FFFFFF"},{value:"#F7F7F7"}]}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/workOrder.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.workOrder=lp.block.extendOptions({change:function(){this.cmp.element.find(".workOrder").css({background:this.value.background_color||""}),1==this.value.variant&&(this.variant.find(".title").toggle(this.value.show_title),this.variant.find(".title_2").toggle(this.value.show_title_2),this.variant.find(".name").toggle(this.value.show_name),this.variant.find(".desc").toggle(this.value.show_desc)),2==this.value.variant&&(this.variant.find(".title").toggle(this.value.show_title),this.variant.find(".title_2").toggle(this.value.show_title_2))},configForm:{items:[{name:"show_title",label:_t("Show first title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1,2]}},{name:"show_title_2",label:_t("Show second title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1,2]}},{name:"show_name",label:_t("Show name step"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1]}},{name:"show_desc",label:_t("Show description step"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1]}},{type:"label",value:_t("Background color:"),margin:"5px 0"},{type:lp.color,name:"background_color",items:[{value:"#FFFFFF"},{value:"#F7F7F7"}]}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/reviews.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.reviews=lp.block.extendOptions({change:function(){this.cmp.element.find(".reviews").css({background:this.value.background_color||""}),1==this.value.variant&&(this.variant.find(".title").toggle(this.value.show_title),this.variant.find(".title_2").toggle(this.value.show_title_2),this.variant.find(".img_wrap").toggle(this.value.show_image))},configForm:{items:[{name:"show_title",label:_t("Show first title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1]}},{name:"show_title_2",label:_t("Show second title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1]}},{name:"show_image",label:_t("Show image"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1]}},{type:"label",value:_t("Background color:"),margin:"5px 0"},{type:lp.color,name:"background_color",items:[{value:"#FFFFFF"},{value:"#F7F7F7"}]}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/maps.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.placemarkRepeater=teacss.ui.repeater.extend({init:function(e){var t=this;this._super($.extend({addLabel:_t("Add placemark"),repeaterClass:"lp-placemark-repeater",items:[{type:"text",name:"title",width:"32%",margin:"0 1% 0 0"},{type:lp.addressText,name:"",width:"32%",margin:"0 1% 0 0"},{type:lp.color,name:"color",width:"23%",iconSize:12,margin:"0",items:[{value:"blue",color:"#0187BC"},{value:"green",color:"#56DB40"},{value:"orange",color:"#E6761B"},{value:"violet",color:"#B51EFF"},{value:"pink",color:"#F371D1"},{value:"red",color:"#ED4543"},{value:"yellow",color:"#FFD21E"}]},{type:"button",label:_t("center"),width:"7%",margin:"0 1% 0 0",click:function(){var e=lp.maps.current;e.value.map.map_center=[this.form.value.lat,this.form.value.lng],t.trigger("change")}}]},e))},newElement:function(){var e=this.getValue();e.length?this.addElement($.extend(!0,{},e[e.length-1])):this.addElement()}}),lp.addressText=ui.text.extend({init:function(e){var t=this;this._super(e),this.bind("change",function(){function e(e){if(n==t.input.val()){var i=e?e.response.GeoObjectCollection.featureMember:!1;if(i&&i.length){var a=i[0].GeoObject.Point.pos,r=a.split(" ");t.value.lat=r[1],t.value.lng=r[0],t.input.removeClass("error");var o=lp.maps.current;o.value.map.map_center=[t.value.lat,t.value.lng],t.trigger("change")}else t.input.addClass("error"),t.value.lat="",t.value.lng="";t.lastAddress=n,t.coordsChange=!0,t.trigger("change"),t.coordsChange=!1}}if(!t.coordsChange){var n=t.input.val();n!=t.lastAddress&&(n?(clearTimeout(t.geocodeTimeout),t.geocodeTimeout=setTimeout(function(){$.get("http://geocode-maps.yandex.ru/1.x/",{format:"json",results:1,geocode:n},e)},500)):e(!1))}})},setValue:function(e){e=e||{},this.input.val(e.address),this.value=e},getValue:function(){return this.value.address=this.input.val(),this.value}}),lp.maps=lp.block.extendOptions({init:function(){var e=Component.previewFrame.window.$;if(e){var e=Component.previewFrame.window.$;e(this.element.find(".map")).mapYandex(this.value.map)}},change:function(){1==this.value.variant&&this.variant.find(".container_text").toggle(this.value.show_container_text);var e=Component.previewFrame.window.$;e(this.element.find(".map")).mapYandex(this.value.map)},configForm:{width:800,items:[{name:"show_container_text",label:_t("Show text"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1]}},{type:"composite",skipForm:!0,margin:0,items:[{type:"label",value:_t("Name"),width:"32%",margin:"0 1% 2px 0"},{type:"label",value:_t("Address"),width:"32%",margin:"0 1% 2px 0"},{type:"label",value:_t("Color"),width:"23%",margin:"0 0 2px 0"},{type:lp.placemarkRepeater,name:"map.map_places"}]},{height:300,margin:0,name:"map",type:ui.panel.extend({init:function(e){this._super(e)},setValue:function(e){function t(){n.element.mapYandex(e,function(e){e.events.add("boundschange",function(){var t=lp.maps.current;t.value.map.map_center=e.getCenter(),t.value.map.map_zoom=e.getZoom(),t.trigger("change")})})}var n=this;e&&e.map_type&&(window.ymaps?t():teacss.LazyLoad_f(document).js("http://api-maps.yandex.ru/2.1/?lang=ru_RU",t))}})}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/footer.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.footer=lp.block.extendOptions({change:function(){this.cmp.element.find(".footer").css({background:this.value.background_color||""}),1==this.value.variant&&(this.variant.find(".policy_wrap").toggle(this.value.show_policy),this.variant.find(".copyright").toggle(this.value.show_copyright))},configForm:{items:[{name:"show_policy",label:_t("Show policy"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1]}},{name:"show_copyright",label:_t("Show copyright"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1]}},{type:"label",value:_t("Background color:"),margin:"5px 0"},{type:lp.color,name:"background_color",items:[{value:"#FFFFFF"},{value:"#F7F7F7"}]}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/video.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.video=lp.block.extendOptions({change:function(){this.element.find(".video_block").css({background:this.value.background_color||""}),1==this.value.variant&&(this.variant.find(".title").toggle(this.value.show_title),this.variant.find(".title_2").toggle(this.value.show_title_2),this.variant.find(".video").prop("class","video "+this.value.video_size)),2==this.value.variant&&this.variant.find(".text_title_2").toggle(this.value.show_text_title_2),3==this.value.variant&&(this.variant.find(".title").toggle(this.value.show_title),this.variant.find(".title_2").toggle(this.value.show_title_2),this.variant.find(".desc").toggle(this.value.show_desc),this.variant.find(".video").toggleClass("hide_border",!this.value.show_border))
},configForm:{items:[{name:"show_title",label:_t("Show first title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1,3]}},{name:"show_title_2",label:_t("Show second title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1,3]}},{name:"show_text_title_2",label:_t("Show second text title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[2]}},{name:"show_desc",label:_t("Show description"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[3]}},{name:"show_border",label:_t("Show border"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[3]}},{type:"label",value:_t("Video size:"),margin:"5px 49% 0px 0px",showWhen:{variant:[1]}},{name:"video_size",items:[{label:_t("small<br>"),value:"small"},{label:_t("medium<br>"),value:"medium"},{label:_t("large"),value:"large"}],type:"radio",width:"auto",margin:"0px 49% 10px 0px",showWhen:{variant:[1]}},{type:"label",value:_t("Background color:"),margin:"5px 0"},{type:lp.color,name:"background_color",items:[{value:"#FFFFFF"},{value:"#F7F7F7"}]}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/textBlock.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.textBlock=lp.block.extendOptions({change:function(){this.cmp.element.find(".text_block").css({background:this.value.background_color||""}),1==this.value.variant&&(this.variant.find(".title").toggle(this.value.show_title),this.variant.find(".title_2").toggle(this.value.show_title_2),this.variant.find(".list_wrap").toggle(this.value.show_list)),2==this.value.variant&&(this.variant.find(".title").toggle(this.value.show_title),this.variant.find(".title_2").toggle(this.value.show_title_2),this.variant.find(".name").toggle(this.value.show_name)),3==this.value.variant&&(this.variant.find(".title").toggle(this.value.show_title),this.variant.find(".title_2").toggle(this.value.show_title_2)),4==this.value.variant&&this.variant.find(".text_title_2").toggle(this.value.show_text_title_2),5==this.value.variant&&this.variant.find(".item_list").toggleClass("hide_border",!this.value.show_border),6==this.value.variant&&(this.variant.find(".title_2").toggle(this.value.show_text_title_2),this.variant.find(".item_list").toggleClass("hide_border",!this.value.show_border))},configForm:{items:[{name:"show_title",label:_t("Show first title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1,2,3]}},{name:"show_title_2",label:_t("Show second title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1,2,3]}},{name:"show_list",label:_t("Show list"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[1]}},{name:"show_name",label:_t("Show name cell"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[2]}},{name:"show_text_title_2",label:_t("Show description cell"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[4,6]}},{name:"show_border",label:_t("Show border from image"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[5,6]}},{type:"label",value:_t("Background color:"),margin:"5px 0"},{type:lp.color,name:"background_color",items:[{value:"#FFFFFF"},{value:"#F7F7F7"}]}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/digits.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.digits=lp.block.extendOptions({change:function(){if(this.variant.find(".title").toggle(this.value.show_title),this.variant.find(".title_2").toggle(this.value.show_title_2),(1==this.value.variant||2==this.value.variant||4==this.value.variant||8==this.value.variant)&&this.variant.find(".digits").css({background:this.value.background_color||""}),3==this.value.variant||5==this.value.variant||6==this.value.variant||7==this.value.variant){var e=/#\w{3,6}/;this.variant.find(".digits").css(e.test(this.value.background)?{background:this.value.background}:{background:"url("+base_url+this.value.background+")"})}(4==this.value.variant||7==this.value.variant)&&this.variant.find(".item_list").prop("class","item_list "+this.value.icon_color),8==this.value.variant&&this.variant.find(".value").css({color:this.value.digits_color})},configForm:{items:[{name:"show_title",label:_t("Show first title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{name:"show_title_2",label:_t("Show second title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{type:"label",value:_t("Icons color:"),margin:"5px 0 0",showWhen:{variant:[4,7]}},{name:"icon_color",items:[{label:_t("black"),value:"icon_black"},{label:_t("grey"),value:"icon_grey"}],type:"radio",width:"auto",margin:"0px 49% 5px 0px",showWhen:{variant:[4]}},{name:"icon_color",items:[{label:_t("white"),value:"icon_white"},{label:_t("grey"),value:"icon_grey"}],type:"radio",width:"auto",margin:"0px 49% 5px 0px",showWhen:{variant:[7]}},{type:"label",value:_t("Digits color:"),margin:"5px 0 0",showWhen:{variant:[8]}},{type:lp.color,name:"digits_color",items:[{value:"#000"},{value:"#979797"},{value:"#E6332A"},{value:"#FF3E3E"},{value:"#78CA43"},{value:"#12ABE7"},{value:"#FD6F00"},{value:"#A659E2"},{value:"#E05189"}],showWhen:{variant:[8]}},{type:"label",value:_t("Background:"),margin:"5px 0"},{type:lp.color,name:"background_color",items:[{value:"#FFFFFF"},{value:"#F7F7F7"}],showWhen:{variant:[1,2,4,8]}},{name:"background",width:"auto",type:teacss.ui.select.extendOptions({inline:!0,panelClass:"only-icons",items:function(){var e=[];e.push({value:"#313138"},{value:"#24242A"});for(var t=1;3>=t;t++)e.push({value:"/view/editor/assets/texture_black/"+t+".jpg"});return e},itemTpl:function(e){return $("<div class='combo-item'>").append($("<div>").css({width:50,height:50,backgroundSize:"cover",backgroundPosition:"auto 100%",backgroundImage:"url("+base_url+e.value+")",background:e.value}))}}),showWhen:{variant:[3,5,6,7]}}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/ui/timer.js",function(e){var t=(window.require.factory(e),{exports:!1}),n={};return lp.timer=lp.block.extendOptions({init:function(){var e=this.element.find(".countdown"),t=Component.previewFrame.window.$;t&&t(e).lpCounty()},change:function(){Component.previewFrame.window.$;if(this.variant.find(".title_2").toggle(this.value.show_title_2),1==this.value.variant&&(this.cmp.element.find(".timer_1").css({background:this.value.background_color||""}),this.cmp.element.find(".timer_1 .countdown_wrap").css({color:this.value.countdown_color})),2==this.value.variant){var e=/#\w{3,6}/;this.variant.find(".timer_2").css(e.test(this.value.background)?{background:this.value.background}:{background:"url("+base_url+this.value.background+")"}),this.variant.find(".timer_2 .title_2").prop("class","title_2 "+this.value.title_2_color),this.variant.find(".timer_2 .countdown_wrap").prop("class","countdown_wrap "+this.value.title_2_color)}if(3==this.value.variant&&(this.cmp.element.find(".timer_3").css({background:this.value.background_color||""}),this.variant.find(".form_bottom").toggle(this.value.show_form_bottom_text)),4==this.value.variant){var e=/#\w{3,6}/;this.variant.find(".timer_4").css(e.test(this.value.background)?{background:this.value.background}:{background:"url("+base_url+this.value.background+")"}),this.variant.find(".form_bottom").toggle(this.value.show_form_bottom_text)}},configForm:{items:[{name:"show_title_2",label:_t("Show second title"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px"},{name:"show_form_bottom_text",label:_t("Show text under the form"),type:"check",width:"auto",height:27,margin:"5px 49% 5px 0px",showWhen:{variant:[3,4]}},{type:"label",value:_t("Countdown color:"),margin:"5px 0 0",showWhen:{variant:[1]}},{type:lp.color,name:"countdown_color",items:[{value:"#E76953"},{value:"#3F3F3F"}],showWhen:{variant:[1]}},{type:"label",value:_t("Second title color:"),margin:"5px 0 0",showWhen:{variant:[2]}},{type:lp.color,name:"title_2_color",width:"auto",iconSize:20,margin:"0 0 8px",items:[{value:"timer_red",color:"#FF3E3E"},{value:"timer_grey",color:"#C2C2C2"},{value:"timer_green",color:"#74D336"},{value:"timer_blue",color:"#12ABE7"},{value:"timer_orange",color:"#FD6F00"},{value:"timer_purple",color:"#C274FF"},{value:"timer_rose",color:"#E05189"},{value:"timer_yellow",color:"#FFC415"}],showWhen:{variant:[2]}},{type:"label",value:_t("Background:"),margin:"5px 0"},{type:lp.color,name:"background_color",items:[{value:"#FFFFFF"},{value:"#F7F7F7"}],showWhen:{variant:[1,3]}},{name:"background",width:"auto",type:teacss.ui.select.extendOptions({inline:!0,panelClass:"only-icons",items:function(){var e=[];e.push({value:"#313138"},{value:"#24242A"});for(var t=1;3>=t;t++)e.push({value:"/view/editor/assets/texture_black/"+t+".jpg"});return e},itemTpl:function(e){return $("<div class='combo-item'>").append($("<div>").css({width:50,height:50,backgroundSize:"cover",backgroundPosition:"auto 100%",backgroundImage:"url("+base_url+e.value+")",background:e.value}))}}),showWhen:{variant:[2,4]}}]}}),t.exports||n}),require.define("http://uxcandy.com/~maxtun/lpcandy/view/editor/editor.js",function(e){var t=window.require.factory(e),n={exports:!1},i={},a=$.extend(t("./editor_ru.js"),{Preview:"Предпросмотр",Publish:"Публиковать",Editor:"Редактор","Add Section":"Добавить блок","Select component type":"Выбрать тип блока"});window._t.load(a),t("./editor.css"),t("./ui/internal/block.js"),t("./ui/internal/repeater.js"),t("./ui/internal/text.js"),t("./ui/internal/color.js"),t("./ui/internal/cover.js"),t("./ui/internal/logo.js"),t("./ui/internal/icon.js"),t("./ui/internal/formOrder.js"),t("./ui/internal/image.js"),t("./ui/internal/imageSrc.js"),t("./ui/internal/formButton.js"),t("./ui/internal/uploadButton.js"),t("./ui/internal/fontCombo.js"),t("./ui/internal/media.js"),t("./ui/internal/videoStream.js"),t("./ui/internal/countdown.js"),t("./ui/internal/galleryRepeater.js"),t("./ui/internal/galleryRepeaterImg.js"),t("./ui/internal/imageFancyboxWithSignature.js"),t("./ui/internal/imageFancyboxWithoutSignature.js"),t("./lib/ymaps.js"),t("./ui/header.js"),t("./ui/order.js"),t("./ui/benefits.js"),t("./ui/services.js"),t("./ui/reasons.js"),t("./ui/gallery.js"),t("./ui/logos.js"),t("./ui/cases.js"),t("./ui/workOrder.js"),t("./ui/reviews.js"),t("./ui/maps.js"),t("./ui/footer.js"),t("./ui/video.js"),t("./ui/textBlock.js"),t("./ui/digits.js"),t("./ui/timer.js");var r=t.dir;return i=function(e,t){var n=e.extend({init:function(e){teacss.ui.Control.prototype.init.call(this,e),Component.app=this,this.staticStyles=[r+"/style/style.tea"],this.styles=[];var t=this;teacss.jQuery(function(){t.request("load",{cache:0},function(e){try{e=e||{},t.settings={},t.settings.templates=$.parseJSON(e.templates||"{}"),t.settings.theme=$.parseJSON(e.theme||"{}"),teacss.functions.settings=t.settings,t.components=e.components,t.settings.upload=e.upload}catch(n){alert(e)}t.initUI()})}),this.bind("change",function(){t.skipSave||t.request("save",{templates:JSON.stringify(t.settings.templates),theme:JSON.stringify(t.settings.theme,void 0,2)})})},initUI:function(){var e=this;this._super(),this.frame.bind("init",function(){e.frame.$f("head").append("<link type='text/css' rel='stylesheet' href='"+r+"/style/frame.css'>")}),this.frame.element.css({left:0,top:47}),$(".editor-sidebar").detach(),$(".preview-toolbar").width("100%"),e.templateTabs.element.detach(),e.view3dButton.element.detach(),e.publishButton.element.css({position:"relative"}),e.addButton=ui.button({label:_t("Add Section"),icons:{primary:"ui-icon-plus"},click:function(t){e.addSection(t)}}),e.addButton.element.insertAfter(e.publishButton.element)},addSection:function(e){var t=Component.previewFrame.root;t&&(t.children.length?t.children[0].addTop(e):t.addInside())}});n(t)},n.exports||i}),require("/~boomyjee/templater/lib/client/app.js","/~maxtun/lpcandy/view/editor/editor.js",f||function(){})};